(function(a){$telerik.findAutoComplete=$find;
$telerik.toAutoComplete=function(g){return g;
};
Type.registerNamespace("Telerik.Web.UI");
var c=Telerik.Web.UI,b=Sys.Serialization.JavaScriptSerializer,d={0:"contains",1:"startswith"},f=1,e=2;
a.registerEnum(c,"RadAutoCompleteInputType",{Token:0,Text:1});
a.registerEnum(c,"RadAutoCompleteFilter",{Contains:0,StartsWith:1});
a.registerEnum(c,"RadAutoCompleteDropDownPosition",{Automatic:0,Static:1});
a.registerEnum(c,"RadAutoCompleteBinding",{Callback:0,WebService:1,OData:2,ClientDataSource:3});
c.AutoCompleteBoxAttributeCollection=function(){this._data={};
this._keys=[];
};
c.AutoCompleteBoxAttributeCollection.prototype={getAttribute:function(g){return this._data[g];
},setAttribute:function(g,h){this._add(g,h);
},_add:function(g,h){if(Array.indexOf(this._keys,g)<0){Array.add(this._keys,g);
}this._data[g]=h;
},removeAttribute:function(g){Array.remove(this._keys,g);
delete this._data[g];
},_load:function(g){for(var h in g){this._add(h,g[h]);
}},get_count:function(){return this._keys.length;
}};
c.AutoCompleteBoxAttributeCollection.registerClass("Telerik.Web.UI.AutoCompleteBoxAttributeCollection");
c.RadAutoCompleteBox=function(g){c.RadAutoCompleteBox.initializeBase(this,[g]);
this._entryData=null;
this._dropDownItemData=null;
this._children=null;
this._inputElement=null;
this._originalText="";
this._log=new c.ChangeLog();
this._attributes=new c.AutoCompleteBoxAttributeCollection(this);
this._persistChanges=true;
this._postBackReference=null;
this._postBackOnRemove=false;
this._postBackOnAdd=false;
this._postBackOnChange=false;
this._animationContainer=null;
this._enabled=true;
this._dropDown=null;
this._entries=[];
this._uniqueId=null;
this._requestTimer=null;
this._requestInProgress=false;
this._selectedToken=null;
this._flatBinder=null;
this._bindingMode=null;
this._webServiceSettings=null;
this._webServiceLoader=null;
this._clientDropDownTemplate=null;
this._emptyMessage=null;
this._tokensSettings=[];
this._textSettings=[];
this._removeTokenTitle="";
this._requestDelay=250;
this._loadingIcon=null;
this._showAllResultsText="";
this._clientDataSource=null;
this._clientDataSourceID="";
this._dataTextField="";
this._dataValueField="";
this._odataClientSettings=null;
this._highlightFirstMatch=true;
this._shouldFocus=false;
this._expandAnimation=new c.AnimationSettings({});
this._collapseAnimation=new c.AnimationSettings({});
this._enableScreenBoundaryDetection=true;
};
c.RadAutoCompleteBox.prototype={initialize:function(){var j=this,g=a(this._element),h=a(this.get_inputElement());
c.RadAutoCompleteBox.callBaseMethod(this,"initialize");
this._log.initialize();
if(this._isInTokenMode()){g.on("click",".racRemoveTokenLink",function(k){j._onRemoveLinkClick(k);
});
if(this.get_tokensSettings().allowTokenEditing){g.on("dblclick",".racToken",function(k){j._onTokenDblClick(k);
k.stopPropagation();
});
g.on("keydown",".racEditTokenInput",function(k){j._onEditInputKeyDown(k);
});
g.on("blur",".racEditTokenInput",function(k){j._onEditInputBlur(k);
});
}}g.on("click",function(k){j._onInputCellClick(k);
});
h.attr({autocomplete:"off",size:20}).on({keydown:function(k){j._onKeyDown(k);
},keypress:function(k){j._onKeyPress(k);
},keyup:function(k){j._onKeyUp(k);
},paste:function(k){j._onPaste(k);
},blur:function(k){j._onBlur(k);
},focusin:function(k){j._onFocus(k);
}});
if(this.get_showLoadingIcon()){this._createLoadingIcon();
}this._initializeDropDown();
this._initializeInputWidth(true);
this._createChildControls();
this._cdInitDelegate=a.proxy(this._initializeClientDataSource,this);
Sys.Application.add_load(this._cdInitDelegate);
var i=this.get_text();
if(!this._isInTokenMode()){this._originalText=this.get_text();
}this.get_element().value=i;
this._initializeValidatorChangeEvent();
if(this.get_isUsingODataSource()){this._initializeODataSourceBinder();
}this._bindingMode=this._determineBindingMode();
this._toggleEmptyMessage();
this._updateInputSize(true);
if(this._enableClientFiltering){if(this._bindingMode!=c.RadAutoCompleteBinding.Callback){a(this._dropDown.get_itemsContainer()).empty();
this._requestItems("",true);
}this._dropDown.hideItems();
}if(!this._enabled){this.disable();
}if(this._shouldFocus){h.focus();
}this._raiseControlEvent(this,"load",{});
},dispose:function(){c.RadAutoCompleteBox.callBaseMethod(this,"dispose");
this._dropDown.dispose();
a(this._element).add(this.get_inputElement()).off();
},_initializeValidatorChangeEvent:function(g){var j=this._inputElement,i="if(!event) return; var t = event.srcElement || event.target; if (!t._shouldTriggerChange) return; ",h=j.onchange;
if(typeof(h)=="function"){h=h.toString();
h=h.substring(h.indexOf("{")+1,h.lastIndexOf("}"));
j.onchange=new Function("event",i+" "+h);
}},enable:function(){this.set_enabled(true);
},disable:function(){this.set_enabled(false);
},clear:function(){this._dropDown.close();
},createEntry:function(j,k,g){var i=new c.AutoCompleteBoxEntry(),h={text:j,value:k,attributes:g};
i._initialize(h,this);
return i;
},query:function(h){var j=this,i=(this.get_maxResultCount()==-1),g=j._dropDown;
h=h||this.get_searchString();
clearTimeout(this._requestTimer);
if(!h||h.length<this.get_minFilterLength()){this.clear();
}else{if(this.get_enableClientFiltering()){g.filterItems(h,i);
g.open(j._getDropDownPositionInfo());
}else{this._requestTimer=setTimeout(function(){j._requestItems(h,i);
},this._requestDelay);
}}},saveClientState:function(){var g=(this._log._logEntries!==null)?this._log.serialize():"[]";
return'{"enabled":'+this._enabled+',"logEntries":'+g+"}";
},updateClientState:function(){if(this._shouldUpdateClientState){this.set_clientState(this.saveClientState());
}},_addEntry:function(g){this.get_entries()._add(g);
if(this._postBackOnAdd){this._postback({command:"Add",text:g.get_text(),value:g.get_value(),attributes:g.get_attributes()._data});
}},_addTextToken:function(g){var h=g._renderTextToken();
this._insertToken(g,h,".racTextToken");
},_addToken:function(g){var h=g._renderToken();
this._insertToken(g,h,".racToken");
},_insertToken:function(j,k,i){var g=a(this.get_inputElement()),h;
a(k).insertBefore(g);
h=g.parent().find(i).last();
h.data("entry",j);
j.set_token(h[0]);
g.val("");
},_addEntryFromItem:function(h){if(!this._isInTokenMode()&&this.get_allowCustomEntry()){this._appendEntryText(h.get_text(),!this._isInSingleSelectionMode());
return;
}var g=this._createEntryFromDropDownItem(h);
this._appendEntryText(h.get_text(),!this._isInSingleSelectionMode());
this._addEntry(g);
},_appendEntryText:function(i,g){var l=this.get_text(),m,j=this.get_inputElement(),h=this.get_delimiter().charAt(0)+" ",k="";
m=this._getDelimiterIndex(l);
if(m!=-1&&!this._isInTokenMode()&&this.get_allowCustomEntry()){if(!this._getIsDoubleSymbolDelimiter()){k=l.substring(0,m)+h;
}else{k=l.substring(0,m+1)+" ";
}}k+=i;
if(g){k+=h;
}j.focus();
j.value=k;
this._updateInputSize();
},_clearTokenSelection:function(){a(this._selectedToken).removeClass("racTokenSelected");
this._selectedToken=null;
},_createChildControls:function(){var g=this,i=this._entryData,h=new c.AutoCompleteBoxEntryCollection(g);
this._children=h;
this._childControlsCreated=true;
if(this.get_enableClientFiltering()&&this._dropDownItemData){this._populateDropDown(this._dropDownItemData,true);
}if(!this._entryData){return;
}a.each(i,function(j){var k=new c.AutoCompleteBoxEntry();
k._initialize(i[j],g);
h._add(k);
});
this._originalText=this.get_text();
this._logChanges();
},_createLoadingIcon:function(){var g=document.createElement("span");
g.className="racLoadingIcon";
g.style.display="none";
a(this.get_inputElement()).after(g);
this._loadingIcon=g;
},_createEntryFromDropDownItem:function(g){return this.createEntry(g.get_text(),g.get_value(),g.get_attributes()._data);
},_createEntriesFromText:function(p){var j,n,g=this.get_delimiter(),m;
if(!this._getIsDoubleSymbolDelimiter()){j=this.get_text().split(g);
}else{n=this._getDoubleCharRegExp(g);
j=this.get_text().split(n);
}m=j.length;
this.get_entries().clear();
if(this._isInSingleSelectionMode()){if(p){this._addEntry(this.createEntry(p));
}}else{for(var l=0;
l<m;
l++){var k=j[l].trim();
if(k){this._addEntry(this.createEntry(k));
if(this._getIsDoubleSymbolDelimiter()){var o=p.indexOf(k),h=p.substr(o+k.length,1);
p=p.substr(p.indexOf(h));
}}}}},_determineBindingMode:function(){if(this._clientDataSourceID){return c.RadAutoCompleteBinding.ClientDataSource;
}else{if(this.get_odataClientSettings()){return c.RadAutoCompleteBinding.OData;
}else{if(this.get_webServiceSettings()){return c.RadAutoCompleteBinding.WebService;
}else{return c.RadAutoCompleteBinding.Callback;
}}}},_requestItems:function(i,j){var g=c.RadAutoCompleteBinding,h={searchString:i,showAllResults:j};
switch(this.get_bindingMode()){case g.WebService:this._doLoadOnDemandFromWebService(h);
break;
case g.OData:this._doLoadOnDemandUsingOData(h);
break;
case g.Callback:this._doLoadOnDemand(h);
break;
case g.ClientDataSource:this._doLoadOnDemandFromClientDataSource(h);
break;
}},_loadDropDownItems:function(g,h,i){this._raiseControlEvent(this,"requested",{data:g,text:this.get_searchString()});
this._dropDown._clientTemplate=this._clientDropDownTemplate;
this._populateDropDown(g,false,i,h);
},_doLoadOnDemandUsingOData:function(h){var o=this,j=h.searchString,m=h.showAllResults,n=this.get_odataClientSettings().DataTextField,k=m?-1:this.get_maxResultCount(),i={ShowAllResults:h.showAllResults};
o._onRequestStart();
var l={events:{requesting:function(p){var q=p.get_options();
if(!o.get_enableClientFiltering()){p.set_filterExpressions({field:n,operator:d[o.get_filter()],value:j});
}if(k>0){q.data.take=k;
}q.context=i;
},success:function(p,q){if(o._requestInProgress){o._onODataResponse(p,q,arguments[2]);
o._onRequestEnd();
}},fail:function(p){if(o._requestInProgress){o._onErrorReceived("Request failed","");
o._onRequestEnd();
}}}};
var g=this._raiseCancellableControlEvent(this,"requesting",{text:this.get_searchString()});
if(g){return;
}this._flatBinder.fetch(l);
},_onODataResponse:function(k,h,g){var i=(h==k.length),j=(g&&!g.ShowAllResults)?!i:false;
this._loadDropDownItems(k,null,j);
},_doLoadOnDemand:function(k){var l=k.searchString,g={Text:l,ShowAllResults:k.showAllResults},m=Function.createDelegate(this,this._onCallbackResponse),n=Function.createDelegate(this,this._onCallbackError),i=new c.CallbackSettings({id:this._uniqueId,arguments:b.serialize(g),onCallbackSuccess:m,context:{ShowAllResults:k.showAllResults},onCallbackError:n,isAsync:true});
this._onRequestStart();
var j=this._raiseCancellableControlEvent(this,"requesting",{text:l});
if(j){return;
}var h=new c.CallbackLoader(i);
h.invokeCallbackMethod();
},_onCallbackResponse:function(k,h){if(!this._requestInProgress){return;
}var l=k.split("_$$_"),i=a.parseJSON(l[0]),g=a(this.get_dropDownElement()).find("ul"),j=(h&&!h.ShowAllResults)?(l[2]!="True"):false;
g.html(l[1]);
this._raiseControlEvent(this,"requested",{data:i,text:this.get_searchString()});
this._populateDropDown(i,true,j);
this._onRequestEnd();
},_onCallbackError:function(g){if(!this._requestInProgress){return;
}this._onErrorReceived(g,this.get_searchString());
this._onRequestEnd();
},_doLoadOnDemandFromClientDataSource:function(j){this._onRequestStart();
var h=this._raiseCancellableControlEvent(this,"requesting",{text:j.searchString});
if(h){return;
}var i=this._clientDataSource,g=this;
if(i.get_data().length===0){i.fetch(function(){g._processClientDataSourceData(j);
});
}else{g._processClientDataSourceData(j);
}},_loadItemsFromData:function(g,l){var i=g,j=this.get_maxResultCount(),k,h={dataTextField:this._dataTextField,dataValueField:this._dataValueField};
if(l){k=false;
}else{if(j<i.length){i=i.slice(0,j);
k=true;
}else{k=false;
}}this._loadDropDownItems(i,h,k);
this._onRequestEnd();
},_processClientDataSourceData:function(k){if(!this._requestInProgress){return;
}var i=this._clientDataSource,h=this;
var j,g=Telerik.Web.UI.ClientDataSource.FilterOperator;
if(this.get_filter()==Telerik.Web.UI.RadAutoCompleteFilter.Contains){j=g.Contains;
}else{j=g.StartsWith;
}i.get_filterExpressions().clear();
i.get_filterExpressions().add([{fieldName:this._dataTextField,value:k.searchString,operator:j}]);
i.fetch(function(){var l=i.view();
h._loadItemsFromData(l,k.showAllResults);
});
},_doLoadOnDemandFromWebService:function(h){var j=h.searchString,m=h.showAllResults,n={Text:j,MaxResultCount:m?-1:this.get_maxResultCount(),IsCaseSensitive:this.get_isCaseSensitive()},i={ShowAllResults:h.showAllResults},k={context:n},o=this.get_webServiceSettings(),l=o;
this._onRequestStart();
var g=this._raiseCancellableControlEvent(this,"requesting",k);
if(g){return;
}this._webServiceLoader=new c.WebServiceLoader(o);
if(l.get_isWcf()){k.context=this._webServiceLoader._serializeDictionaryAsKeyValuePairs(k.context);
}this._webServiceLoader.add_loadingSuccess(Function.createDelegate(this,this._onWebServiceResponse));
this._webServiceLoader.add_loadingError(Function.createDelegate(this,this._onWebServiceError));
this._webServiceLoader.loadData(k,i);
},_onWebServiceResponse:function(m,h){if(!this._requestInProgress){return;
}var i=h.get_data().Items,j=this.get_maxResultCount(),n=h.get_context().ShowAllResults,g=h.get_data().EndOfItems,k=(h&&!n)?!g:false,l;
if(j!=-1&&j<i.length){if(n){k=false;
}else{i=i.slice(0,j);
k=true;
}}l=i;
this._loadDropDownItems(l,null,k);
this._onRequestEnd();
},_onWebServiceError:function(i,h){if(!this._requestInProgress){return;
}var g=h.get_message(),j=h.get_context();
this._onErrorReceived(g,j);
this._onRequestEnd();
},_onErrorReceived:function(h,j){var i=(h.indexOf("DataSource not set")!=-1),g={errorMessage:h};
if(this._raiseCancellableControlEvent(this,"requestFailed",g)){return;
}if(i){alert("The control DataSource(or DataSourceID) is not set.");
}else{alert(h);
}},_onRequestStart:function(){if(this.get_showLoadingIcon()){a(this._loadingIcon).show();
}this._requestInProgress=true;
},_onRequestEnd:function(){if(this.get_showLoadingIcon()){a(this._loadingIcon).hide();
}this._requestInProgress=false;
},_ensureChildControls:function(){if(!this._childControlsCreated){this._createChildControls();
this._childControlsCreated=true;
}},_focusInput:function(g){var h=this;
h.get_inputElement().focus();
},_getEntriesTexts:function(){var k=[],g=this.get_entries(),h=g.get_count();
if(this._isInSingleSelectionMode()){if(h>0){return g.getEntry(0).get_text();
}else{return"";
}}for(var j=0;
j<h;
j++){k[k.length]=g.getEntry(j).get_text();
if(this._getIsDoubleSymbolDelimiter()&&!this._isInTokenMode()){k[k.length]=this.get_delimiter().charAt(0);
}else{k[k.length]=this.get_delimiter();
}k[k.length]=" ";
}return k.join("");
},_initializeDropDown:function(){var l=this,i=a(this._element).find(".racSlide").get(0),g=a(i).children(".RadAutoCompleteBoxPopup"),j=a(this._element).find(".racLabel").outerWidth();
if(j){j+=1;
}var h={enableClientFiltering:this.get_enableClientFiltering(),filter:this.get_filter(),maxResultCount:this.get_maxResultCount(),isCaseSensitive:this.get_isCaseSensitive(),showAllResultsText:this._showAllResultsText,highlightFirstMatch:this._highlightFirstMatch,width:this.get_dropDownWidth()||(a(this._element).width()-j),height:this.get_dropDownHeight(),anchor:this._element,expandAnimation:this.get_expandAnimation(),collapseAnimation:this.get_collapseAnimation(),enableScreenBoundaryDetection:this.get_enableScreenBoundaryDetection()};
this._dropDown=new c.RadAutoCompleteBox.DropDown(i,h);
if($telerik.isIE7){var k=g.outerWidth(true),m=g.css("width");
if(m.indexOf("%")==-1){m=parseInt(m,10);
if(m!==0){g.width(m-(k-m));
}}}this._dropDown.on({itemDataBound:l._onDropDownItemDataBound,dropDownMouseUp:l._onDropDownMouseUp,dropDownItemClicked:l._onDropDownItemClicked,dropDownOpening:l._onDropDownOpening,dropDownOpened:l._onDropDownOpened,dropDownClosing:l._onDropDownClosing,dropDownClosed:l._onDropDownClosed,ShowAllClick:l._onShowAllClick},this);
},_initializeInputWidth:function(k){var g=a(this._element),j=this.get_inputElement(),i=g.find(".racTokenList"),h=g.find(".racLabel"),l=h.get(0);
if(l){var m=h.outerWidth()+f,n=i.outerWidth()-i.width(),o=g.width();
i.width(o-(m+n));
}if(!this._isInTokenMode()&&this.get_allowCustomEntry()){j.style.width="100%";
this._updateText(k);
}},_initializeODataSourceBinder:function(){var h=this.get_odataClientSettings().ODataSourceID,g=$find(h);
if(!g){var i=String.format("DataSource with id {0} was not found on the page",h);
alert(i);
}else{this._flatBinder=new c.RadODataDataSource.Binder.Flat(g,this);
this._flatBinder.initialize();
}},_initializeClientDataSource:function(){if(this._clientDataSourceID){this._clientDataSource=$find(this._clientDataSourceID);
}Sys.Application.remove_load(this._cdInitDelegate);
},_isInTokenMode:function(){return this.get_inputType()==c.RadAutoCompleteInputType.Token;
},_isInSingleSelectionMode:function(){return(!this._isInTokenMode()&&this.get_textSettings().selectionMode===0);
},_logChanges:function(){this._logEntries();
this.updateClientState();
this.get_element().value=this.get_text();
},_logEntries:function(){var h=this.get_entries(),g=h.get_count();
this._log.initialize();
for(var j=0;
j<g;
j++){this._log.logInsert(h.getEntry(j));
}},_populateDropDown:function(g,j,k,h){var i=this._dropDown,l=g.length;
if(g.length){i.populate(g,j,h);
if(k&&l>=this.get_maxResultCount()){i._addShowAllButton();
}else{i._removeShowAllButton();
}if(!this.get_enableClientFiltering()){i.open(this._getDropDownPositionInfo());
if(this._highlightFirstMatch){i.highlightNext();
}}}else{this.clear();
}},_getDropDownPositionInfo:function(){var g={automaticPosition:(this.get_dropDownPosition()==c.RadAutoCompleteDropDownPosition.Automatic),simpleTextMode:(!this._isInTokenMode()&&this.get_allowCustomEntry()),delimiter:this.get_delimiter()};
return g;
},_raiseControlEvent:function(h,i,g){a.raiseControlEvent(h,i,g);
},_raiseCancellableControlEvent:function(h,i,g){return a.raiseCancellableControlEvent(h,i,g);
},_removeEntry:function(g){var h=g.get_index();
this.get_entries()._remove(g);
if(this._postBackOnRemove){this._postback({command:"Remove",index:h});
}},_removeTextToken:function(g){this._removeToken(g);
},_removeToken:function(g){var h=g.get_token();
a(h).remove();
},_shouldApplyEmptyMessage:function(){return(this.get_entries().get_count()===0&&this.get_emptyMessage());
},_toggleEmptyMessage:function(h){var g=a(this.get_inputElement());
if(this._shouldApplyEmptyMessage()){g.val(this.get_emptyMessage());
if(g.is(":not(.racEmptyMessage)")){g.addClass("racEmptyMessage");
}}else{if(g.is(".racEmptyMessage")){g.get(0).className="racInput";
}}this._updateInputSize(h);
},_updateInputSize:function(k){var h=this._element,g=a(h),j=this.get_inputElement(),m=j.value,l=0;
if(k){if(m.length>0){j.size=m.length;
}else{if(m.length===0){j.size=e;
}}}else{var n=this._dropDown._getTextWidth(m),o=h.offsetHeight,i=0;
if(!this._isMaxWidthRemoved&&!this.get_showLoadingIcon()){a(j).css("maxWidth","none");
this._isMaxWidthRemoved=true;
}if(this._isInTokenMode()){j.style.width=n+10+"px";
}else{if(this.get_allowCustomEntry()&&this.get_element().style.width.indexOf("%")!=-1){j.style.width="100%";
}else{g.find(".racTextToken").each(function(q,p){i+=a(p).outerWidth(true);
});
l=g.outerWidth(true)-i-a(this._loadingIcon).outerWidth(true);
if(l>0&&this.get_allowCustomEntry()){a(j).width(l);
}else{j.style.width=n+10+"px";
}}}if(o!==h.offsetHeight){this._dropDown.position(this._getDropDownPositionInfo());
}}},_updateText:function(h){var g=this.get_inputElement(),i=this._getEntriesTexts();
g.value=i;
this._updateInputSize(h);
},_getIsDelimiter:function(g){var i=false,h=this.get_delimiter();
if(this._getIsDoubleSymbolDelimiter()){i=(g===h.charCodeAt(0)||g===h.charCodeAt(1));
}else{i=g===h.charCodeAt(0);
}return i;
},_getDelimiterIndex:function(j){var g=this.get_delimiter();
if(this._getIsDoubleSymbolDelimiter()){var h=j.lastIndexOf(g.charAt(0)),i=j.lastIndexOf(g.charAt(1));
return Math.max(h,i);
}return j.lastIndexOf(g.charAt(0));
},_getIsDoubleSymbolDelimiter:function(){return this.get_delimiter().length>1;
},_getDoubleCharRegExp:function(g){return new RegExp("["+g.charAt(0)+"|"+g.charAt(1)+"]");
},_onFocus:function(g){var h=this.get_inputElement();
if(a(h).is(".racEmptyMessage")){a(h).removeClass("racEmptyMessage");
h.value="";
}if(!this._isInTokenMode()){this._putCursorAtEnd(h);
}this._originalText=this.get_text();
},_putCursorAtEnd:function(h){var g=a(h);
if(h.setSelectionRange){var i=g.val().length;
h.setSelectionRange(i,i);
}else{g.val(g.val());
}},_onBlur:function(i){var l=this.get_text(),h=this._dropDown,g=this._dropDown.select(),k=this.get_inputElement();
if(!h._shouldBlurAutoComplete&&!g){return;
}if(!h._shouldBlurAutoComplete&&g&&g.get_text()!=l){return;
}this._onRequestEnd();
if(this._requestTimer){clearTimeout(this._requestTimer);
}h.close();
this._clearTokenSelection();
if(g){this._addEntryFromItem(g);
l=this.get_text();
}if(!this.get_allowCustomEntry()){k.value="";
l=this.get_text();
}if(l==this._originalText&&g){if(!h._isScroll){this._toggleEmptyMessage();
return;
}}this.get_element().value=l;
k._shouldTriggerChange=true;
a(k).trigger("change");
k._shouldTriggerChange=undefined;
if(this._isInTokenMode()){if(this.get_allowCustomEntry()&&this.get_searchString()&&!g){var j=this.createEntry(this.get_searchString());
this._addEntry(j);
}}else{if(this.get_allowCustomEntry()){this._createEntriesFromText(l);
this._updateText();
}if(l!==this._originalText){this._onTextChanged(l);
if(this._postBackOnChange){this._logChanges();
this._postback({command:"Change",text:l});
}}}this._originalText=l;
this._logChanges();
this._toggleEmptyMessage();
},_onInputCellClick:function(g){if(!this._enabled){return;
}if(this.get_inputElement().value==this.get_emptyMessage()){this.get_inputElement().value="";
}if(g.target.className!="racEditTokenInput"){this._focusInput();
}},_onKeyDown:function(l){var u=this,k=this._dropDown,h,s,i=function(y,x){y._appendEntryText(h.get_text(),false);
h.ensureVisible(x);
y._dropDown.position(y._getDropDownPositionInfo());
};
if(l.keyCode!=Sys.UI.Key.backspace&&this._selectedToken){this._clearTokenSelection();
}setTimeout(function(){u._updateInputSize();
},10);
switch(l.keyCode){case Sys.UI.Key.up:l.preventDefault();
k.highlightPrev();
h=k.get_activeItem();
if(h){i(this,false);
}break;
case Sys.UI.Key.down:l.preventDefault();
k.highlightNext();
h=k.get_activeItem();
if(h){i(this,true);
}break;
case Sys.UI.Key.enter:var q=this._dropDown.select(),p=this.get_inputElement(),n;
l.preventDefault();
if(q){this._addEntryFromItem(q);
}else{var r=this.get_searchString();
if(r.length===0){return;
}if(this.get_allowCustomEntry()&&!this._isInSingleSelectionMode()){if(this._isInTokenMode()){n=this.createEntry(r);
this._addEntry(n);
}else{var m=false,j=this.get_delimiter();
s=this.get_text();
if(this._getIsDoubleSymbolDelimiter()){m=this._endsWith(s,j.charAt(0))||this._endsWith(s,j.charAt(1));
if(!m){p.value+=j.charAt(0)+" ";
}}else{p.value+=j;
}}}}this._updateInputSize();
this.clear();
break;
case Sys.UI.Key.backspace:s=this.get_inputElement().value;
var t=s.length,o;
if(t===0){if(this._selectedToken){o=a(this._selectedToken).data()["entry"];
this._removeEntry(o);
this._selectedToken=null;
}else{if(this._isInTokenMode()||!this.get_allowCustomEntry()){var v=this._isInTokenMode()?".racToken":".racTextToken",w="racTokenSelected",g=a(this.get_element()).find(v).last();
g.addClass(w);
this._selectedToken=g.get(0);
}}}break;
}},_onKeyPress:function(h){var g=h.keyCode?h.keyCode:h.charCode,j=this._getIsDelimiter(g),i;
if(j&&!this._isInSingleSelectionMode()){if(!this._isInTokenMode()&&this.get_allowCustomEntry()){return;
}h.preventDefault();
var k=this.get_searchString();
if(!k||k==" "||k.length===0||!this.get_allowCustomEntry()){return;
}i=this.createEntry(k);
this._addEntry(i);
this.clear();
}},_endsWith:function(g,h){return g.indexOf(h,g.length-h.length)!==-1;
},_onKeyUp:function(i){var g=i.keyCode,n=Sys.UI.Key,l=g===n.backspace,m=g!=n.up&&g!=n.down&&g!=n.enter&&g!=n.tab&&!l,j=false,h=this.get_delimiter(),p=this.get_text(),k;
if(h.length>1){j=this._endsWith(p,h.charAt(0))||this._endsWith(p,h.charAt(1));
}else{j=this._endsWith(p,h);
}if(m||l){if(!j){this.query();
}else{var o=this.get_searchString(g);
if(!o&&o.length===0||!this.get_allowCustomEntry()){return;
}if(o!==""){k=this.createEntry(o);
this._addEntry(k);
this.clear();
}}}},_onPaste:function(g){var h=this;
setTimeout(function(){h._updateInputSize();
h.query();
},1);
},_onRemoveLinkClick:function(g){if(!this._enabled){return;
}var h=a(g.target).closest(".racToken").data()["entry"];
this._removeEntry(h);
this._logChanges();
},_onEditInputKeyDown:function(g){if(!this._enabled){return;
}var h=a(g.target.parentElement).data()["entry"],i=a(g.target).get(0),j=a(g.target.parentElement.firstChild).get(0);
switch(g.keyCode){case Sys.UI.Key.enter:g.preventDefault();
if(i.value!=h.get_text()){h.set_text(i.value);
j.nodeValue=i.value;
}else{j.nodeValue=h.get_text();
}this._removeTokenEditInput(i);
this._logChanges();
return false;
break;
case Sys.UI.Key.esc:j.nodeValue=h.get_text();
this._removeTokenEditInput(i);
break;
default:return false;
}},_onEditInputBlur:function(g){if(!this._enabled||this._preventTokenBlur){return;
}var h=a(g.target.parentElement).data()["entry"],i=a(this.get_element()).find(".racEditTokenInput").get(0),j=a(g.target.parentElement.firstChild).get(0);
j.nodeValue=h.get_text();
this._removeTokenEditInput(i);
},_onTokenDblClick:function(h){if(!this._enabled){return;
}var k=a(this.get_element()).find(".racEditTokenInput.radPreventDecorate");
if(k.get(0)!==undefined){var n=k.parent(),i=a(n).data()["entry"],p;
p=a(n).contents().filter(function(){return this.nodeType==3;
});
p.nodeValue=i.get_text();
this._removeTokenEditInput(k);
}var j=document.createElement("input"),o=a(h.currentTarget.firstChild).get(0).nodeValue,g=a(j),m=this.get_renderMode()==c.RenderMode.Lite,l=a(h.currentTarget).width();
if(m){l-=a(h.currentTarget.firstElementChild).outerWidth(true);
}g.attr("type","text").val(o).width(l).addClass("racEditTokenInput radPreventDecorate");
a(h.currentTarget.firstChild).get(0).nodeValue="";
a(h.currentTarget).find(".racRemoveTokenLink").before(j);
g.focus();
this._selectInputText(j,o.length);
},_removeTokenEditInput:function(g){this._preventTokenBlur=true;
a(g).remove();
this._preventTokenBlur=false;
},_selectInputText:function(h,j){var i=0,g=j;
if(h.createTextRange){var k=h.createTextRange();
k.moveStart("character",i);
k.moveEnd("character",g);
k.select();
}else{h.setSelectionRange(i,g);
}},_onDropDownItemDataBound:function(g){this._raiseControlEvent(this,"dropDownItemDataBound",g);
},_onDropDownOpening:function(g){var h=this._raiseCancellableControlEvent(this,"dropDownOpening",g);
g.set_cancel(h);
},_onDropDownOpened:function(g){this._raiseControlEvent(this,"dropDownOpened",g);
},_onDropDownClosing:function(g){var h=this._raiseCancellableControlEvent(this,"dropDownClosing",g);
g.set_cancel(h);
},_onDropDownClosed:function(g){this._raiseControlEvent(this,"dropDownClosed",g);
},_onDropDownMouseUp:function(g){this._focusInput();
},_onDropDownItemClicked:function(g){var h=g.get_item(),i=this;
if(h){setTimeout(function(){i._addEntryFromItem(h);
i._updateInputSize();
},10);
}},_onShowAllClick:function(g){var h=this.get_searchString();
if(this.get_enableClientFiltering()){this._dropDown.filterItems(h,true);
this._dropDown.open(this._getDropDownPositionInfo());
}else{this._requestItems(h,true);
}},_onEntryAdding:function(g){var h=a.extendEventArgs(new Sys.CancelEventArgs(),{entry:g});
return this._raiseCancellableControlEvent(this,"entryAdding",h);
},_onEntryAdded:function(g){this._raiseControlEvent(this,"entryAdded",a.extendEventArgs({},{entry:g}));
},_onEntryRemoving:function(g){var h=a.extendEventArgs(new Sys.CancelEventArgs(),{entry:g});
return this._raiseCancellableControlEvent(this,"entryRemoving",h);
},_onEntryRemoved:function(g){this._raiseControlEvent(this,"entryRemoved",a.extendEventArgs({},{entry:g}));
},_onTextChanged:function(g){this._raiseControlEvent(this,"textChanged",a.extendEventArgs({},{text:g}));
},_postback:function(g){if(!this._postBackReference){return;
}var i=this._serializePostbackCommand(g),h=this._postBackReference.replace("arguments",i);
eval(h);
},_serializePostbackCommand:function(g){var h=b.serialize(g);
return encodeURIComponent(h.replace(/'/g,"&squote"));
},get_requestDelay:function(){return this._requestDelay;
},set_requestDelay:function(g){this._requestDelay=g;
},get_attributes:function(){return this._attributes;
},set_attributes:function(g){this._attributes._load(g);
},_getChildren:function(){this._ensureChildControls();
return this._children;
},get_entries:function(){return this._getChildren();
},set_enabled:function(i){var g=a(this.get_inputElement()),h=a(this._element).find(".racTokenList");
this._enabled=i;
if(!i){g.attr("disabled","disabled");
}else{g.removeAttr("disabled");
}h.toggleClass("racDisabled",!i);
this.updateClientState();
},get_enabled:function(){return this._enabled;
},get_inputElement:function(){if(!this._inputElement){this._inputElement=a(this.get_element()).find(".racInput").get(0);
}return this._inputElement;
},get_entryData:function(){return this._entryData;
},get_dropDownItemData:function(){return this._dropDownItemData;
},get_text:function(){var g=this.get_inputElement().value;
if(!this._isInTokenMode()&&this.get_allowCustomEntry()){return g;
}else{return this._getEntriesTexts()+g;
}},get_searchString:function(){var h,l=this.get_text(),g=this.get_delimiter(),k=this._getDoubleCharRegExp(g),m=[];
if(!this._isInSingleSelectionMode()){if(!this._getIsDoubleSymbolDelimiter()){h=this.get_text().split(g);
}else{if(!this.get_allowCustomEntry()){h=this.get_inputElement().value;
}else{h=this.get_text().split(k);
}}}else{h=this.get_text().split(k);
}for(var j=0;
j<h.length;
j++){if(h[j]!==null){m.push(h[j]);
}}if(!this._isInSingleSelectionMode()){if(m[m.length-1]!==undefined){return m[m.length-1].trimStart();
}else{return h;
}}return l;
},get_bindingMode:function(){return this._bindingMode;
},get_dropDownElement:function(){return this._dropDown._element;
},set_entryData:function(g){this._entryData=g;
},set_dropDownItemData:function(g){this._dropDownItemData=g;
},get_emptyMessage:function(){return this._emptyMessage;
},set_emptyMessage:function(g){if(this._emptyMessage!==g){this._emptyMessage=g;
}},get_webServiceSettings:function(){return this._webServiceSettings;
},get_flatModel:function(){var g=this.get_odataClientSettings();
return c.RadODataDataSource.Binder.Flat.Model(g);
},set_webServiceSettings:function(h){var g=b.deserialize(h);
this._webServiceSettings=new c.WebServiceSettings(g);
},get_isUsingODataSource:function(){return this._odataClientSettings!==null;
},get_tokensSettings:function(){return this._tokensSettings;
},set_tokensSettings:function(g){this._tokensSettings=Sys.Serialization.JavaScriptSerializer.deserialize(g);
},get_allowTokenEditing:function(){if(!this._tokensSettings.allowTokenEditing){this._tokensSettings.allowTokenEditing=false;
}return this._tokensSettings.allowTokenEditing;
},set_allowTokenEditing:function(g){this._tokensSettings.allowTokenEditing=g;
},get_textSettings:function(){return this._textSettings;
},set_textSettings:function(g){this._textSettings=Sys.Serialization.JavaScriptSerializer.deserialize(g);
},get_expandAnimation:function(){return this._expandAnimation;
},set_expandAnimation:function(h){var g=b.deserialize(h);
this._expandAnimation=new c.AnimationSettings(g);
if(this._dropDown&&this._dropDown._dropDown){this._dropDown._dropDown.set_expandAnimation(this._expandAnimation);
}},get_collapseAnimation:function(){return this._collapseAnimation;
},set_collapseAnimation:function(h){var g=b.deserialize(h);
this._collapseAnimation=new c.AnimationSettings(g);
if(this._dropDown&&this._dropDown._dropDown){this._dropDown._dropDown.set_collapseAnimation(this._collapseAnimation);
}},get_enableScreenBoundaryDetection:function(){return this._enableScreenBoundaryDetection;
},set_enableScreenBoundaryDetection:function(g){this._enableScreenBoundaryDetection=g;
if(this._dropDown&&this._dropDown._dropDown){this._dropDown._dropDown.set_enableScreenBoundaryDetection(g);
}},repaint:function(){this._initializeInputWidth(true);
}};
a.registerControlProperties(c.RadAutoCompleteBox,{filter:0,inputType:0,dropDownPosition:0,allowCustomEntry:false,delimiter:";",odataClientSettings:null,enableClientFiltering:false,minFilterLength:1,maxResultCount:-1,showLoadingIcon:true,isCaseSensitive:false,dropDownWidth:"",dropDownHeight:""});
a.registerControlEvents(c.RadAutoCompleteBox,["load","dropDownItemDataBound","dropDownOpening","dropDownOpened","dropDownClosing","dropDownClosed","entryAdding","entryAdded","entryRemoving","entryRemoved","textChanged","requesting","requested","requestFailed"]);
c.RadAutoCompleteBox.registerClass("Telerik.Web.UI.RadAutoCompleteBox",c.RadWebControl);
})($telerik.$);
(function(b,a){var c=b.RadAutoCompleteBox,d=".",h="racShowAll",g="RadAutoCompleteBoxPopup",f="racList",e="racItem";
c.DropDown=function(j,i){a.observable(this);
this._element=j;
this._popup=null;
this._items=[];
this._activeElement=null;
this._shouldBlurAutoComplete=true;
this._isScroll=false;
this._clientTemplate=null;
this._enableClientFiltering=i.enableClientFiltering;
this._filter=i.filter;
this._maxResultCount=i.maxResultCount;
this._matchesCount=0;
this._isCaseSensitive=i.isCaseSensitive;
this._showAllResultsText=i.showAllResultsText;
this._highlightFirstMatch=i.highlightFirstMatch;
this._width=i.width;
this._height=i.height;
this._parent=i.anchor;
this._expandAnimation=i.expandAnimation;
this._collapseAnimation=i.collapseAnimation;
this._enableScreenBoundaryDetection=i.enableScreenBoundaryDetection;
this._dropDown=null;
this.init();
};
c.DropDown.prototype={get_itemsContainer:function(){var j=this.get_popup(),i=a(j).children(d+f).get(0);
return i;
},get_popup:function(){if(!this._popup){this._popup=a(this._element).find(d+g).get(0);
}return this._popup;
},get_activeItem:function(){var i=this._activeElement;
return i?i._item:null;
},getItem:function(i){return this._items[i];
},get_items:function(){return this._items;
},get_clientTemplate:function(){return this._clientTemplate;
},set_clientTemplate:function(i){this._clientTemplate=i;
},init:function(){var i=this;
this._initializeDropDown();
a(this.get_popup()).on({mousedown:function(j){i._shouldBlurAutoComplete=false;
},mouseup:function(j){i._shouldBlurAutoComplete=true;
i._onDropDownMouseUp(j);
},click:function(j){i._onShowAllClick(j);
}},d+h);
a(this.get_itemsContainer()).on({click:function(j){i._onDropDownClick(j);
i.close();
},mousedown:function(j){i._shouldBlurAutoComplete=false;
},mouseup:function(j){i._shouldBlurAutoComplete=true;
i._onDropDownMouseUp(j);
},scroll:function(j){if($telerik.isIE){i._isScroll=true;
setTimeout(function(){i._shouldBlurAutoComplete=true;
},0);
i._onDropDownMouseUp(j);
}},mouseover:function(j){i._onDropDownHover(j);
},mouseout:function(j){i._onDropDownOut(j);
}});
},_initializeDropDown:function(){this._dropDown=new b.DropDown(this._element,{direction:2,expandAnimation:this._expandAnimation,collapseAnimation:this._collapseAnimation,enableScreenBoundaryDetection:this._enableScreenBoundaryDetection,anchor:this._parent,width:this._width||"auto",height:this._height});
this._dropDown.on({opening:this._onDropDownOpening,opened:this._onDropDownOpened,closing:this._onDropDownClosing,closed:this._onDropDownClosed,reflowing:this._onDropDownReflowing,reflowed:this._onDropDownReflowed,collapseAnimationEnded:this._onCollapseAnimationEnded},this);
this._dropDown.initialize();
this._dropDown.updateSize();
},dispose:function(){this.disposeObservable();
this._positionInfo=null;
if(this._dropDown){this._dropDown.dispose();
this._dropDown=null;
}a(document).add(this.get_itemsContainer()).off();
this.clear();
a(this._element).remove();
this._element=null;
},populate:function(j,l,k){var m=this,i=a(this.get_itemsContainer()).find(d+e);
if(!l){this.clear();
}a.each(j,function(p,n){var q=new c.DropDownItem(n,k);
m.trigger("itemDataBound",a.extendEventArgs({},{item:q,dataItem:n}));
if(m._clientTemplate){q._renderedClientTemplate=b.TemplateRenderer.renderTemplate(n,m,q);
}else{if(l){var o=i.get(p);
q._setElement(o);
o._item=q;
}}m._items.push(q);
});
if(!l){this.render();
}},clear:function(){this._activeElement=null;
if(this._enableClientFiltering){this.hideItems();
return;
}var k=this.get_items();
for(var j=0;
j<k.length;
j++){k[j].dispose();
}this._items=[];
this._removeShowAllButton();
a(this.get_itemsContainer()).empty();
},open:function(j){var i=this._dropDown;
this._positionInfo=j;
if(i.isVisible()){i.resolveScreenBoundaries();
i.position();
}else{i.show();
}this.position(j);
},position:function(l){var j=a(this._parent),i=a(this._element),k=this._getDropDownHorizontalOffset(l);
i.css({top:j.offset().top+j.height()+"px",left:k+"px"});
},select:function(){var j=this.get_activeItem(),i=a.extendEventArgs(new Sys.CancelEventArgs(),{item:j});
this.trigger("itemSelecting",i);
if(i.get_cancel()){return;
}this.trigger("itemSelected",a.extendEventArgs({},{item:j}));
return j;
},close:function(){this._dropDown.hide();
},filterItems:function(k,l){var j=true;
var i=function(n,q){var s=this,p=s._maxResultCount,o=s._isCaseSensitive?n.get_text():n.get_text().toLowerCase(),r=o.indexOf(q),m=s._filter===0?r!==-1:r===0;
if(l){s._removeShowAllButton();
}else{s._addShowAllButton();
}if(m){s._matchesCount+=1;
}if(!l&&s._matchesCount>p){m=false;
}if(m===true){a(n._element).show();
if(s._highlightFirstMatch&&j){s.updateActiveItem(s.get_activeItem(),n);
j=false;
}}else{if(m===false){a(n._element).hide();
if(s._activeElement===n._element){s.toggleHighlight(n,false);
}}}};
this._matchesCount=0;
if(!this._isCaseSensitive){k=k.toLowerCase();
}this.process(0,k,i);
},hideItems:function(){var i=function(j){a(j._element).hide();
};
this.process(0,"",i);
},process:function(l,k,i){var m=this,j=this._items;
clearTimeout(this._filterTimer);
this._filterTimer=setTimeout(function(){var n=l,p=j.length,q=new Date().getTime(),o;
while(n<p&&(new Date().getTime()-q)<50){o=j[n];
i.apply(m,[o,k]);
n++;
}if(n<p){m.process(n,k,i);
}},10);
},highlightNext:function(){this.updateActiveItem(this.get_activeItem(),this._getNextItem(1));
},highlightPrev:function(){this.updateActiveItem(this.get_activeItem(),this._getNextItem(-1));
},render:function(){var i=a(this.get_itemsContainer());
a.each(this._items,function(j,k){i.append(k.render());
});
},updateActiveItem:function(j,i){this.toggleHighlight(j,false);
this.toggleHighlight(i,true);
},toggleHighlight:function(i,j){if(i){i.set_highlight(j);
this._activeElement=j?i.get_element():null;
}},_onDropDownOpening:function(j){var i=new Sys.CancelEventArgs();
this.trigger("dropDownOpening",i);
j.set_cancel(i.get_cancel());
},_onDropDownOpened:function(){var i=new Sys.EventArgs();
this._adjustChildListElementHeight();
this.trigger("dropDownOpened",i);
},_onDropDownClosing:function(j){var i=new Sys.CancelEventArgs();
this.trigger("dropDownClosing",i);
j.set_cancel(i.get_cancel());
},_onDropDownClosed:function(){var i=new Sys.EventArgs();
this.toggleHighlight(this.get_activeItem(),false);
this.trigger("dropDownClosed",i);
},_onDropDownReflowing:function(){a(this.get_itemsContainer()).height("");
},_onDropDownReflowed:function(){this.position(this._positionInfo);
this._adjustChildListElementHeight();
},_onCollapseAnimationEnded:function(){this.clear();
a(this.get_itemsContainer()).height("");
},_addShowAllButton:function(){var i=a(this.get_itemsContainer());
if(i.siblings(d+h).length===0){i.after("<div class='"+h+"'><span>"+this._showAllResultsText+"</span></div>");
}this._adjustChildListElementHeight();
},_removeShowAllButton:function(){var i=a(this.get_itemsContainer()),j=i.siblings(d+h);
if(j.length>0){j.remove();
}this._adjustChildListElementHeight();
},_adjustChildListElementHeight:function(){var j=a(this.get_popup());
if(j[0].style.height===""){return;
}var l=j.height(),k=j.find(d+h),i=a(this.get_itemsContainer()),m=k.outerHeight(true),n;
if(l>0){n=l-m;
i.height(n);
}},_onDropDownHover:function(i){var j=this._extractItemFromDomElement(i.target);
this.updateActiveItem(this.get_activeItem(),j);
},_onDropDownOut:function(i){this.toggleHighlight(this.get_activeItem(),false);
},_onDropDownClick:function(j){var k=this._extractItemFromDomElement(j.target);
this.updateActiveItem(this.get_activeItem(),k);
this.select();
var i=a.extendEventArgs(new Sys.EventArgs(),{item:k});
this.trigger("dropDownItemClicked",i);
},_onDropDownMouseUp:function(i){this.trigger("dropDownMouseUp",null);
},_onShowAllClick:function(i){i.preventDefault();
this.trigger("ShowAllClick",i);
},_extractItemFromDomElement:function(i){while(i.nodeType!==9){if(i._item&&a(i).is(d+e)){return i._item;
}i=i.parentNode;
}return null;
},_getDropDownHorizontalOffset:function(q){var j=a(this._parent),i=a(this._element),o=j.offset().left,k=q&&q.automaticPosition,n=k?this._getInputLastDelimiterOffset(q):j.offset().left,p=o+j.width(),l=i.find(d+g).outerWidth(true)||i.width(),r=n+l-p,m=j.find(".racLabel").outerWidth();
o+=m;
if(!k&&m){n+=m;
}if(r>0){n-=r;
}if(n<o+10){n=o;
}return n;
},_getInputLastDelimiterOffset:function(n){var m=this._parent,i=a(m).find(".racInput"),l=i.offset().left;
if(n&&n.simpleTextMode){var k=i.val(),j=7;
k=k.substring(0,k.lastIndexOf(n.delimiter));
l+=this._getTextWidth(k)+j;
}return l;
},_getTextWidth:function(j){var i=a(this._parent).find(".racInput")[0],k=this._createTextSizingDiv(i),l;
document.body.appendChild(k);
k.style.width="0";
k.innerHTML=$telerik.htmlEncode(j);
k.style.width="auto";
l=k.offsetWidth;
document.body.removeChild(k);
return l;
},_createTextSizingDiv:function(n){var o=document.createElement("div"),j=["font-size","font-family","font-weight","font-variant","font-style","text-transform"],k=["fontSize","fontFamily","fontWeight","fontVariant","fontStyle","textTransform"];
o.style.position="absolute";
o.style.display="block";
o.style.visibility="hidden";
if($telerik.getComputedStyle(n,j[0],null)===null){j=k;
}for(var l=0,m=j.length;
l<m;
l++){o.style[k[l]]=$telerik.getComputedStyle(n,j[l],null);
}return o;
},_getNextItem:function(l){var k=a(this.get_itemsContainer()).children("li:visible"),i=a(this._activeElement),j;
if(i.length===0||!i.is(":visible")){j=(l==1)?k.first(":visible"):k.last(":visible");
}else{j=(l==1)?i.nextAll(":visible").first():i.prevAll(":visible").first();
}if(j.length!==0){return j[0]._item;
}return null;
}};
b.RadAutoCompleteBox.DropDown.registerClass("Telerik.Web.UI.RadAutoCompleteBox.DropDown");
})(Telerik.Web.UI,$telerik.$);
(function(b,a){b.RadAutoCompleteBox.DropDownItem=function(c,d){this._text="";
this._value="";
this._template=null;
this._element=null;
this._attributes=null;
this._load(c,d);
};
b.RadAutoCompleteBox.DropDownItem.prototype={_load:function(c,d){if(d){if(typeof(c[d.dataTextField])!="undefined"){this._text=c[d.dataTextField];
}if(typeof(c[d.dataValueField])!="undefined"&&c.Value!==""){this._value=c[d.dataValueField];
}}else{this._text=c.text||c.Text;
this._value=c.value||c.Value;
}if(c.Attributes){this.get_attributes()._load(c.Attributes);
}},_renderBegingTag:function(c){c[c.length]="<li class='racItem";
if(this._renderedClientTemplate){c[c.length]=" racTemplate";
}c[c.length]="'>";
},_renderBody:function(c){if(this._renderedClientTemplate){c[c.length]=this._renderedClientTemplate;
}else{c[c.length]=this.get_text();
}},_renderEndTag:function(c){c[c.length]="</li>";
},_setElement:function(c){this._element=c;
},dispose:function(){this._element._item=null;
this._element=null;
},render:function(){if(!this._element){var c=[];
this._renderBegingTag(c);
this._renderBody(c);
this._renderEndTag(c);
this._element=a(c.join("")).get(0);
}this._element._item=this;
return this._element;
},get_text:function(){return this._text;
},get_value:function(){return this._value;
},get_attributes:function(){if(!this._attributes){this._attributes=new b.AutoCompleteBoxAttributeCollection(this);
}return this._attributes;
},set_highlight:function(c){a(this._element).toggleClass("racItemHovered",c);
},get_element:function(){return this._element;
},ensureVisible:function(c){if(!this._getIsVisible()){this.scrollIntoView(c);
}},_getIsVisible:function(){var d=this.get_element(),e=this._getScrollableElement(),f=d.offsetTop,c=f+d.offsetHeight;
return f>=e.scrollTop&&(c-e.scrollTop)<=e.offsetHeight;
},_getScrollableElement:function(){return this.get_element().parentNode;
},scrollIntoView:function(c){var d=this.get_element(),f=d.offsetTop,e=this._getScrollableElement();
if(c){f+=d.offsetHeight-e.offsetHeight;
}e.scrollTop=f;
},get_clientTemplate:function(){return null;
}};
b.RadAutoCompleteBox.DropDownItem.registerClass("Telerik.Web.UI.RadAutoCompleteBox.DropDownItem");
})(Telerik.Web.UI,$telerik.$);
(function(b,a){Type.registerNamespace("Telerik.Web.UI");
b.AutoCompleteBoxEntryCollection=function(c){this._array=[];
this._owner=c;
};
b.AutoCompleteBoxEntryCollection.prototype={add:function(c){var d=this._owner;
this._add(c);
d._logChanges();
if(!d._isInTokenMode()&&d.get_allowCustomEntry()){d._updateText();
}},clear:function(){var c=this._owner;
this._array=[];
c._logChanges();
a(c.get_element()).find(".racToken, .racTextToken").remove();
if(!c._isInTokenMode()){c._updateText();
}c._toggleEmptyMessage();
},insert:function(d,c){Array.insert(this._array,d,c);
c.set_parent(this._owner);
},remove:function(c){var d=this._owner;
this._remove(c);
d._logChanges();
if(!d._isInTokenMode()&&d.get_allowCustomEntry()){d._updateText();
}d._toggleEmptyMessage();
},get_count:function(){return this._array.length;
},getEntry:function(c){return this._array[c];
},indexOf:function(c){for(var d=0,e=this._array.length;
d<e;
d++){if(this._array[d]===c){return d;
}}return -1;
},forEach:function(e){for(var d=0,c=this.get_count();
d<c;
d++){e(this._array[d]);
}},toArray:function(){return this._array.slice(0);
},_add:function(c){var f=this._owner,d=this._array.length,e=f._isInTokenMode();
if(e&&f._onEntryAdding(c)){f.get_inputElement().value="";
return;
}if(f._isInSingleSelectionMode()){this._array=[];
a(f.get_element()).find(".racTextToken").remove();
d=0;
}this.insert(d,c);
if(e){f._addToken(c);
f._onEntryAdded(c);
}else{if(!f.get_allowCustomEntry()){f._addTextToken(c);
}}},_remove:function(c){var e=this._owner,d=e._isInTokenMode();
if(d&&e._onEntryRemoving(c)){return;
}Array.remove(this._array,c);
c.set_parent(null);
c._control=null;
if(d){e._removeToken(c);
e._onEntryRemoved(c);
}else{if(!e.get_allowCustomEntry()){e._removeTextToken(c);
}}}};
b.AutoCompleteBoxEntryCollection.registerClass("Telerik.Web.UI.AutoCompleteBoxEntryCollection");
})(Telerik.Web.UI,$telerik.$);
(function(b,a){Type.registerNamespace("Telerik.Web.UI");
b.AutoCompleteBoxEntry=function(){b.AutoCompleteBoxEntry.initializeBase(this);
this._parent=null;
this._itemData={};
this._text="";
this._value="";
this._tokenElement=null;
this._attributes=null;
};
b.AutoCompleteBoxEntry.prototype={_initialize:function(c,d){this._loadItemData(c);
this._parent=d;
},_loadItemData:function(c){if(typeof(c.text)!="undefined"){this.set_text(c.text);
}if(typeof(c.value)!="undefined"&&c.value!==""){this.set_value(c.value);
}if(c.attributes){this.get_attributes()._load(c.attributes);
}},_renderToken:function(){var c=[];
c[c.length]="<span class='racToken'>";
c[c.length]=$telerik.htmlEncode(this.get_text());
c[c.length]="<a class='racRemoveTokenLink' title='"+this._parent._removeTokenTitle+"' ></a>";
c[c.length]="</span>";
return c.join("");
},_renderTextToken:function(){var c=[],d=this._parent;
c[c.length]="<span class='racTextToken'>";
c[c.length]=$telerik.htmlEncode(this.get_text());
if(!d._isInSingleSelectionMode()){c[c.length]=d.get_delimiter().charAt(0);
}c[c.length]=" </span>";
return c.join("");
},get_attributes:function(){if(!this._attributes){this._attributes=new b.AutoCompleteBoxAttributeCollection(this);
}return this._attributes;
},_getData:function(){var c={text:this.get_text(),value:this.get_value()};
if(this.get_attributes().get_count()>0){c.attributes=this.get_attributes()._data;
}return c;
},_getHierarchicalIndex:function(){return this.get_index();
},get_index:function(){if(!this.get_parent()){return -1;
}return this.get_parent()._getChildren().indexOf(this);
},_setSelected:function(d){var c=this.get_token();
if(c){a(c).toggleClass("racTokenSelected",d);
}}};
a.registerControlProperties(b.AutoCompleteBoxEntry,{token:null,parent:null,text:"",value:""});
b.AutoCompleteBoxEntry.registerClass("Telerik.Web.UI.AutoCompleteBoxEntry");
})(Telerik.Web.UI,$telerik.$);
