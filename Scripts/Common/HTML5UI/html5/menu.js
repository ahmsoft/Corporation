(function(b,a){a(["./kendo.popup"],b);
})(function(){(function(){(function(a,ag){var A=window.kendo,af=A.ui,c=A._activeElement,ad=(A.support.touch&&A.support.mobileOS),L="mousedown",f="click",r=a.extend,W=a.proxy,o=a.each,Z=A.template,C=A.keys,ak=af.Widget,p=/^(ul|a|div)$/i,Q=".kendoMenu",y="img",R="open",I="k-menu",F="k-link",D="k-last",g="close",ac="timer",s="k-first",x="k-image",Y="select",al="zIndex",b="activate",j="deactivate",T="touchstart"+Q+" MSPointerDown"+Q+" pointerdown"+Q,U=A.support.pointers,O=A.support.msPointers,e=O||U,M=U?"pointerover":(O?"MSPointerOver":"mouseenter"),N=U?"pointerout":(O?"MSPointerOut":"mouseleave"),K=ad||e,n=a(document.documentElement),B="kendoPopup",k="k-state-default",w="k-state-hover",t="k-state-focused",m="k-state-disabled",J=".k-menu",v=".k-menu-group",V=v+",.k-animation-container",d=":not(.k-list) > .k-item",l=".k-item.k-state-disabled",z=".k-item:not(.k-state-disabled)",G=".k-item:not(.k-state-disabled) > .k-link",q=":not(.k-item.k-separator)",P=q+":eq(0)",E=q+":last",ab="> div:not(.k-animation-container,.k-list-container)",ae={"2":1,touch:1},aa={content:Z("<div class='k-content #= groupCssClass() #' tabindex='-1'>#= content(item) #</div>"),group:Z("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:Z("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:Z("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:Z("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:Z("<span class='#= arrowClass(item, group) #'></span>"),sprite:Z("<span class='k-sprite #= spriteCssClass #'></span>"),empty:Z("")},X={wrapperCssClass:function(am,ao){var ap="k-item",an=ao.index;
if(ao.enabled===false){ap+=" k-state-disabled";
}else{ap+=" k-state-default";
}if(am.firstLevel&&an===0){ap+=" k-first";
}if(an==am.length-1){ap+=" k-last";
}if(ao.cssClass){ap+=" "+ao.cssClass;
}return ap;
},textClass:function(){return F;
},textAttributes:function(am){return am.url?" href='"+am.url+"'":"";
},arrowClass:function(an,am){var ao="k-icon";
if(am.horizontal){ao+=" k-i-arrow-s";
}else{ao+=" k-i-arrow-e";
}return ao;
},text:function(am){return am.encoded===false?am.text:A.htmlEncode(am.text);
},tag:function(am){return am.url?"a":"span";
},groupAttributes:function(am){return am.expanded!==true?" style='display:none'":"";
},groupCssClass:function(){return"k-group k-menu-group";
},content:function(am){return am.content?am.content:"&nbsp;";
}};
function u(am,an){am=am.split(" ")[!an+0]||am;
return am.replace("top","up").replace("bottom","down");
}function S(am,aq,ao){am=am.split(" ")[!aq+0]||am;
var ap={origin:["bottom",(ao?"right":"left")],position:["top",(ao?"right":"left")]},an=/left|right/.test(am);
if(an){ap.origin=["top",am];
ap.position[1]=A.directions[am].reverse;
}else{ap.origin[0]=am;
ap.position[0]=A.directions[am].reverse;
}ap.origin=ap.origin.join(" ");
ap.position=ap.position.join(" ");
return ap;
}function h(ao,am){try{return a.contains(ao,am);
}catch(an){return false;
}}function aj(am){am=a(am);
am.addClass("k-item").children(y).addClass(x);
am.children("a").addClass(F).children(y).addClass(x);
am.filter(":not([disabled])").addClass(k);
am.filter(".k-separator:empty").append("&nbsp;");
am.filter("li[disabled]").addClass(m).removeAttr("disabled").attr("aria-disabled",true);
if(!am.filter("[role]").length){am.attr("role","menuitem");
}if(!am.children("."+F).length){am.contents().filter(function(){return(!this.nodeName.match(p)&&!(this.nodeType==3&&!a.trim(this.nodeValue)));
}).wrapAll("<span class='"+F+"'/>");
}ah(am);
ai(am);
}function ah(am){am=a(am);
am.find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove();
am.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var an=a(this),ao=an.parent().parent();
an.append("<span class='k-icon "+(ao.hasClass(I+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>");
});
}function ai(am){am=a(am);
am.filter(".k-first:not(:first-child)").removeClass(s);
am.filter(".k-last:not(:last-child)").removeClass(D);
am.filter(":first-child").addClass(s);
am.filter(":last-child").addClass(D);
}var H=ak.extend({init:function(am,an){var ao=this;
ak.fn.init.call(ao,am,an);
am=ao.wrapper=ao.element;
an=ao.options;
ao._initData(an);
ao._updateClasses();
ao._animations(an);
ao.nextItemZIndex=100;
ao._tabindex();
ao._focusProxy=W(ao._focusHandler,ao);
am.on(T,z,ao._focusProxy).on(f+Q,l,false).on(f+Q,z,W(ao._click,ao)).on("keydown"+Q,W(ao._keydown,ao)).on("focus"+Q,W(ao._focus,ao)).on("focus"+Q,".k-content",W(ao._focus,ao)).on(T+" "+L+Q,".k-content",W(ao._preventClose,ao)).on("blur"+Q,W(ao._removeHoverItem,ao)).on("blur"+Q,"[tabindex]",W(ao._checkActiveElement,ao)).on(M+Q,z,W(ao._mouseenter,ao)).on(N+Q,z,W(ao._mouseleave,ao)).on(M+Q+" "+N+Q+" "+L+Q+" "+f+Q,G,W(ao._toggleHover,ao));
if(an.openOnClick){ao.clicked=false;
ao._documentClickHandler=W(ao._documentClick,ao);
a(document).click(ao._documentClickHandler);
}am.attr("role","menubar");
if(am[0].id){ao._ariaId=A.format("{0}_mn_active",am[0].id);
}A.notify(ao);
},events:[R,g,b,j,Y],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:false,closeOnClick:true,hoverDelay:100,popupCollision:ag},_initData:function(am){var an=this;
if(am.dataSource){an.angular("cleanup",function(){return{elements:an.element.children()};
});
an.element.empty();
an.append(am.dataSource,an.element);
an.angular("compile",function(){return{elements:an.element.children()};
});
}},setOptions:function(an){var am=this.options.animation;
this._animations(an);
an.animation=r(true,am,an.animation);
if("dataSource" in an){this._initData(an);
}this._updateClasses();
ak.fn.setOptions.call(this,an);
},destroy:function(){var am=this;
ak.fn.destroy.call(am);
am.element.off(Q);
if(am._documentClickHandler){a(document).unbind("click",am._documentClickHandler);
}A.destroy(am.element);
},enable:function(am,an){this._toggleDisabled(am,an!==false);
return this;
},disable:function(am){this._toggleDisabled(am,false);
return this;
},append:function(an,ao){ao=this.element.find(ao);
var am=this._insert(an,ao,ao.length?ao.find("> .k-menu-group, > .k-animation-container > .k-menu-group"):null);
o(am.items,function(){am.group.append(this);
ah(this);
});
ah(ao);
ai(am.group.find(".k-first, .k-last").add(am.items));
return this;
},insertBefore:function(an,ao){ao=this.element.find(ao);
var am=this._insert(an,ao,ao.parent());
o(am.items,function(){ao.before(this);
ah(this);
ai(this);
});
ai(ao);
return this;
},insertAfter:function(an,ao){ao=this.element.find(ao);
var am=this._insert(an,ao,ao.parent());
o(am.items,function(){ao.after(this);
ah(this);
ai(this);
});
ai(ao);
return this;
},_insert:function(ao,at,aq){var au=this,ap,an;
if(!at||!at.length){aq=au.element;
}var ar=a.isPlainObject(ao),am={firstLevel:aq.hasClass(I),horizontal:aq.hasClass(I+"-horizontal"),expanded:true,length:aq.children().length};
if(at&&!aq.length){aq=a(H.renderGroup({group:am})).appendTo(at);
}if(ar||a.isArray(ao)){ap=a(a.map(ar?[ao]:ao,function(aw,av){if(typeof aw==="string"){return a(aw).get();
}else{return a(H.renderItem({group:am,item:r(aw,{index:av})})).get();
}}));
}else{if(typeof ao=="string"&&ao.charAt(0)!="<"){ap=au.element.find(ao);
}else{ap=a(ao);
}an=ap.find("> ul").addClass("k-menu-group").attr("role","menu");
ap=ap.filter("li");
ap.add(an.find("> li")).each(function(){aj(this);
});
}return{items:ap,group:aq};
},remove:function(an){an=this.element.find(an);
var aq=this,ap=an.parentsUntil(aq.element,d),ao=an.parent("ul:not(.k-menu)");
an.remove();
if(ao&&!ao.children(d).length){var am=ao.parent(".k-animation-container");
if(am.length){am.remove();
}else{ao.remove();
}}if(ap.length){ap=ap.eq(0);
ah(ap);
ai(ap);
}return aq;
},open:function(an){var ar=this,aq=ar.options,ao=aq.orientation=="horizontal",am=aq.direction,ap=A.support.isRtl(ar.wrapper);
an=ar.element.find(an);
if(/^(top|bottom|default)$/.test(am)){if(ap){am=ao?(am+" left").replace("default","bottom"):"left";
}else{am=ao?(am+" right").replace("default","bottom"):"right";
}}an.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var at=a(this).data("kendoPopup");
if(at){at.close();
}});
an.each(function(){var at=a(this);
clearTimeout(at.data(ac));
at.data(ac,setTimeout(function(){var aB=at.find(".k-menu-group:first:hidden"),ay;
if(aB[0]&&ar._triggerEvent({item:at[0],type:R})===false){if(!aB.find(".k-menu-group")[0]&&aB.children(".k-item").length>1){var aC=a(window).height(),aA=function(){aB.css({maxHeight:aC-(aB.outerHeight()-aB.height())-A.getShadows(aB).bottom,overflow:"auto"});
};
if(A.support.browser.msie&&A.support.browser.version<=7){setTimeout(aA,0);
}else{aA();
}}else{aB.css({maxHeight:"",overflow:""});
}at.data(al,at.css(al));
at.css(al,ar.nextItemZIndex++);
ay=aB.data(B);
var az=at.parent().hasClass(I),ax=az&&ao,au=S(am,az,ap),av=aq.animation.open.effects,aw=av!==ag?av:"slideIn:"+u(am,az);
if(!ay){ay=aB.kendoPopup({activate:function(){ar._triggerEvent({item:this.wrapper.parent(),type:b});
},deactivate:function(aD){aD.sender.element.removeData("targetTransform").css({opacity:""});
ar._triggerEvent({item:this.wrapper.parent(),type:j});
},origin:au.origin,position:au.position,collision:aq.popupCollision!==ag?aq.popupCollision:(ax?"fit":"fit flip"),anchor:at,appendTo:at,animation:{open:r(true,{effects:aw},aq.animation.open),close:aq.animation.close},close:function(aD){var aE=aD.sender.wrapper.parent();
if(!ar._triggerEvent({item:aE[0],type:g})){aE.css(al,aE.data(al));
aE.removeData(al);
if(ad){aE.removeClass(w);
ar._removeHoverItem();
}}else{aD.preventDefault();
}}}).data(B);
}else{ay=aB.data(B);
ay.options.origin=au.origin;
ay.options.position=au.position;
ay.options.animation.open.effects=aw;
}aB.removeAttr("aria-hidden");
ay.open();
}},ar.options.hoverDelay));
});
return ar;
},close:function(ao,am){var ap=this,an=ap.element;
ao=an.find(ao);
if(!ao.length){ao=an.find(">.k-item");
}ao.each(function(){var aq=a(this);
if(!am&&ap._isRootItem(aq)){ap.clicked=false;
}clearTimeout(aq.data(ac));
aq.data(ac,setTimeout(function(){var ar=aq.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(B);
if(ar){ar.close();
ar.element.attr("aria-hidden",true);
}},ap.options.hoverDelay));
});
return ap;
},_toggleDisabled:function(an,am){this.element.find(an).each(function(){a(this).toggleClass(k,am).toggleClass(m,!am).attr("aria-disabled",!am);
});
},_toggleHover:function(am){var ao=a(A.eventTarget(am)||am.target).closest(d),an=am.type==M||L.indexOf(am.type)!==-1;
if(!ao.parents("li."+m).length){ao.toggleClass(w,an||am.type=="mousedown"||am.type=="click");
}this._removeHoverItem();
},_preventClose:function(){if(!this.options.closeOnClick){this._closurePrevented=true;
}},_checkActiveElement:function(am){var ap=this,an=a(am?am.currentTarget:this._hoverItem()),ao=ap._findRootParent(an)[0];
if(!this._closurePrevented){setTimeout(function(){if(!document.hasFocus()||(!h(ao,A._activeElement())&&am&&!h(ao,am.currentTarget))){ap.close(ao);
}},0);
}this._closurePrevented=false;
},_removeHoverItem:function(){var am=this._hoverItem();
if(am&&am.hasClass(t)){am.removeClass(t);
this._oldHoverItem=null;
}},_updateClasses:function(){var am=this.element,ao=".k-menu-init div ul",an;
am.removeClass("k-menu-horizontal k-menu-vertical");
am.addClass("k-widget k-reset k-header k-menu-init "+I).addClass(I+"-"+this.options.orientation);
am.find("li > ul").filter(function(){return !A.support.matchesSelector.call(this,ao);
}).addClass("k-group k-menu-group").attr("role","menu").attr("aria-hidden",am.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1");
an=am.find("> li,.k-menu-group > li");
am.removeClass("k-menu-init");
an.each(function(){aj(this);
});
},_mouseenter:function(am){var ap=this,an=a(am.currentTarget),ao=(an.children(".k-animation-container").length||an.children(v).length);
if(am.delegateTarget!=an.parents(J)[0]){return;
}if((!ap.options.openOnClick||ap.clicked)&&!ad&&!((U||O)&&am.originalEvent.pointerType in ae&&ap._isRootItem(an.closest(d)))){if(!h(am.currentTarget,am.relatedTarget)&&ao){ap.open(an);
}}if(ap.options.openOnClick&&ap.clicked||K){an.siblings().each(W(function(aq,ar){ap.close(ar,true);
},ap));
}},_mouseleave:function(am){var ap=this,an=a(am.currentTarget),ao=(an.children(".k-animation-container").length||an.children(v).length);
if(an.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]){am.stopImmediatePropagation();
return;
}if(!ap.options.openOnClick&&!ad&&!((U||O)&&am.originalEvent.pointerType in ae)&&!h(am.currentTarget,am.relatedTarget||am.target)&&ao&&!h(am.currentTarget,A._activeElement())){ap.close(an);
}},_click:function(ao){var aE=this,ay,az=aE.options,aC=a(A.eventTarget(ao)),ax=aC[0]?aC[0].nodeName.toUpperCase():"",aq=(ax=="INPUT"||ax=="SELECT"||ax=="BUTTON"||ax=="LABEL"),aw=aC.closest("."+F),ap=aC.closest(d),ar=aw.attr("href"),am,an,aD=aC.attr("href"),aA=a("<a href='#' />").attr("href"),at=(!!ar&&ar!==aA),au=at&&!!ar.match(/^#/),av=(!!aD&&aD!==aA),aB=(az.openOnClick&&an&&aE._isRootItem(ap));
if(aC.closest(ab,ap[0]).length){return;
}if(ap.hasClass(m)){ao.preventDefault();
return;
}if(!ao.handled&&aE._triggerEvent({item:ap[0],type:Y})&&!aq){ao.preventDefault();
}ao.handled=true;
am=ap.children(V);
an=am.is(":visible");
if(az.closeOnClick&&(!at||au)&&(!am.length||aB)){ap.removeClass(w).css("height");
aE._oldHoverItem=aE._findRootParent(ap);
aE.close(aw.parentsUntil(aE.element,d));
aE.clicked=false;
if("MSPointerUp".indexOf(ao.type)!=-1){ao.preventDefault();
}return;
}if(at&&ao.enterKey){aw[0].click();
}if((!aE._isRootItem(ap)||!az.openOnClick)&&!A.support.touch&&!((U||O)&&aE._isRootItem(ap.closest(d)))){return;
}if(!at&&!aq&&!av){ao.preventDefault();
}aE.clicked=true;
ay=am.is(":visible")?g:R;
if(!az.closeOnClick&&ay==g){return;
}aE[ay](ap);
},_documentClick:function(am){if(h(this.element[0],am.target)){return;
}this.clicked=false;
},_focus:function(an){var aq=this,ap=an.target,ao=aq._hoverItem(),am=c();
if(ap!=aq.wrapper[0]&&!a(ap).is(":kendoFocusable")){an.stopPropagation();
a(ap).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass(t);
aq.wrapper.focus();
return;
}if(am===an.currentTarget){if(ao.length){aq._moveHover([],ao);
}else{if(!aq._oldHoverItem){aq._moveHover([],aq.wrapper.children().first());
}}}},_keydown:function(an){var au=this,ar=an.keyCode,ap=au._oldHoverItem,at,am,ao,aq=A.support.isRtl(au.wrapper);
if(an.target!=an.currentTarget&&ar!=C.ESC){return;
}if(!ap){ap=au._oldHoverItem=au._hoverItem();
}am=au._itemBelongsToVertival(ap);
ao=au._itemHasChildren(ap);
if(ar==C.RIGHT){at=au[aq?"_itemLeft":"_itemRight"](ap,am,ao);
}else{if(ar==C.LEFT){at=au[aq?"_itemRight":"_itemLeft"](ap,am,ao);
}else{if(ar==C.DOWN){at=au._itemDown(ap,am,ao);
}else{if(ar==C.UP){at=au._itemUp(ap,am,ao);
}else{if(ar==C.ESC){at=au._itemEsc(ap,am);
}else{if(ar==C.ENTER||ar==C.SPACEBAR){at=ap.children(".k-link");
if(at.length>0){au._click({target:at[0],preventDefault:function(){},enterKey:true});
au._moveHover(ap,au._findRootParent(ap));
}}else{if(ar==C.TAB){at=au._findRootParent(ap);
au._moveHover(ap,at);
au._checkActiveElement();
return;
}}}}}}}if(at&&at[0]){an.preventDefault();
an.stopPropagation();
}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible");
},_itemBelongsToVertival:function(am){var an=this.wrapper.hasClass("k-menu-vertical");
if(!am.length){return an;
}return am.parent().hasClass("k-menu-group")||an;
},_itemHasChildren:function(am){if(!am.length){return false;
}return am.children("ul.k-menu-group, div.k-animation-container").length>0;
},_moveHover:function(an,ao){var ap=this,am=ap._ariaId;
if(an.length&&ao.length){an.removeClass(t);
}if(ao.length){if(ao[0].id){am=ao[0].id;
}ao.addClass(t);
ap._oldHoverItem=ao;
if(am){ap.element.removeAttr("aria-activedescendant");
a("#"+am).removeAttr("id");
ao.attr("id",am);
ap.element.attr("aria-activedescendant",am);
}}},_findRootParent:function(am){if(this._isRootItem(am)){return am;
}else{return am.parentsUntil(J,"li.k-item").last();
}},_isRootItem:function(am){return am.parent().hasClass(I);
},_itemRight:function(ao,am,an){var ar=this,ap,aq;
if(ao.hasClass(m)){return;
}if(!am){ap=ao.nextAll(P);
if(!ap.length){ap=ao.prevAll(E);
}}else{if(an){ar.open(ao);
ap=ao.find(".k-menu-group").children().first();
}else{if(ar.options.orientation=="horizontal"){aq=ar._findRootParent(ao);
ar.close(aq);
ap=aq.nextAll(P);
}}}if(ap&&!ap.length){ap=ar.wrapper.children(".k-item").first();
}else{if(!ap){ap=[];
}}ar._moveHover(ao,ap);
return ap;
},_itemLeft:function(an,am){var ap=this,ao;
if(!am){ao=an.prevAll(P);
if(!ao.length){ao=an.nextAll(E);
}}else{ao=an.parent().closest(".k-item");
ap.close(ao);
if(ap._isRootItem(ao)&&ap.options.orientation=="horizontal"){ao=ao.prevAll(P);
}}if(!ao.length){ao=ap.wrapper.children(".k-item").last();
}ap._moveHover(an,ao);
return ao;
},_itemDown:function(ao,am,an){var aq=this,ap;
if(!am){if(!an||ao.hasClass(m)){return;
}else{aq.open(ao);
ap=ao.find(".k-menu-group").children().first();
}}else{ap=ao.nextAll(P);
}if(!ap.length&&ao.length){ap=ao.parent().children().first();
}else{if(!ao.length){ap=aq.wrapper.children(".k-item").first();
}}aq._moveHover(ao,ap);
return ap;
},_itemUp:function(an,am){var ap=this,ao;
if(!am){return;
}else{ao=an.prevAll(P);
}if(!ao.length&&an.length){ao=an.parent().children().last();
}else{if(!an.length){ao=ap.wrapper.children(".k-item").last();
}}ap._moveHover(an,ao);
return ao;
},_itemEsc:function(an,am){var ap=this,ao;
if(!am){return an;
}else{ao=an.parent().closest(".k-item");
ap.close(ao);
ap._moveHover(an,ao);
}return ao;
},_triggerEvent:function(am){var an=this;
return an.trigger(am.type,{type:am.type,item:am.item});
},_focusHandler:function(am){var ao=this,an=a(A.eventTarget(am)).closest(d);
setTimeout(function(){ao._moveHover([],an);
if(an.children(".k-content")[0]){an.parent().closest(".k-item").removeClass(t);
}},200);
},_animations:function(am){if(am&&("animation" in am)&&!am.animation){am.animation={open:{effects:{}},close:{hide:true,effects:{}}};
}}});
r(H,{renderItem:function(ao){ao=r({menu:{},group:{}},ao);
var am=aa.empty,an=ao.item;
return aa.item(r(ao,{image:an.imageUrl?aa.image:am,sprite:an.spriteCssClass?aa.sprite:am,itemWrapper:aa.itemWrapper,renderContent:H.renderContent,arrow:an.items||an.content?aa.arrow:am,subGroup:H.renderGroup},X));
},renderGroup:function(am){return aa.group(r({renderItems:function(at){var ao="",ap=0,aq=at.items,ar=aq?aq.length:0,an=r({length:ar},at.group);
for(;
ap<ar;
ap++){ao+=H.renderItem(r(at,{group:an,item:r({index:ap},aq[ap])}));
}return ao;
}},am,X));
},renderContent:function(am){return aa.content(r(am,X));
}});
var i=H.extend({init:function(am,an){var ao=this;
H.fn.init.call(ao,am,an);
ao.target=a(ao.options.target);
ao._popup();
ao._wire();
},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:false,target:"body"},events:[R,g,b,j,Y],setOptions:function(am){var an=this;
H.fn.setOptions.call(an,am);
an.target.off(an.showOn+Q,an._showProxy);
if(an.userEvents){an.userEvents.destroy();
}an.target=a(an.options.target);
if(am.orientation&&an.popup.wrapper[0]){an.popup.element.unwrap();
}an._wire();
H.fn.setOptions.call(this,am);
},destroy:function(){var am=this;
am.target.off(am.options.showOn+Q);
n.off(A.support.mousedown+Q,am._closeProxy);
if(am.userEvents){am.userEvents.destroy();
}H.fn.destroy.call(am);
},open:function(an,ao){var am=this;
an=a(an)[0];
if(h(am.element[0],a(an)[0])){H.fn.open.call(am,an);
}else{if(am._triggerEvent({item:am.element,type:R})===false){if(am.popup.visible()&&am.options.filter){am.popup.close(true);
}if(ao!==ag){am.popup.wrapper.hide();
am.popup.open(an,ao);
}else{am.popup.options.anchor=(an?an:am.popup.anchor)||am.target;
am.popup.open();
}n.off(am.popup.downEvent,am.popup._mousedownProxy);
n.on(A.support.mousedown+Q,am._closeProxy);
}}return am;
},close:function(){var am=this;
if(h(am.element[0],a(arguments[0])[0])){H.fn.close.call(am,arguments[0]);
}else{if(am.popup.visible()){if(am._triggerEvent({item:am.element,type:g})===false){am.popup.close();
n.off(A.support.mousedown+Q,am._closeProxy);
am.unbind(Y,am._closeTimeoutProxy);
}}}},_showHandler:function(am){var an=am,ao,aq=this,ap=aq.options;
if(am.event){an=am.event;
an.pageX=am.x.location;
an.pageY=am.y.location;
}if(h(aq.element[0],am.relatedTarget||am.target)){return;
}aq._eventOrigin=an;
an.preventDefault();
an.stopImmediatePropagation();
aq.element.find("."+t).removeClass(t);
if((ap.filter&&A.support.matchesSelector.call(an.currentTarget,ap.filter))||!ap.filter){if(ap.alignToAnchor){aq.open(an.currentTarget);
}else{aq.popup.options.anchor=an.currentTarget;
if(aq._targetChild){ao=aq.target.offset();
aq.open(an.pageX-ao.left,an.pageY-ao.top);
}else{aq.open(an.pageX,an.pageY);
}}}},_closeHandler:function(ao){var at=this,ar=a(ao.relatedTarget||ao.target),aq=ar.closest(at.target.selector)[0]==at.target[0],am=ar.closest(z).children(V),an=h(at.element[0],ar[0]);
at._eventOrigin=ao;
var ap=ao.which!==3;
if(at.popup.visible()&&((ap&&aq)||!aq)&&((at.options.closeOnClick&&!am[0]&&an)||!an)){if(an){this.unbind(Y,this._closeTimeoutProxy);
at.bind(Y,at._closeTimeoutProxy);
}else{at.close();
}}},_wire:function(){var ao=this,am=ao.options,an=ao.target;
ao._showProxy=W(ao._showHandler,ao);
ao._closeProxy=W(ao._closeHandler,ao);
ao._closeTimeoutProxy=W(ao.close,ao);
if(an[0]){if(A.support.mobileOS&&am.showOn=="contextmenu"){ao.userEvents=new A.UserEvents(an,{filter:am.filter,allowSelection:false});
an.on(am.showOn+Q,false);
ao.userEvents.bind("hold",ao._showProxy);
}else{if(am.filter){an.on(am.showOn+Q,am.filter,ao._showProxy);
}else{an.on(am.showOn+Q,ao._showProxy);
}}}},_triggerEvent:function(an){var ap=this,am=a(ap.popup.options.anchor)[0],ao=ap._eventOrigin;
ap._eventOrigin=ag;
return ap.trigger(an.type,r({type:an.type,item:an.item||this.element[0],target:am},ao?{event:ao}:{}));
},_popup:function(){var am=this;
am._triggerProxy=W(am._triggerEvent,am);
am.popup=am.element.addClass("k-context-menu").kendoPopup({anchor:am.target||"body",copyAnchorStyles:am.options.copyAnchorStyles,collision:am.options.popupCollision||"fit",animation:am.options.animation,activate:am._triggerProxy,deactivate:am._triggerProxy}).data("kendoPopup");
am._targetChild=h(am.target[0],am.popup.element[0]);
}});
af.plugin(H);
af.plugin(i);
})(window.kendo.jQuery);
})();
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b){b();
});
