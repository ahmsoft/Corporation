(function(b,a){a(["./kendo.data","./kendo.columnsorter","./kendo.editable","./kendo.window","./kendo.filtermenu","./kendo.columnmenu","./kendo.groupable","./kendo.pager","./kendo.selectable","./kendo.sortable","./kendo.reorderable","./kendo.resizable","./kendo.mobile.actionsheet","./kendo.mobile.pane","./kendo.ooxml","./kendo.excel","./kendo.progressbar","./kendo.pdf"],b);
})(function(){(function(){(function(a,bj){var az=window.kendo,bi=az.ui,E=az.data.DataSource,bf=az.support.tbodyInnerHtml,b=az._activeElement,bt=bi.Widget,aA=az.keys,aw=a.isPlainObject,O=a.extend,aE=a.map,ac=a.grep,ao=a.isArray,an=a.inArray,aW=Array.prototype.push,aV=a.proxy,ar=az.isFunction,aq=a.isEmptyObject,aG=Math,aU="progress",N="error",C=":not(.k-group-cell):not(.k-hierarchy-cell):visible",a5="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",aK="tr:not(.k-footer-template):visible",aJ=":not(.k-group-cell):not(.k-hierarchy-cell):visible",T=aK+":first>"+aJ+":first",aj="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",aS=".kendoGrid",L="edit",a2="save",aX="remove",K="detailInit",P="filterMenuInit",o="columnMenuInit",j="change",m="columnHide",u="columnShow",a3="saveChanges",D="dataBound",J="detailExpand",I="detailCollapse",W="k-state-focused",a4="k-state-selected",aO="k-grid-norecords",t="columnResize",s="columnReorder",n="columnLock",w="columnUnlock",l="click",ak="height",bc="tabIndex",aa="function",a9="string",G="Are you sure you want to delete this record?",aN="No records available.",z="Delete",i="Cancel",Z=/(\}|\#)/ig,bg=/#/ig,bs="[\\x20\\t\\r\\n\\f]",aL=new RegExp("(^|"+bs+")(k-group-cell|k-hierarchy-cell)("+bs+"|$)"),Q=new RegExp("(^|"+bs+")(k-filter-row)("+bs+"|$)"),y='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',ax=false,h=az.support.browser,at=h.msie&&h.version==7,au=h.msie&&h.version==8;
var bn=bt.extend({init:function(bu,bv){var bw=this;
bt.fn.init.call(bw,bu,bv);
bw._refreshHandler=aV(bw.refresh,bw);
bw.setDataSource(bv.dataSource);
bw.wrap();
},setDataSource:function(bu){var bv=this;
if(bv.dataSource){bv.dataSource.unbind(j,bv._refreshHandler);
}bv.dataSource=bu;
bv.dataSource.bind(j,bv._refreshHandler);
},options:{name:"VirtualScrollable",itemHeight:a.noop,prefetch:true},destroy:function(){var bu=this;
bt.fn.destroy.call(bu);
bu.dataSource.unbind(j,bu._refreshHandler);
bu.wrapper.add(bu.verticalScrollbar).off(aS);
if(bu.drag){bu.drag.destroy();
bu.drag=null;
}bu.wrapper=bu.element=bu.verticalScrollbar=null;
bu._refreshHandler=null;
},wrap:function(){var bw=this,bv=az.support.scrollbar()+1,bu=bw.element,bx;
bu.css({width:"auto",overflow:"hidden"}).css((ax?"padding-left":"padding-right"),bv);
bw.content=bu.children().first();
bx=bw.wrapper=bw.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+aS+" mousewheel"+aS,aV(bw._wheelScroll,bw));
if(az.support.kineticScrollNeeded){bw.drag=new az.UserEvents(bw.wrapper,{global:true,start:function(by){by.sender.capture();
},move:function(by){bw.verticalScrollbar.scrollTop(bw.verticalScrollbar.scrollTop()-by.y.delta);
bx.scrollLeft(bx.scrollLeft()-by.x.delta);
by.preventDefault();
}});
}bw.verticalScrollbar=a('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:bv}).appendTo(bu).bind("scroll"+aS,aV(bw._scroll,bw));
},_wheelScroll:function(bv){if(bv.ctrlKey){return;
}var bw=this.verticalScrollbar,bx=bw.scrollTop(),bu=az.wheelDeltaY(bv);
if(bu&&!(bu>0&&bx===0)&&!(bu<0&&bx+bw[0].clientHeight==bw[0].scrollHeight)){bv.preventDefault();
a(bv.currentTarget).one("wheel"+aS,false);
this.verticalScrollbar.scrollTop(bx+(-bu));
}},_scroll:function(bw){var bF=this,bv=!bF.options.prefetch,bC=bw.currentTarget.scrollTop,bu=bF.dataSource,bB=bF.itemHeight,bD=bu.skip()||0,bE=bF._rangeStart||bD,by=bF.element.innerHeight(),bz=!!(bF._scrollbarTop&&bF._scrollbarTop>bC),bx=aG.max(aG.floor(bC/bB),0),bA=aG.max(bx+aG.floor(by/bB),0);
bF._scrollTop=bC-(bE*bB);
bF._scrollbarTop=bC;
bF._scrolling=bv;
if(!bF._fetch(bx,bA,bz)){bF.wrapper[0].scrollTop=bF._scrollTop;
}if(bv){if(bF._scrollingTimeout){clearTimeout(bF._scrollingTimeout);
}bF._scrollingTimeout=setTimeout(function(){bF._scrolling=false;
bF._page(bF._rangeStart,bF.dataSource.take());
},100);
}},itemIndex:function(bv){var bu=this._rangeStart||this.dataSource.skip()||0;
return bu+bv;
},position:function(bu){var bw=this._rangeStart||this.dataSource.skip()||0;
var bv=this.dataSource.pageSize();
var bx;
if(bu>bw){bx=bu-bw+1;
}else{bx=bw-bu-1;
}return bx>bv?bv:bx;
},scrollIntoView:function(bz){var bu=this.wrapper[0];
var bv=bu.clientHeight;
var bw=this._scrollTop||bu.scrollTop;
var by=bz[0].offsetTop;
var bx=bz[0].offsetHeight;
if(bw>by){this.verticalScrollbar[0].scrollTop-=bv/2;
}else{if(by+bx>=bw+bv){this.verticalScrollbar[0].scrollTop+=bv/2;
}}},_fetch:function(bx,bz,bC){var bE=this,bv=bE.dataSource,by=bE.itemHeight,bD=bv.take(),bB=bE._rangeStart||bv.skip()||0,bu=aG.floor(bx/bD)*bD,bw=false,bA=0.33;
if(bx<bB){bw=true;
bB=aG.max(0,bz-bD);
bE._scrollTop=(bx-bB)*by;
bE._page(bB,bD);
}else{if(bz>=bB+bD&&!bC){bw=true;
bB=bx;
bE._scrollTop=by;
bE._page(bB,bD);
}else{if(!bE._fetching&&bE.options.prefetch){if(bx<(bu+bD)-bD*bA&&bx>bD){bv.prefetch(bu-bD,bD,a.noop);
}if(bz>bu+bD*bA){bv.prefetch(bu+bD,bD,a.noop);
}}}}return bw;
},fetching:function(){return this._fetching;
},_page:function(bw,bx){var by=this,bv=!by.options.prefetch,bu=by.dataSource;
clearTimeout(by._timeout);
by._fetching=true;
by._rangeStart=bw;
if(bu.inRange(bw,bx)){bu.range(bw,bx);
}else{if(!bv){az.ui.progress(by.wrapper.parent(),true);
}by._timeout=setTimeout(function(){if(!by._scrolling){if(bv){az.ui.progress(by.wrapper.parent(),true);
}bu.range(bw,bx);
}},100);
}},repaintScrollbar:function(){var bB=this,bw="",bz=250000,bv=bB.dataSource,bA=!az.support.kineticScrollNeeded?az.support.scrollbar():0,bD=bB.wrapper[0],bC,bx,by;
by=bB.itemHeight=bB.options.itemHeight()||0;
var bu=(bD.scrollWidth>bD.offsetWidth)?bA:0;
bC=bv.total()*by+bu;
for(bx=0;
bx<aG.floor(bC/bz);
bx++){bw+='<div style="width:1px;height:'+bz+'px"></div>';
}if(bC%bz){bw+='<div style="width:1px;height:'+(bC%bz)+'px"></div>';
}bB.verticalScrollbar.html(bw);
bD.scrollTop=bB._scrollTop;
},refresh:function(){var bw=this,bu=bw.dataSource,bv=bw._rangeStart;
az.ui.progress(bw.wrapper.parent(),false);
clearTimeout(bw._timeout);
bw.repaintScrollbar();
if(bw.drag){bw.drag.cancel();
}if(bv&&!bw._fetching){bw._rangeStart=bu.skip();
if(bu.page()===1){bw.verticalScrollbar[0].scrollTop=0;
}}bw._fetching=false;
}});
function ae(bu){return new Array(bu+1).join('<td class="k-group-cell">&nbsp;</td>');
}function ba(bv){var bu,bw=" ";
if(bv){if(typeof bv===a9){return bv;
}for(bu in bv){bw+=bu+'="'+bv[bu]+'"';
}}return bw;
}var F={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}};
function B(bu,bv){a("th, th .k-grid-filter, th .k-link",bu).add(document.body).css("cursor",bv);
}function a1(by,bz,bw,bu,bv){var bA=bz;
bz=a();
bv=bv||1;
for(var bx=0;
bx<bv;
bx++){bz=bz.add(by.eq(bA+bx));
}if(typeof bw=="number"){bz[bu?"insertBefore":"insertAfter"](by.eq(bw));
}else{bz.appendTo(bw);
}}function M(bw,bu,bv){return a(bw).add(bu).find(bv);
}function g(by,bx,bw){var bz,bA,bu,bv;
bw=!ao(bw)?[bw]:bw;
for(bz=0,bA=bw.length;
bz<bA;
bz++){bu=bw[bz];
if(aw(bu)&&bu.click){bv=bu.name||bu.text;
bx.on(l+aS,"a.k-grid-"+(bv||"").replace(/\s/g,""),{commandName:bv},aV(bu.click,by));
}}}function aQ(bu,bv,bw){return aE(bu,function(bx){bx=typeof bx===a9?{field:bx}:bx;
var by;
if(!ay(bx)||bw){bx.attributes=c(bx.attributes);
bx.footerAttributes=c(bx.footerAttributes);
bx.headerAttributes=c(bx.headerAttributes);
by=true;
}if(bx.columns){bx.columns=aQ(bx.columns,bv,by);
}var bz=az.guid();
bx.headerAttributes=O({id:bz},bx.headerAttributes);
return O({encoded:bv,hidden:by},bx);
});
}function p(bu,bv){var bw=[];
q(bu,bv,bw);
return bw[bw.length-1];
}function q(bu,bv,by){by=by||[];
for(var bw=0;
bw<bv.length;
bw++){if(bu===bv[bw]){return true;
}else{if(bv[bw].columns){var bx=by.length;
by.push(bv[bw]);
if(!q(bu,bv[bw].columns,by)){by.splice(bx,by.length-bx);
}else{return true;
}}}}return false;
}function a7(bu,bw){var bv=bw?aZ:c;
bu.hidden=!bw;
bu.attributes=bv(bu.attributes);
bu.footerAttributes=bv(bu.footerAttributes);
bu.headerAttributes=bv(bu.headerAttributes);
}function ap(){return this.style.display!=="none";
}function ay(bu){return bo([bu]).length>0;
}function bo(bu){return ac(bu,function(bv){var bw=!bv.hidden;
if(bw&&bv.columns){bw=bo(bv.columns).length>0;
}return bw;
});
}function bh(bu){return a(bu).map(function(){return this.toArray();
});
}function bl(bu,bv,bz){var bw=H(aD(bv));
var bx=H(aM(bv));
var by=bu.rowSpan;
if(bz){if(bw>bx){bu.rowSpan=(by-(bw-bx))||1;
}else{bu.rowSpan=by+(bx-bw);
}}else{if(bw>bx){bu.rowSpan=by+(bw-bx);
}else{bu.rowSpan=(by-(bx-bw))||1;
}}}function aI(bB,bD,bz,bu,bv,bw,by){var bC=H(bB);
var bE=H([bD]);
if(bC>bE){var bx=new Array(by+1).join('<th class="k-group-cell k-header">&nbsp;</th>');
var bA=bw.children(":not(.k-filter-row)");
a(new Array((bC-bE)+1).join("<tr>"+bx+"</tr>")).insertAfter(bA.last());
}d(bw,bC-bE);
aH(bz,bu,bv,bw);
}function bk(bE,bx,bB){bB=bB||0;
var bC;
var bv;
var bu=bx;
bx=aB(bx);
var bw={};
var bD=bE.find(">tr:not(.k-filter-row)");
var by=function(){var bF=a(this);
return !bF.hasClass("k-group-cell")&&!bF.hasClass("k-hierarchy-cell");
};
for(var bz=0,bA=bx.length;
bz<bA;
bz++){bC=r(bx[bz],bu);
if(!bw[bC.row]){bw[bC.row]=bD.eq(bC.row).find(".k-header").filter(by);
}bv=bw[bC.row].eq(bC.cell);
bv.attr(az.attr("index"),bB+bz);
}return bx.length;
}function H(bu){var bx=1;
var bw=0;
for(var bv=0;
bv<bu.length;
bv++){if(bu[bv].columns){var by=H(bu[bv].columns);
if(by>bw){bw=by;
}}}return bx+bw;
}function aH(bz,bv,bw,bx){var bB=x(bz[0],bv);
var bD=bw.find(">tr:not(.k-filter-row):eq("+bB.row+")>th.k-header");
var bC=a();
var bA=bB.cell;
var by;
for(by=0;
by<bz.length;
by++){bC=bC.add(bD.eq(bA+by));
}bx.find(">tr:not(.k-filter-row)").eq(bB.row).append(bC);
var bu=[];
for(by=0;
by<bz.length;
by++){if(bz[by].columns){bu=bu.concat(bz[by].columns);
}}if(bu.length){aH(bu,bv,bw,bx);
}}function r(bv,bw,bz,bu){var by;
var bx;
bz=bz||0;
bu=bu||{};
bu[bz]=bu[bz]||0;
for(bx=0;
bx<bw.length;
bx++){if(bw[bx]==bv){by={cell:bu[bz],row:bz};
break;
}else{if(bw[bx].columns){by=r(bv,bw[bx].columns,bz+1,bu);
if(by){break;
}}}bu[bz]++;
}return by;
}function R(bu,bv,by,bx){var bz;
var bw=by.locked;
do{bz=bu[bv];
bv+=bx?1:-1;
}while(bz&&bv>-1&&bv<bu.length&&bz!=by&&!bz.columns&&bz.locked==bw);
return bz;
}function S(bv,bB,bz,bu){if(bB.columns){bB=bB.columns;
return bB[bu?0:bB.length-1];
}else{var bx=p(bB,bv);
var by;
if(bx){by=bx.columns;
}else{by=bv;
}var bw=an(bB,by);
if(bw===0&&bu){bw++;
}else{if(bw==by.length-1&&!bu){bw--;
}else{if(bw>0||(bw===0&&!bu)){bw+=bu?-1:1;
}}}var bA=an(bz,by);
bB=R(by,bw,bz,bA>bw);
if(bB&&bB!=bz&&bB.columns){return S(bv,bB,bz,bu);
}}return null;
}function x(bv,bw,bz,bu){var by;
var bx;
bz=bz||0;
bu=bu||{};
bu[bz]=bu[bz]||0;
for(bx=0;
bx<bw.length;
bx++){if(bw[bx]==bv){by={cell:bu[bz],row:bz};
break;
}else{if(bw[bx].columns){by=x(bv,bw[bx].columns,bz+1,bu);
if(by){break;
}}}if(!bw[bx].hidden){bu[bz]++;
}}return by;
}function V(bu){var bv=U(aD(bu));
return bv.concat(U(aM(bu)));
}function U(bv){var bx=[];
var bu=[];
for(var bw=0;
bw<bv.length;
bw++){bx.push(bv[bw]);
if(bv[bw].columns){bu=bu.concat(bv[bw].columns);
}}if(bu.length){bx=bx.concat(U(bu));
}return bx;
}function al(bv){var bw=0;
var bu;
for(var bx=0;
bx<bv.length;
bx++){bu=bv[bx];
if(bu.columns){bw+=al(bu.columns);
}else{if(bu.hidden){bw++;
}}}return bw;
}function v(bu){var bv,by=0;
for(var bw=0,bx=bu.length;
bw<bx;
bw++){bv=bu[bw].style.width;
if(bv&&bv.indexOf("%")==-1){by+=parseInt(bv,10);
}}return by;
}function a0(bv,bw){var bu=bv.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");
var by;
for(var bx=0;
bx<bu.length;
bx++){by=bu[bx].rowSpan;
if(by>1){bu[bx].rowSpan=(by-bw)||1;
}}}function d(bv,bw){var bu=bv.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");
for(var bx=0;
bx<bu.length;
bx++){bu[bx].rowSpan+=bw;
}}function aY(bv){var by=bv.find("tr:not(.k-filter-row)");
var bw=by.filter(function(){return !a(this).children().length;
}).remove().length;
var bu=by.find("th:not(.k-group-cell,.k-hierarchy-cell)");
for(var bx=0;
bx<bu.length;
bx++){if(bu[bx].rowSpan>1){bu[bx].rowSpan-=bw;
}}return by.length-bw;
}function aF(bw,bu,bC,bB,bz){var bx,bA,by,bv=[];
for(bx=0,by=bw.length;
bx<by;
bx++){bA=bC[bB]||[];
bA.push(bu.eq(bz+bx));
bC[bB]=bA;
if(bw[bx].columns){bv=bv.concat(bw[bx].columns);
}}if(bv.length){aF(bv,bu,bC,bB+1,bz+bw.length);
}}function aD(bu){return ac(bu,function(bv){return bv.locked;
});
}function aM(bu){return ac(bu,function(bv){return !bv.locked;
});
}function br(bu){return ac(bu,function(bv){return !bv.locked&&ay(bv);
});
}function bq(bu){return ac(bu,function(bv){return bv.locked&&ay(bv);
});
}function bp(bu){var bw=[];
for(var bv=0;
bv<bu.length;
bv++){if(bu[bv].hidden){continue;
}if(bu[bv].columns){bw=bw.concat(bp(bu[bv].columns));
}else{bw.push(bu[bv]);
}}return bw;
}function aB(bu){var bw=[];
for(var bv=0;
bv<bu.length;
bv++){if(!bu[bv].columns){bw.push(bu[bv]);
continue;
}bw=bw.concat(aB(bu[bv].columns));
}return bw;
}function aC(bv){var by=bv.find(">tr:not(.k-filter-row)");
var bw=function(){var bz=a(this);
return !bz.hasClass("k-group-cell")&&!bz.hasClass("k-hierarchy-cell");
};
var bu=a();
if(by.length>1){bu=by.find("th").filter(bw).filter(function(){return this.rowSpan>1;
});
}bu=bu.add(by.last().find("th").filter(bw));
var bx=az.attr("index");
bu.sort(function(bz,bA){bz=a(bz);
bA=a(bA);
var bB=bz.attr(bx);
var bC=bA.attr(bx);
if(bB===bj){bB=a(bz).index();
}if(bC===bj){bC=a(bA).index();
}bB=parseInt(bB,10);
bC=parseInt(bC,10);
return bB>bC?1:(bB<bC?-1:0);
});
return bu;
}function aT(bu){var bv=bu.closest("table");
var bF=a().add(bu);
var bG=bu.closest("tr");
var bw=bv.find("tr:not(.k-filter-row)");
var bz=bw.index(bG);
if(bz>0){var bB=bw.eq(bz-1);
var bD=bB.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return !a(this).attr("rowspan");
});
var bA=0;
var by=bG.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(bu);
var bE=bu.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1;
});
for(var bx=0;
bx<bE.length;
bx++){bA+=bE[bx].colSpan||1;
}by+=Math.max(bA-1,0);
bA=0;
for(bx=0;
bx<bD.length;
bx++){var bC=bD.eq(bx);
if(bC.attr("colSpan")){bA+=bC[0].colSpan;
}else{bA+=1;
}if(by>=bx&&by<bA){bF=aT(bC).add(bF);
break;
}}}return bF;
}function k(bu){var bz=bu.closest("thead");
var bF=a().add(bu);
var bG=bu.closest("tr");
var bA=bz.find("tr:not(.k-filter-row)");
var bC=bA.index(bG)+bu[0].rowSpan;
var by=az.attr("colspan");
if(bC<=bA.length-1){var bw=bG.next();
var bE=bu.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");
var bB;
bE=bE.filter(function(){return !this.rowSpan||this.rowSpan===1;
});
var bD=0;
for(bB=0;
bB<bE.length;
bB++){bD+=parseInt(bE.eq(bB).attr(by),10)||1;
}var bv=bw.find("th:not(.k-group-cell,.k-hierarchy-cell)");
var bx=parseInt(bu.attr(by),10)||1;
bB=0;
while(bB<bx){bw=bv.eq(bB+bD);
bF=bF.add(k(bw));
var bH=parseInt(bw.attr(by),10);
if(bH>1){bx-=bH-1;
}bB++;
}}return bF;
}function f(by,bx,bv,bu){var bw,bz=by;
if(bu){by.empty();
}if(bf){by[0].innerHTML=bv;
}else{bw=document.createElement("div");
bw.innerHTML="<table><tbody>"+bv+"</tbody></table>";
by=bw.firstChild.firstChild;
bx[0].replaceChild(by,bz[0]);
by=a(by);
}return by;
}function c(bu){bu=bu||{};
var bv=bu.style;
if(!bv){bv="display:none";
}else{bv=bv.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none");
if(bv===bu.style){bv=bv.replace(/(.*)?/i,"display:none;$1");
}}return O({},bu,{style:bv});
}function aZ(bu){bu=bu||{};
var bv=bu.style;
if(bv){bu.style=bv.replace(/(display\s*:\s*none\s*;?)*/ig,"");
}return bu;
}function aP(by,bz,bx,bw){var bu=by.find(">colgroup"),bA,bv=aE(bz,function(bB){bA=bB.width;
if(bA&&parseInt(bA,10)!==0){return az.format('<col style="width:{0}"/>',typeof bA===a9?bA:bA+"px");
}return"<col />";
});
if(bx||bu.find(".k-hierarchy-col").length){bv.splice(0,0,'<col class="k-hierarchy-col" />');
}if(bu.length){bu.remove();
}bu=a(new Array(bw+1).join('<col class="k-group-col">')+bv.join(""));
if(!bu.is("colgroup")){bu=a("<colgroup/>").append(bu);
}by.prepend(bu);
if(h.msie&&h.version==8){by.css("display","inline-table");
window.setTimeout(function(){by.css("display","");
},1);
}}function aR(bv,bu){var bx=0;
var bw,by;
var bz=bv.find("th:not(.k-group-cell)");
for(bw=0,by=bu.length;
bw<by;
bw++){if(bu[bw].locked){bz.eq(bw).insertBefore(bz.eq(bx));
bz=bv.find("th:not(.k-group-cell)");
bx++;
}}}function A(bu){var by={},bw,bv,bx;
for(bv=0,bx=bu.length;
bv<bx;
bv++){bw=bu[bv];
by[bw.value]=bw.text;
}return by;
}function Y(bz,bw,bu,bv){var by=bu&&bu.length&&aw(bu[0])&&"value" in bu[0],bx=by?A(bu)[bz]:bz;
bx=bx!=null?bx:"";
return bw?az.format(bw,bx):(bv===false?bx:az.htmlEncode(bx));
}function a6(bv,bw,bz){var bx=0,by,bu=bv[bx];
while(bu){by=bz?true:bu.style.display!=="none";
if(by&&!aL.test(bu.className)&&--bw<0){bu.style.display=bz?"":"none";
break;
}bu=bv[++bx];
}}function am(bz,bv){var bw=0,bx=bz.length,bu,by;
for(;
bw<bx;
bw+=1){by=bz.eq(bw);
if(by.is(".k-grouping-row,.k-detail-row")){bu=by.children(":not(.k-group-cell):first,.k-detail-cell").last();
bu.attr("colspan",parseInt(bu.attr("colspan"),10)-1);
}else{if(by.hasClass("k-grid-edit-row")&&(bu=by.children(".k-edit-container")[0])){bu=a(bu);
bu.attr("colspan",parseInt(bu.attr("colspan"),10)-1);
bu.find("col").eq(bv).remove();
by=bu.find("tr:first");
}a6(by[0].cells,bv,false);
}}}function ai(bu){var bx=[];
var bw;
for(var bv=0;
bv<bu.length;
bv++){bw=bu[bv];
if(!("field" in bw&&"value" in bw&&"items" in bw)){break;
}bx.push(bw);
if(bw.hasSubgroups){bx=bx.concat(ai(bw.items));
}}return bx;
}function af(bu){var bx=[];
var bw;
for(var bv=0;
bv<bu.length;
bv++){bw=bu[bv];
if(!("field" in bw&&"value" in bw&&"items" in bw)){break;
}if(bw.hasSubgroups){bx=bx.concat(af(bw.items));
}bx.push(bw.aggregates);
}return bx;
}function a8(bA,bv){var bx=0,by=bA.length,bu,bz,bw;
for(;
bx<by;
bx+=1){bz=bA.eq(bx);
if(bz.is(".k-grouping-row,.k-detail-row")){bu=bz.children(":not(.k-group-cell):first,.k-detail-cell").last();
bu.attr("colspan",parseInt(bu.attr("colspan"),10)+1);
}else{if(bz.hasClass("k-grid-edit-row")&&(bu=bz.children(".k-edit-container")[0])){bu=a(bu);
bu.attr("colspan",parseInt(bu.attr("colspan"),10)+1);
aP(bu.find(">form>table"),bo(bw),false,0);
bz=bu.find("tr:first");
}a6(bz[0].cells,bv,true);
}}}function bm(by,bz,bx){bx=bx||1;
var bv,bu,bw;
for(bu=0,bw=by.length;
bu<bw;
bu++){bv=by.eq(bu).children().last();
bv.attr("colspan",parseInt(bv.attr("colspan"),10)+bx);
bv=bz.eq(bu).children().last();
bv.attr("colspan",parseInt(bv.attr("colspan"),10)-bx);
}}function be(bx){var bv,bw,by=0;
var bu=bx.find(">colgroup>col");
for(bv=0,bw=bu.length;
bv<bw;
bv+=1){by+=parseInt(bu[bv].style.width,10);
}return by;
}var ad=az.ui.DataBoundWidget.extend({init:function(bu,bw,bv){var bx=this;
bw=ao(bw)?{dataSource:bw}:bw;
bt.fn.init.call(bx,bu,bw);
if(bv){bx._events=bv;
}ax=az.support.isRtl(bu);
bx._element();
bx._aria();
bx._columns(bx.options.columns);
bx._dataSource();
bx._tbody();
bx._pageable();
bx._thead();
bx._groupable();
bx._toolbar();
bx._setContentHeight();
bx._templates();
bx._navigatable();
bx._selectable();
bx._clipboard();
bx._details();
bx._editable();
bx._attachCustomCommandsEvent();
bx._minScreenSupport();
if(bx.options.autoBind){bx.dataSource.fetch();
}else{bx._footer();
}if(bx.lockedContent){bx.wrapper.addClass("k-grid-lockedcolumns");
bx._resizeHandler=function(){bx.resize();
};
a(window).on("resize"+aS,bx._resizeHandler);
}az.notify(bx);
},events:[j,"dataBinding","cancel",D,J,I,K,P,o,L,a2,aX,a3,t,s,u,m,n,w],setDataSource:function(bu){var bw=this;
var bv=bw.options.scrollable;
bw.options.dataSource=bu;
bw._dataSource();
bw._pageable();
bw._thead();
if(bv){if(bv.virtual){bw.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0);
}else{bw.content.scrollLeft(0);
}}if(bw.options.groupable){bw._groupable();
}if(bw.virtualScrollable){bw.virtualScrollable.setDataSource(bw.options.dataSource);
}if(bw.options.navigatable){bw._navigatable();
}if(bw.options.selectable){bw._selectable();
}if(bw.options.autoBind){bu.fetch();
}},options:{name:"Grid",columns:[],toolbar:null,autoBind:true,filterable:false,scrollable:true,sortable:false,selectable:false,allowCopy:false,navigatable:false,pageable:false,editable:false,groupable:false,rowTemplate:"",altRowTemplate:"",noRecords:false,dataSource:{},height:null,resizable:false,reorderable:false,columnMenu:false,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:i,confirmation:G,confirmDelete:z},commands:{create:F.create.text,cancel:F.cancel.text,save:F.save.text,destroy:F.destroy.text,edit:F.edit.text,update:F.update.text,canceledit:F.canceledit.text,excel:F.excel.text,pdf:F.pdf.text},noRecords:aN}},destroy:function(){var bv=this,bu;
bv._angularItems("cleanup");
bv._destroyColumnAttachments();
bt.fn.destroy.call(bv);
this._navigatableTables=null;
if(bv._resizeHandler){a(window).off("resize"+aS,bv._resizeHandler);
}if(bv.pager&&bv.pager.element){bv.pager.destroy();
}bv.pager=null;
if(bv.groupable&&bv.groupable.element){bv.groupable.element.kendoGroupable("destroy");
}bv.groupable=null;
if(bv.options.reorderable){bv.wrapper.data("kendoReorderable").destroy();
}if(bv.selectable&&bv.selectable.element){bv.selectable.destroy();
bv.clearArea();
if(bv.copyHandler){bv.wrapper.off("keydown",bv.copyHandler);
bv.unbind(bv.copyHandler);
}if(bv.updateClipBoardState){bv.unbind(bv.updateClipBoardState);
bv.updateClipBoardState=null;
}if(bv.clearAreaHandler){bv.wrapper.off("keyup",bv.clearAreaHandler);
}}bv.selectable=null;
if(bv.resizable){bv.resizable.destroy();
if(bv._resizeUserEvents){if(bv._resizeHandleDocumentClickHandler){a(document).off("click",bv._resizeHandleDocumentClickHandler);
}bv._resizeUserEvents.destroy();
bv._resizeUserEvents=null;
}bv.resizable=null;
}if(bv.virtualScrollable&&bv.virtualScrollable.element){bv.virtualScrollable.destroy();
}bv.virtualScrollable=null;
bv._destroyEditable();
if(bv.dataSource){bv.dataSource.unbind(j,bv._refreshHandler).unbind(aU,bv._progressHandler).unbind(N,bv._errorHandler);
bv._refreshHandler=bv._progressHandler=bv._errorHandler=null;
}bu=bv.element.add(bv.wrapper).add(bv.table).add(bv.thead).add(bv.wrapper.find(">.k-grid-toolbar"));
if(bv.content){bu=bu.add(bv.content).add(bv.content.find(">.k-virtual-scrollable-wrap"));
}if(bv.lockedHeader){bv._removeLockedContainers();
}if(bv.pane){bv.pane.destroy();
}if(bv.minScreenResizeHandler){a(window).off("resize",bv.minScreenResizeHandler);
}if(bv._draggableInstance&&bv._draggableInstance.element){bv._draggableInstance.destroy();
}bv._draggableInstance=null;
bu.off(aS);
az.destroy(bv.wrapper);
bv.rowTemplate=bv.altRowTemplate=bv.lockedRowTemplate=bv.lockedAltRowTemplate=bv.detailTemplate=bv.footerTemplate=bv.groupFooterTemplate=bv.lockedGroupFooterTemplate=bv.noRecordsTemplate=null;
bv.scrollables=bv.thead=bv.tbody=bv.element=bv.table=bv.content=bv.footer=bv.wrapper=bv._groupableClickHandler=bv._setContentWidthHandler=null;
},getOptions:function(){var bw=this.options;
bw.dataSource=null;
var bx=O(true,{},this.options);
bx.columns=az.deepExtend([],this.columns);
var bu=this.dataSource;
var bv=bu.options.data&&bu._data;
bu.options.data=null;
bx.dataSource=a.extend(true,{},bu.options);
bu.options.data=bv;
bx.dataSource.data=bv;
bx.dataSource.page=bu.page();
bx.dataSource.filter=bu.filter();
bx.dataSource.pageSize=bu.pageSize();
bx.dataSource.sort=bu.sort();
bx.dataSource.group=bu.group();
bx.dataSource.aggregate=bu.aggregate();
if(bx.dataSource.transport){bx.dataSource.transport.dataSource=null;
}bx.$angular=bj;
return bx;
},setOptions:function(by){var bu=this.getOptions();
az.deepExtend(bu,by);
if(!by.dataSource){bu.dataSource=this.dataSource;
}var bz=this.wrapper;
var bw=this._events;
var bv=this.element;
this.destroy();
this.options=null;
if(this._isMobile){var bx=bz.closest(az.roleSelector("pane")).parent();
bx.after(bz);
bx.remove();
bz.removeClass("k-grid-mobile");
}if(bz[0]!==bv[0]){bz.before(bv);
bz.remove();
}bv.empty();
this.init(bv,bu,bw);
this._setEvents(bu);
},items:function(){if(this.lockedContent){return this._items(this.tbody).add(this._items(this.lockedTable.children("tbody")));
}else{return this._items(this.tbody);
}},_items:function(bu){return bu.children().filter(function(){var bv=a(this);
return !bv.hasClass("k-grouping-row")&&!bv.hasClass("k-detail-row")&&!bv.hasClass("k-group-footer");
});
},dataItems:function(){var bu=az.ui.DataBoundWidget.fn.dataItems.call(this);
if(this.lockedContent){var bw=bu.length,bx=new Array(2*bw);
for(var bv=bw;
--bv>=0;
){bx[bv]=bx[bv+bw]=bu[bv];
}bu=bx;
}return bu;
},_destroyColumnAttachments:function(){var bu=this;
bu.resizeHandle=null;
if(!bu.thead){return;
}this.angular("cleanup",function(){return{elements:bu.thead.get()};
});
bu.thead.add(bu.lockedHeader).find("th").each(function(){var by=a(this),bw=by.data("kendoFilterMenu"),bx=by.data("kendoColumnSorter"),bv=by.data("kendoColumnMenu");
if(bw){bw.destroy();
}if(bx){bx.destroy();
}if(bv){bv.destroy();
}});
},_attachCustomCommandsEvent:function(){var by=this,bu=aB(by.columns||[]),bv,bw,bx;
for(bw=0,bx=bu.length;
bw<bx;
bw++){bv=bu[bw].command;
if(bv){g(by,by.wrapper,bv);
}}},_aria:function(){var bu=this.element.attr("id")||"aria";
if(bu){this._cellId=bu+"_active_cell";
}},_element:function(){var bv=this,bu=bv.element;
if(!bu.is("table")){if(bv.options.scrollable){bu=bv.element.find("> .k-grid-content > table");
}else{bu=bv.element.children("table");
}if(!bu.length){bu=a("<table />").appendTo(bv.element);
}}if(at){bu.attr("cellspacing",0);
}bv.table=bu.attr("role",bv._hasDetails()?"treegrid":"grid");
bv._wrapper();
},_createResizeHandle:function(bv,bF){var bG=this;
var bB=bG.options.columnResizeHandleWidth;
var bE=bG.options.scrollable;
var bD=bG.resizeHandle;
var bx=this._groups();
var bC;
if(bD&&bG.lockedContent&&bD.data("th")[0]!==bF[0]){bD.off(aS).remove();
bD=null;
}if(!bD){bD=bG.resizeHandle=a('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>');
bv.append(bD);
}if(!ax){bC=bF[0].offsetWidth;
var bu=aC(bF.closest("thead")).filter(":visible");
for(var bz=0;
bz<bu.length;
bz++){if(bu[bz]==bF[0]){break;
}bC+=bu[bz].offsetWidth;
}if(bx>0){bC+=bv.find(".k-group-cell:first").outerWidth()*bx;
}if(bG._hasDetails()){bC+=bv.find(".k-hierarchy-cell:first").outerWidth();
}}else{bC=bF.position().left;
if(bE){var by=bF.closest(".k-grid-header-wrap, .k-grid-header-locked"),bA=h.msie?by.scrollLeft():0,bH=h.webkit?(by[0].scrollWidth-by[0].offsetWidth-by.scrollLeft()):0,bw=h.mozilla?(by[0].scrollWidth-by[0].offsetWidth-(by[0].scrollWidth-by[0].offsetWidth-by.scrollLeft())):0;
bC-=bH-bw+bA;
}}bD.css({top:bF.position().top,left:bC-bB,height:bF.outerHeight(),width:bB*3}).data("th",bF).show();
bD.off("dblclick"+aS).on("dblclick"+aS,function(){bG._autoFitLeafColumn(bF.data("index"));
});
},_positionColumnResizeHandle:function(){var bw=this,bu=bw.options.columnResizeHandleWidth,bv=bw.lockedHeader?bw.lockedHeader.find("thead:first"):a();
bw.thead.add(bv).on("mousemove"+aS,"th",function(by){var bA=a(this);
if(bA.hasClass("k-group-cell")||bA.hasClass("k-hierarchy-cell")){return;
}var bx=by.clientX,bB=a(window).scrollLeft(),bz=bA.offset().left+(!ax?this.offsetWidth:0);
if(bx+bB>bz-bu&&bx+bB<bz+bu){bw._createResizeHandle(bA.closest("div"),bA);
}else{if(bw.resizeHandle){bw.resizeHandle.hide();
}else{B(bw.wrapper,"");
}}});
},_resizeHandleDocumentClick:function(bu){if(a(bu.target).closest(".k-column-active").length){return;
}a(document).off(bu);
this._hideResizeHandle();
},_hideResizeHandle:function(){if(this.resizeHandle){this.resizeHandle.data("th").removeClass("k-column-active");
if(this.lockedContent&&!this._isMobile){this.resizeHandle.off(aS).remove();
this.resizeHandle=null;
}else{this.resizeHandle.hide();
}}},_positionColumnResizeHandleTouch:function(){var bv=this,bu=bv.lockedHeader?bv.lockedHeader.find("thead:first"):a();
bv._resizeUserEvents=new az.UserEvents(bu.add(bv.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(bw){var bx=a(bw.target);
bw.preventDefault();
bx.addClass("k-column-active");
bv._createResizeHandle(bx.closest("div"),bx);
if(!bv._resizeHandleDocumentClickHandler){bv._resizeHandleDocumentClickHandler=aV(bv._resizeHandleDocumentClick,bv);
}a(document).on("click",bv._resizeHandleDocumentClickHandler);
}});
},_resizable:function(){var bE=this,bB=bE.options,bx,bv,bw,by,bA=this._isMobile,bC=!az.support.mobileOS?az.support.scrollbar():0,bz,bu,bD;
if(bB.resizable){bx=bB.scrollable?bE.wrapper.find(".k-grid-header-wrap:first"):bE.wrapper;
if(bA){bE._positionColumnResizeHandleTouch(bx);
}else{bE._positionColumnResizeHandle(bx);
}if(bE.resizable){bE.resizable.destroy();
}bE.resizable=new bi.Resizable(bx.add(bE.lockedHeader),{handle:(!!bB.scrollable?"":">")+".k-resize-handle",hint:function(bF){return a('<div class="k-grid-resize-indicator" />').css({height:bF.data("th").outerHeight()+bE.tbody.attr("clientHeight")});
},start:function(bG){bD=a(bG.currentTarget).data("th");
if(bA){bE._hideResizeHandle();
}var bI=bD.closest("table"),bJ=a.inArray(bD[0],aC(bD.closest("thead")).filter(":visible"));
bz=bI.parent().hasClass("k-grid-header-locked");
var bF=bz?bE.lockedTable:bE.table,bH=bE.footer||a();
if(bE.footer&&bE.lockedContent){bH=bz?bE.footer.children(".k-grid-footer-locked"):bE.footer.children(".k-grid-footer-wrap");
}B(bE.wrapper,"col-resize");
if(bB.scrollable){bu=bI.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bJ+")").add(bF.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bJ+")")).add(bH.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bJ+")"));
}else{bu=bF.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bJ+")");
}bv=bG.x.location;
bw=bD.outerWidth();
by=bz?bF.children("tbody").outerWidth():bE.tbody.outerWidth();
if(h.webkit){bE.wrapper.addClass("k-grid-column-resizing");
}},resize:function(bI){var bL=ax?-1:1,bH=bw+(bI.x.location*bL)-(bv*bL);
if(bB.scrollable){var bJ;
if(bz&&bE.lockedFooter){bJ=bE.lockedFooter.children("table");
}else{if(bE.footer){bJ=bE.footer.find(">.k-grid-footer-wrap>table");
}}if(!bJ||!bJ[0]){bJ=a();
}var bK=bD.closest("table");
var bG=bz?bE.lockedTable:bE.table;
var bF=false;
var bM=bE.wrapper.width()-bC;
var bN=bH;
if(bz&&by-bw+bN>bM){bN=bw+(bM-by-bC*2);
if(bN<0){bN=bH;
}bF=true;
}if(bN>10){bu.css("width",bN);
if(by){if(bF){bN=bM-bC*2;
}else{bN=by+(bI.x.location*bL)-(bv*bL);
}bG.add(bK).add(bJ).css("width",bN);
if(!bz){bE._footerWidth=bN;
}}}}else{if(bH>10){bu.css("width",bH);
}}},resizeend:function(){var bI=bD.outerWidth(),bF,bG;
B(bE.wrapper,"");
if(h.webkit){bE.wrapper.removeClass("k-grid-column-resizing");
}if(bw!=bI){bG=bE.lockedHeader?bE.lockedHeader.find("thead:first tr:first").add(bE.thead.find("tr:first")):bD.parent();
var bH=bD.attr(az.attr("index"));
if(!bH){bH=bG.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(bD);
}bF=aB(bE.columns)[bH];
bF.width=bI;
bE.trigger(t,{column:bF,oldWidth:bw,newWidth:bI});
bE._applyLockedContainersWidth();
bE._syncLockedContentHeight();
bE._syncLockedHeaderHeight();
}bE._hideResizeHandle();
bD=null;
}});
}},_draggable:function(){var bu=this;
if(bu.options.reorderable){if(bu._draggableInstance){bu._draggableInstance.destroy();
}bu._draggableInstance=bu.wrapper.kendoDraggable({group:az.guid(),autoScroll:true,filter:bu.content?".k-grid-header:first "+aj:"table:first>.k-grid-header "+aj,drag:function(){bu._hideResizeHandle();
},hint:function(bv){return a('<div class="k-header k-drag-clue" />').css({width:bv.width(),paddingLeft:bv.css("paddingLeft"),paddingRight:bv.css("paddingRight"),lineHeight:bv.height()+"px",paddingTop:bv.css("paddingTop"),paddingBottom:bv.css("paddingBottom")}).html(bv.attr(az.attr("title"))||bv.attr(az.attr("field"))||bv.text()).prepend('<span class="k-icon k-drag-status k-denied" />');
}}).data("kendoDraggable");
}},_reorderable:function(){var bv=this;
if(bv.options.reorderable){if(bv.wrapper.data("kendoReorderable")){bv.wrapper.data("kendoReorderable").destroy();
}var bu=function(bx,bz,bB){var bw=bx[bz];
var bA=bx[bB];
var by=p(bw,bv.columns);
bx=by?by.columns:bv.columns;
return an(bA,bx);
};
bv.wrapper.kendoReorderable({draggable:bv._draggableInstance,dragOverContainers:function(bx,by){var bw=V(bv.columns);
return bw[bx].lockable!==false&&bu(bw,bx,by)>-1;
},inSameContainer:function(bw){return a(bw.source).parent()[0]===a(bw.target).parent()[0]&&bu(V(bv.columns),bw.sourceIndex,bw.targetIndex)>-1;
},change:function(by){var bx=V(bv.columns);
var bw=bx[by.oldIndex];
var bz=bu(bx,by.oldIndex,by.newIndex);
bv.trigger(s,{newIndex:bz,oldIndex:an(bw,bx),column:bw});
bv.reorderColumn(bz,bw,by.position==="before");
}});
}},_reorderHeader:function(bA,bB,bu){var bD=this;
var bz=r(bA[0],bD.columns);
var bv=r(bB,bD.columns);
var bx=[];
for(var bw=0;
bw<bA.length;
bw++){if(bA[bw].columns){bx=bx.concat(bA[bw].columns);
}}var bE=M(bD.lockedHeader,bD.thead,"tr:eq("+bz.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");
var by=aD(bA).length;
var bC=aD([bB]).length;
if(bx.length){if(by>0&&bC===0){aI(bA,bB,bx,bD.columns,bD.lockedHeader.find("thead"),bD.thead,this._groups());
}else{if(by===0&&bC>0){aI(bA,bB,bx,bD.columns,bD.thead,bD.lockedHeader.find("thead"),this._groups());
}}if(bB.columns||bz.cell-bv.cell>1||bv.cell-bz.cell>1){bB=S(bD.columns,bB,bA[0],bu);
if(bB){bD._reorderHeader(bx,bB,bu);
}}}else{if(by!==bC){bl(bE[bz.cell],bD.columns,by);
}}a1(bE,bz.cell,bv.cell,bu,bA.length);
},_reorderContent:function(bK,bx,bu){var bL=this;
var bG=a();
var bI=bK[0];
var bM=bo(bK);
var bJ=an(bI,aB(bL.columns));
var by=an(bx,aB(bL.columns));
var bw=an(bI,bp(bL.columns));
var bv=an(bx,bp(bL.columns));
var bF=aD(bL.columns).length;
var bD=!!bx.locked;
var bz=bL.footer||bL.wrapper.find(".k-grid-footer");
var bB,bA;
bB=bA=bv;
if(bx.hidden){if(bD){bv=bL.lockedTable.find("colgroup");
bB=bL.lockedHeader.find("colgroup");
bA=a(bL.lockedFooter).find(">table>colgroup");
}else{bv=bL.tbody.prev();
bB=bL.thead.prev();
bA=bz.find(".k-grid-footer-wrap").find(">table>colgroup");
}}if(bL._hasFilterRow()){a1(bL.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),bJ,by,bu,bK.length);
}a1(M(bL.lockedHeader,bL.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),bw,bB,bu,bM.length);
if(bL.options.scrollable){a1(M(bL.lockedTable,bL.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),bw,bv,bu,bM.length);
}if(bz&&bz.length){a1(M(bL.lockedFooter,bz.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),bw,bA,bu,bM.length);
a1(bz.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),bJ,by,bu,bK.length);
}var bH=bL.tbody.children(":not(.k-grouping-row,.k-detail-row)");
if(bL.lockedTable){if(bF>by){if(bF<=bJ){bm(bL.lockedTable.find(">tbody>tr.k-grouping-row"),bL.table.find(">tbody>tr.k-grouping-row"),bK.length);
}}else{if(bF>bJ){bm(bL.table.find(">tbody>tr.k-grouping-row"),bL.lockedTable.find(">tbody>tr.k-grouping-row"),bK.length);
}}bG=bL.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)");
}for(var bC=0,bE=bH.length;
bC<bE;
bC+=1){a1(M(bG[bC],bH[bC],">td:not(.k-group-cell,.k-hierarchy-cell)"),bJ,by,bu,bK.length);
}},_autoFitLeafColumn:function(bu){this.autoFitColumn(aB(this.columns)[bu]);
},autoFitColumn:function(bw){var bP=this,bM=bP.options,bx=bP.columns,bE,bO,bC,bF,bR=bP.lockedHeader?aC(bP.lockedHeader.find(">table>thead")).filter(ap).length:0,bu,bJ="col:not(.k-group-col):not(.k-hierarchy-col)",bK="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";
if(typeof bw=="number"){bw=bx[bw];
}else{if(aw(bw)){bw=ac(U(bx),function(bS){return bS===bw;
})[0];
}else{bw=ac(U(bx),function(bS){return bS.field===bw;
})[0];
}}if(!bw||!ay(bw)){return;
}bE=an(bw,aB(bx));
bF=bw.locked;
if(bF){bC=bP.lockedHeader.children("table");
}else{bC=bP.thead.parent();
}bO=bC.find("[data-index='"+bE+"']");
var bz=bF?bP.lockedTable:bP.table,bA=bP.footer||a();
if(bP.footer&&bP.lockedContent){bA=bF?bP.footer.children(".k-grid-footer-locked"):bP.footer.children(".k-grid-footer-wrap");
}var bB=bA.find("table").first();
if(bP.lockedHeader&&!bF){bE-=bR;
}for(var bG=0;
bG<bx.length;
bG++){if(bx[bG]===bw){break;
}else{if(bx[bG].hidden){bE--;
}}}if(bM.scrollable){bu=bC.find(bJ).eq(bE).add(bz.children("colgroup").find(bJ).eq(bE)).add(bB.find("colgroup").find(bJ).eq(bE));
}else{bu=bz.children("colgroup").find(bJ).eq(bE);
}var bN=bC.add(bz).add(bB);
var bL=bO.outerWidth();
bu.width("");
bN.css("table-layout","fixed");
bu.width("auto");
bN.addClass("k-autofitting");
bN.css("table-layout","");
var bI=Math.ceil(Math.max(bO.outerWidth(),bz.find("tr:not(.k-grouping-row)").eq(0).children(bK).eq(bE).outerWidth(),bB.find("tr").eq(0).children(bK).eq(bE).outerWidth()))+1;
bu.width(bI);
bw.width=bI;
if(bM.scrollable){var bv=bC.find("col"),by,bQ=0;
for(var bD=0,bH=bv.length;
bD<bH;
bD+=1){by=bv[bD].style.width;
if(by&&by.indexOf("%")==-1){bQ+=parseInt(by,10);
}else{bQ=0;
break;
}}if(bQ){bN.each(function(){this.style.width=bQ+"px";
});
}}if(h.msie&&h.version==8){bN.css("display","inline-table");
setTimeout(function(){bN.css("display","table");
},1);
}bN.removeClass("k-autofitting");
bP.trigger(t,{column:bw,oldWidth:bL,newWidth:bI});
bP._applyLockedContainersWidth();
bP._syncLockedContentHeight();
bP._syncLockedHeaderHeight();
},reorderColumn:function(by,bv,bu){var bF=this,bC=p(bv,bF.columns),bw=bC?bC.columns:bF.columns,bE=an(bv,bw),bx=bw[by],bA,bz=!!bx.locked,bB=aD(bF.columns).length;
if(bE===by){return;
}if(!bv.locked&&bz&&aM(bF.columns).length==1){return;
}if(bv.locked&&!bz&&bB==1){return;
}bF._hideResizeHandle();
if(bu===bj){bu=by<bE;
}var bD=[bv];
bF._reorderHeader(bD,bx,bu);
if(bF.lockedHeader){aY(bF.thead);
aY(bF.lockedHeader);
}if(bx.columns){bx=aB(bx.columns);
bx=bx[bu?0:bx.length-1];
}if(bv.columns){bD=aB(bv.columns);
}bF._reorderContent(bD,bx,bu);
bA=!!bv.locked;
bA=bA!=bz;
bv.locked=bz;
bw.splice(bu?by:by+1,0,bv);
bw.splice(bE<by?bE:bE+1,1);
bF._templates();
bF._updateColumnCellIndex();
bF._updateTablesWidth();
bF._applyLockedContainersWidth();
bF._syncLockedHeaderHeight();
bF._syncLockedContentHeight();
bF._updateFirstColumnClass();
if(!bA){return;
}if(bz){bF.trigger(n,{column:bv});
}else{bF.trigger(w,{column:bv});
}},_updateColumnCellIndex:function(){var bu;
var bv=0;
if(this.lockedHeader){bu=this.lockedHeader.find("thead");
bv=bk(bu,aD(this.columns));
}bk(this.thead,aM(this.columns),bv);
},lockColumn:function(bu){var bv=this.columns;
if(typeof bu=="number"){bu=bv[bu];
}else{bu=ac(bv,function(bx){return bx.field===bu;
})[0];
}if(!bu||bu.locked||bu.hidden){return;
}var bw=aD(bv).length-1;
this.reorderColumn(bw,bu,false);
},unlockColumn:function(bu){var bv=this.columns;
if(typeof bu=="number"){bu=bv[bu];
}else{bu=ac(bv,function(bx){return bx.field===bu;
})[0];
}if(!bu||!bu.locked||bu.hidden){return;
}var bw=aD(bv).length;
this.reorderColumn(bw,bu,true);
},cellIndex:function(bv){var bu=0;
if(this.lockedTable&&!a.contains(this.lockedTable[0],bv[0])){bu=aB(aD(this.columns)).length;
}return a(bv).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(bv)+bu;
},_modelForContainer:function(bu){bu=a(bu);
if(!bu.is("tr")&&this._editMode()!=="popup"){bu=bu.closest("tr");
}var bv=bu.attr(az.attr("uid"));
return this.dataSource.getByUid(bv);
},_editable:function(){var by=this,bx=by.selectable&&by.selectable.options.multiple,bu=by.options.editable,bv=function(){var bA=b(),bz=by._editContainer;
if(bz&&!a.contains(bz[0],bA)&&bz[0]!==bA&&!a(bA).closest(".k-animation-container").length){if(by.editable.end()){by.closeCell();
}}};
if(bu){var bw=by._editMode();
if(bw==="incell"){if(bu.update!==false){by.wrapper.on(l+aS,"tr:not(.k-grouping-row) > td",function(bz){var bB=a(this),bA=by.lockedTable&&bB.closest("table")[0]===by.lockedTable[0];
if(bB.hasClass("k-hierarchy-cell")||bB.hasClass("k-detail-cell")||bB.hasClass("k-group-cell")||bB.hasClass("k-edit-cell")||bB.has("a.k-grid-delete").length||bB.has("button.k-grid-delete").length||(bB.closest("tbody")[0]!==by.tbody[0]&&!bA)||a(bz.target).is(":input")){return;
}if(by.editable){if(by.editable.end()){if(bx){a(b()).blur();
}by.closeCell();
by.editCell(bB);
}}else{by.editCell(bB);
}}).on("focusin"+aS,function(){if(!a.contains(this,b())){clearTimeout(by.timer);
by.timer=null;
}}).on("focusout"+aS,function(){by.timer=setTimeout(bv,1);
});
}}else{if(bu.update!==false){by.wrapper.on(l+aS,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(bz){bz.preventDefault();
by.editRow(a(this).closest("tr"));
});
}}if(bu.destroy!==false){by.wrapper.on(l+aS,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(bz){bz.preventDefault();
bz.stopPropagation();
by.removeRow(a(this).closest("tr"));
});
}else{by.wrapper.on(l+aS,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(bz){bz.stopPropagation();
if(!by._confirmation()){bz.preventDefault();
}});
}}},editCell:function(bu){bu=a(bu);
var bx=this,bv=aB(bx.columns)[bx.cellIndex(bu)],bw=bx._modelForContainer(bu);
bx.closeCell();
if(bw&&(!bw.editable||bw.editable(bv.field))&&!bv.command&&bv.field){bx._attachModelChange(bw);
bx._editContainer=bu;
bx.editable=bu.addClass("k-edit-cell").kendoEditable({fields:{field:bv.field,format:bv.format,editor:bv.editor,values:bv.values},model:bw,target:bx,change:function(bz){if(bx.trigger(a2,{values:bz.values,container:bu,model:bw})){bz.preventDefault();
}}}).data("kendoEditable");
var by=bu.parent().addClass("k-grid-edit-row");
if(bx.lockedContent){e(by[0],bx._relatedRow(by).addClass("k-grid-edit-row")[0]);
}bx.trigger(L,{container:bu,model:bw});
}},_adjustLockedHorizontalScrollBar:function(){var bw=this.table,bu=bw.parent();
var bv=bw[0].offsetWidth>bu[0].clientWidth?az.support.scrollbar():0;
this.lockedContent.height(bu.height()-bv);
},_syncLockedContentHeight:function(){if(this.lockedTable){if(!this.touchScroller){this._adjustLockedHorizontalScrollBar();
}this._adjustRowsHeight(this.table,this.lockedTable);
}},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var bu=this.lockedHeader.children("table");
var bv=this.thead.parent();
this._adjustRowsHeight(bu,bv);
bb(bu,bv);
}},_syncLockedFooterHeight:function(){if(this.lockedFooter&&this.footer&&this.footer.length){this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"));
}},_destroyEditable:function(){var bv=this;
var bu=function(){if(bv.editable){var bw=bv.editView?bv.editView.element:bv._editContainer;
if(bw){bw.off(l+aS,"a.k-grid-cancel",bv._editCancelClickHandler);
bw.off(l+aS,"a.k-grid-update",bv._editUpdateClickHandler);
}bv._detachModelChange();
bv.editable.destroy();
bv.editable=null;
bv._editContainer=null;
bv._destroyEditView();
}};
if(bv.editable){if(bv._editMode()==="popup"&&!bv._isMobile){bv._editContainer.data("kendoWindow").bind("deactivate",bu).close();
}else{bu();
}}if(bv._actionSheet){bv._actionSheet.destroy();
bv._actionSheet=null;
}},_destroyEditView:function(){if(this.editView){this.editView.purge();
this.editView=null;
this.pane.navigate("");
}},_attachModelChange:function(bu){var bv=this;
bv._modelChangeHandler=function(bw){bv._modelChange({field:bw.field,model:this});
};
bu.bind("change",bv._modelChangeHandler);
},_detachModelChange:function(){var bw=this,bu=bw._editContainer,bv=bw._modelForContainer(bu);
if(bv){bv.unbind(j,bw._modelChangeHandler);
}},closeCell:function(bx){var bz=this,bu=bz._editContainer,bw,bv,bA,by;
if(!bu){return;
}bw=bu.closest("tr").attr(az.attr("uid"));
by=bz.dataSource.getByUid(bw);
if(bx&&bz.trigger("cancel",{container:bu,model:by})){return;
}bu.removeClass("k-edit-cell");
bv=aB(bz.columns)[bz.cellIndex(bu)];
bA=bu.parent().removeClass("k-grid-edit-row");
bz._destroyEditable();
bz._displayCell(bu,bv,by);
if(bu.hasClass("k-dirty-cell")){a('<span class="k-dirty"/>').prependTo(bu);
}if(bz.lockedContent){e(bA.css("height","")[0],bz._relatedRow(bA).css("height","")[0]);
}},_displayCell:function(bu,bv,bw){var bz=this,by={storage:{},count:0},bx=O({},az.Template,bz.options.templateSettings),bA=az.template(bz._cellTmpl(bv,by),bx);
if(by.count>0){bA=aV(bA,by.storage);
}bu.empty().html(bA(bw));
bz.angular("compile",function(){return{elements:bu,data:[{dataItem:bw}]};
});
},removeRow:function(bu){if(!this._confirmation(bu)){return;
}this._removeRow(bu);
},_removeRow:function(bw){var bx=this,bv,bu=bx._editMode();
if(bu!=="incell"){bx.cancelRow();
}bw=a(bw);
if(bx.lockedContent){bw=bw.add(bx._relatedRow(bw));
}bw=bw.hide();
bv=bx._modelForContainer(bw);
if(bv&&!bx.trigger(aX,{row:bw,model:bv})){bx.dataSource.remove(bv);
if(bu==="inline"||bu==="popup"){bx.dataSource.sync();
}}else{if(bu==="incell"){bx._destroyEditable();
}}},_editMode:function(){var bv="incell",bu=this.options.editable;
if(bu!==true){if(typeof bu=="string"){bv=bu;
}else{bv=bu.mode||bv;
}}return bv;
},editRow:function(bx){var bw;
var by=this;
if(bx instanceof az.data.ObservableObject){bw=bx;
}else{bx=a(bx);
bw=by._modelForContainer(bx);
}var bv=by._editMode();
var bu;
by.cancelRow();
if(bw){by._attachModelChange(bw);
if(bv==="popup"){by._createPopupEditor(bw);
}else{if(bv==="inline"){by._createInlineEditor(bx,bw);
}else{if(bv==="incell"){a(bx).children(C).each(function(){var bz=a(this);
var bA=aB(by.columns)[bz.index()];
bw=by._modelForContainer(bz);
if(bw&&(!bw.editable||bw.editable(bA.field))&&bA.field){by.editCell(bz);
return false;
}});
}}}bu=by.editView?by.editView.element:by._editContainer;
if(bu){if(!this._editCancelClickHandler){this._editCancelClickHandler=aV(this._editCancelClick,this);
}bu.on(l+aS,"a.k-grid-cancel",this._editCancelClickHandler);
if(!this._editUpdateClickHandler){this._editUpdateClickHandler=aV(this._editUpdateClick,this);
}bu.on(l+aS,"a.k-grid-update",this._editUpdateClickHandler);
}}},_editUpdateClick:function(bu){bu.preventDefault();
bu.stopPropagation();
this.saveRow();
},_editCancelClick:function(bw){var bz=this;
var by=bz.options.navigatable;
var bx=bz.editable.options.model;
var bu=bz.editView?bz.editView.element:bz._editContainer;
bw.preventDefault();
bw.stopPropagation();
if(bz.trigger("cancel",{container:bu,model:bx})){return;
}var bv=bz.items().index(a(bz.current()).parent());
bz.cancelRow();
if(by){bz.current(bz.items().eq(bv).children().filter(aJ).first());
X(bz.table,true);
}},_createPopupEditor:function(bF){var bL=this,bC="<div "+az.attr("uid")+'="'+bF.uid+'" class="k-popup-edit-form'+(bL._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',bw,by,bB=[],bD,bE,bM,bN,bv,bJ,bx=aB(bL.columns),bu,bA=bL.options.editable,bK=bA.template,bG=aw(bA)?bA.window:{},bH=O({},az.Template,bL.options.templateSettings);
bG=bG||{};
if(bK){if(typeof bK===a9){bK=window.unescape(bK);
}bC+=(az.template(bK,bH))(bF);
for(bD=0,bE=bx.length;
bD<bE;
bD++){bw=bx[bD];
if(bw.command){bJ=ab(bw.command,"edit");
if(bJ){by=bJ;
}}}}else{for(bD=0,bE=bx.length;
bD<bE;
bD++){bw=bx[bD];
if(!bw.command){bC+='<div class="k-edit-label"><label for="'+bw.field+'">'+(bw.title||bw.field||"")+"</label></div>";
if((!bF.editable||bF.editable(bw.field))&&bw.field){bB.push({field:bw.field,format:bw.format,editor:bw.editor,values:bw.values});
bC+="<div "+az.attr("container-for")+'="'+bw.field+'" class="k-edit-field"></div>';
}else{var bI={storage:{},count:0};
bM=az.template(bL._cellTmpl(bw,bI),bH);
if(bI.count>0){bM=aV(bM,bI.storage);
}bC+='<div class="k-edit-field">'+bM(bF)+"</div>";
}}else{if(bw.command){bJ=ab(bw.command,"edit");
if(bJ){by=bJ;
}}}}}if(by){if(aw(by)){if(by.text&&aw(by.text)){bN=by.text.update;
bv=by.text.cancel;
}if(by.attr){bu=by.attr;
}}}var bz;
if(!bL._isMobile){bC+='<div class="k-edit-buttons k-state-default">';
bC+=bL._createButton({name:"update",text:bN,attr:bu})+bL._createButton({name:"canceledit",text:bv,attr:bu});
bC+="</div></div></div>";
bz=bL._editContainer=a(bC).appendTo(bL.wrapper).eq(0).kendoWindow(O({modal:true,resizable:false,draggable:true,title:"Edit",visible:false,close:function(bP){if(bP.userTriggered){bP.sender.element.focus();
if(bL.trigger("cancel",{container:bz,model:bF})){bP.preventDefault();
return;
}var bO=bL.items().index(a(bL.current()).parent());
bL.cancelRow();
if(bL.options.navigatable){bL.current(bL.items().eq(bO).children().filter(aJ).first());
X(bL.table,true);
}}}},bG));
}else{bC+="</div></div>";
bL.editView=bL.pane.append("<div data-"+az.ns+'role="view" data-'+az.ns+'use-native-scrolling="true" data-'+az.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+az.ns+'role="header" class="k-header">'+bL._createButton({name:"update",text:bN,attr:bu})+(bG.title||"Edit")+bL._createButton({name:"canceledit",text:bv,attr:bu})+"</div>"+bC+"</div>");
bz=bL._editContainer=bL.editView.element.find(".k-popup-edit-form");
}bL.editable=bL._editContainer.kendoEditable({fields:bB,model:bF,clearContainer:false,target:bL}).data("kendoEditable");
if(bL._isMobile){bz.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){a(this).next().children("input").click();
});
}bL._openPopUpEditor();
bL.trigger(L,{container:bz,model:bF});
},_openPopUpEditor:function(){if(!this._isMobile){this._editContainer.data("kendoWindow").center().open();
}else{this.pane.navigate(this.editView,this._editAnimation);
}},_createInlineEditor:function(bz,by){var bA=this,bv,bu,bw,bx=[];
if(bA.lockedContent){bz=bz.add(bA._relatedRow(bz));
}bz.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){bu=a(this);
bv=aB(bA.columns)[bA.cellIndex(bu)];
if(!bv.command&&bv.field&&(!by.editable||by.editable(bv.field))){bx.push({field:bv.field,format:bv.format,editor:bv.editor,values:bv.values});
bu.attr(az.attr("container-for"),bv.field);
bu.empty();
}else{if(bv.command){bw=ab(bv.command,"edit");
if(bw){bu.empty();
var bD,bC,bB;
if(aw(bw)){if(bw.text&&aw(bw.text)){bD=bw.text.update;
bC=bw.text.cancel;
}if(bw.attr){bB=bw.attr;
}}a(bA._createButton({name:"update",text:bD,attr:bB})+bA._createButton({name:"canceledit",text:bC,attr:bB})).appendTo(bu);
}}}});
bA._editContainer=bz;
bA.editable=new az.ui.Editable(bz.addClass("k-grid-edit-row"),{target:bA,fields:bx,model:by,clearContainer:false});
if(bz.length>1){e(bz[0],bz[1]);
bA._applyLockedContainersWidth();
}bA.trigger(L,{container:bz,model:by});
},cancelRow:function(){var bw=this,bu=bw._editContainer,bv;
if(bu){bv=bw._modelForContainer(bu);
bw._destroyEditable();
bw.dataSource.cancelChanges(bv);
if(bw._editMode()!=="popup"){bw._displayRow(bu);
}else{bw._displayRow(bw.tbody.find("["+az.attr("uid")+"="+bv.uid+"]"));
}}},saveRow:function(){var bx=this,bu=bx._editContainer,bw=bx._modelForContainer(bu),bv=bx.editable;
if(bu&&bv&&bv.end()&&!bx.trigger(a2,{container:bu,model:bw})){bx.dataSource.sync();
}},_displayRow:function(bC){var bD=this,by=bD._modelForContainer(bC),bB,bz,bA,bx=bC.hasClass("k-state-selected"),bw=bC.hasClass("k-alt");
if(by){if(bD.lockedContent){bB=a((bw?bD.lockedAltRowTemplate:bD.lockedRowTemplate)(by));
bD._relatedRow(bC.last()).replaceWith(bB);
}bD.angular("cleanup",function(){return{elements:bC.get()};
});
bz=a((bw?bD.altRowTemplate:bD.rowTemplate)(by));
bC.replaceWith(bz);
var bv=bz;
var bu=[{dataItem:by}];
if(bB&&bB.length){bv=bz.add(bB);
bu.push({dataItem:by});
}bD.angular("compile",function(){return{elements:bv.get(),data:bu};
});
if(bx&&bD.options.selectable){bD.select(bz.add(bB));
}if(bB){e(bz[0],bB[0]);
}bA=bz.next();
if(bA.hasClass("k-detail-row")&&bA.is(":visible")){bz.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus");
}}},_showMessage:function(bw,bx){var bz=this;
if(!bz._isMobile){return window.confirm(bw.title);
}var by=az.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>');
var bv=a(by(bw)).appendTo(bz.view.element);
var bu=bz._actionSheet=new az.mobile.ui.ActionSheet(bv,{cancel:bw.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy();
},command:function(bA){var bB=a(bA.currentTarget).parent();
if(!bB.hasClass("km-actionsheet-cancel")){bz._removeRow(bx);
}},popup:bz._actionSheetPopupOptions});
bu.open(bx);
return false;
},_confirmation:function(bw){var bx=this,bv=bx.options.editable,bu=bv===true||typeof bv===a9?bx.options.messages.editable.confirmation:bv.confirmation;
if(bu!==false&&bu!=null){if(typeof bu===aa){bu=bu(bx._modelForContainer(bw));
}return bx._showMessage({confirmDelete:bv.confirmDelete||bx.options.messages.editable.confirmDelete,cancelDelete:bv.cancelDelete||bx.options.messages.editable.cancelDelete,title:bu===true?bx.options.messages.editable.confirmation:bu},bw);
}return true;
},cancelChanges:function(){this.dataSource.cancelChanges();
},saveChanges:function(){var bu=this;
if(((bu.editable&&bu.editable.end())||!bu.editable)&&!bu.trigger(a3)){bu.dataSource.sync();
}},addRow:function(){var bE=this,by,bw=bE.dataSource,bz=bE._editMode(),bv=bE.options.editable.createAt||"",bB=bw.pageSize(),bF=bw.view()||[];
if((bE.editable&&bE.editable.end())||!bE.editable){if(bz!="incell"){bE.cancelRow();
}by=bw.indexOf(bF[0]);
if(bv.toLowerCase()=="bottom"){by+=bF.length;
if(bB&&!bw.options.serverPaging&&bB<=bF.length){by-=1;
}}if(by<0){if(bw.page()>bw.totalPages()){by=(bw.page()-1)*bB;
}else{by=0;
}}var bA=bw.insert(by,{}),bx=bA.uid,bD=bE.lockedContent?bE.lockedTable:bE.table,bC=bD.find("tr["+az.attr("uid")+"="+bx+"]"),bu=bC.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(bE._firstEditableColumnIndex(bC));
if(bz==="inline"&&bC.length){bE.editRow(bC);
}else{if(bz==="popup"){bE.editRow(bA);
}else{if(bu.length){bE.editCell(bu);
}}}if(bv.toLowerCase()=="bottom"&&bE.lockedContent){bE.lockedContent[0].scrollTop=bE.content[0].scrollTop=bE.content[0].offsetHeight;
}}},_firstEditableColumnIndex:function(bw){var bA=this,bu,bv=aB(bA.columns),bx,by,bz=bA._modelForContainer(bw);
for(bx=0,by=bv.length;
bx<by;
bx++){bu=bv[bx];
if(bz&&(!bz.editable||bz.editable(bu.field))&&!bu.command&&bu.field&&bu.hidden!==true){return bx;
}}return -1;
},_toolbar:function(){var bw=this,by=bw.wrapper,bx=bw.options.toolbar,bv=bw.options.editable,bu;
if(bx){bu=bw.wrapper.find(".k-grid-toolbar");
if(!bu.length){if(!ar(bx)){bx=(typeof bx===a9?bx:bw._toolbarTmpl(bx).replace(bg,"\\#"));
bx=aV(az.template(bx),bw);
}bu=a('<div class="k-header k-grid-toolbar" />').html(bx({})).prependTo(by);
bw.angular("compile",function(){return{elements:bu.get()};
});
}if(bv&&bv.create!==false){bu.on(l+aS,".k-grid-add",function(bz){bz.preventDefault();
bw.addRow();
}).on(l+aS,".k-grid-cancel-changes",function(bz){bz.preventDefault();
bw.cancelChanges();
}).on(l+aS,".k-grid-save-changes",function(bz){bz.preventDefault();
bw.saveChanges();
});
}bu.on(l+aS,".k-grid-excel",function(bz){bz.preventDefault();
bw.saveAsExcel();
});
bu.on(l+aS,".k-grid-pdf",function(bz){bz.preventDefault();
bw.saveAsPDF();
});
}},_toolbarTmpl:function(bu){var by=this,bw,bx,bv="";
if(ao(bu)){for(bw=0,bx=bu.length;
bw<bx;
bw++){bv+=by._createButton(bu[bw]);
}}return bv;
},_createButton:function(bw){var bA=bw.template||y,bx=typeof bw===a9?bw:bw.name||bw.text,bv=F[bx]?F[bx].className:"k-grid-"+(bx||"").replace(/\s/g,""),bz={className:bv,text:bx,imageClass:"",attr:"",iconClass:""},by=this.options.messages.commands,bu;
if(!bx&&!(aw(bw)&&bw.template)){throw new Error("Custom commands should have name specified");
}if(aw(bw)){bw=O(true,{},bw);
if(bw.className&&an(bz.className,bw.className.split(" "))<0){bw.className+=" "+bz.className;
}else{if(bw.className===bj){bw.className=bz.className;
}}if(bx==="edit"&&aw(bw.text)){bw=O(true,{},bw);
bw.text=bw.text.edit;
}if(bw.attr){if(aw(bw.attr)){bw.attr=ba(bw.attr);
}if(typeof bw.attr===a9){bu=bw.attr.match(/class="(.+?)"/);
if(bu&&an(bu[1],bw.className.split(" "))<0){bw.className+=" "+bu[1];
}}}bz=O(true,bz,F[bx],{text:by[bx]},bw);
}else{bz=O(true,bz,F[bx],{text:by[bx]});
}return az.template(bA)(bz);
},_hasFooters:function(){return !!this.footerTemplate||!!this.groupFooterTemplate||(this.footer&&this.footer.length>0)||this.wrapper.find(".k-grid-footer").length>0;
},_groupable:function(){var bu=this;
if(bu._groupableClickHandler){bu.table.add(bu.lockedTable).off(l+aS,bu._groupableClickHandler);
}else{bu._groupableClickHandler=function(bv){var bw=a(this),bx=bw.closest("tr");
if(bw.hasClass("k-i-collapse")){bu.collapseGroup(bx);
}else{bu.expandGroup(bx);
}bv.preventDefault();
bv.stopPropagation();
};
}if(bu._isLocked()){bu.lockedTable.on(l+aS,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",bu._groupableClickHandler);
}else{bu.table.on(l+aS,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",bu._groupableClickHandler);
}bu._attachGroupable();
},_attachGroupable:function(){var bx=this,by=bx.wrapper,bw=bx.options.groupable,bu=aj+"["+az.attr("field")+"]",bv=bx.content?".k-grid-header:first "+bu:"table:first>.k-grid-header "+bu;
if(bw&&bw.enabled!==false){if(!by.has("div.k-grouping-header")[0]){a("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(by);
}if(bx.groupable){bx.groupable.destroy();
}bx.groupable=new bi.Groupable(by,O({},bw,{draggable:bx._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:bx.dataSource,draggableElements:bv,filter:bv,allowDrag:bx.options.reorderable}));
}},_continuousItems:function(bx,bu){if(!this.lockedContent){return;
}var bD=this;
var bw=bD.table.add(bD.lockedTable);
var bz=a(bx,bw[0]);
var bB=a(bx,bw[1]);
var bv=bu?aD(bD.columns).length:1;
var bA=bu?bD.columns.length-bv:1;
var bC=[];
for(var by=0;
by<bz.length;
by+=bv){aW.apply(bC,bz.slice(by,by+bv));
aW.apply(bC,bB.splice(0,bA));
}return bC;
},_selectable:function(){var bB=this,by,bu,bz=[],bx=bB._isLocked(),bA=bB.options.selectable;
if(bA){if(bB.selectable){bB.selectable.destroy();
}bA=az.ui.Selectable.parseOptions(bA);
by=bA.multiple;
bu=bA.cell;
if(bB._hasDetails()){bz[bz.length]=".k-detail-row";
}if(bB.options.groupable||bB._hasFooters()){bz[bz.length]=".k-grouping-row,.k-group-footer";
}bz=bz.join(",");
if(bz!==""){bz=":not("+bz+")";
}var bv=bB.table;
if(bx){bv=bv.add(bB.lockedTable);
}var bw=">"+(bu?a5:"tbody>tr"+bz);
bB.selectable=new az.ui.Selectable(bv,{filter:bw,aria:true,multiple:by,change:function(){bB.trigger(j);
},useAllItems:bx&&by&&bu,relatedTarget:function(bD){if(bu||!bx){return;
}var bF;
var bG=a();
for(var bC=0,bE=bD.length;
bC<bE;
bC++){bF=bB._relatedRow(bD[bC]);
if(an(bF[0],bD)<0){bG=bG.add(bF);
}}return bG;
},continuousItems:function(){return bB._continuousItems(bw,bu);
}});
if(bB.options.navigatable){bv.on("keydown"+aS,function(bD){var bC=bB.current();
var bE=bD.target;
if(bD.keyCode===aA.SPACEBAR&&a.inArray(bE,bv)>-1&&!bC.is(".k-edit-cell,.k-header")&&bC.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){bD.preventDefault();
bD.stopPropagation();
bC=bu?bC:bC.parent();
if(bx&&!bu){bC=bC.add(bB._relatedRow(bC));
}if(by){if(!bD.ctrlKey){bB.selectable.clear();
}else{if(bC.hasClass(a4)){bC.removeClass(a4);
bB.trigger(j);
return;
}}}else{bB.selectable.clear();
}bB.selectable.value(bC);
}});
}}},_clipboard:function(){var bv=this.options;
var bw=bv.selectable;
if(bw&&bv.allowCopy){var bu=this;
if(!bv.navigatable){bu.table.add(bu.lockedTable).attr("tabindex",0).on("mousedown"+aS+" keydown"+aS,".k-detail-cell",function(bx){if(bx.target!==bx.currentTarget){bx.stopImmediatePropagation();
}}).on("mousedown"+aS,aK+">"+aJ,aV(bd,bu));
}bu.copyHandler=aV(bu.copySelection,bu);
bu.updateClipBoardState=function(){if(bu.areaClipBoard){bu.areaClipBoard.val(bu.getTSV()).focus().select();
}};
bu.bind("change",bu.updateClipBoardState);
bu.wrapper.on("keydown",bu.copyHandler);
bu.clearAreaHandler=aV(bu.clearArea,bu);
bu.wrapper.on("keyup",bu.clearAreaHandler);
}},copySelection:function(bu){if((bu instanceof jQuery.Event&&!(bu.ctrlKey||bu.metaKey))||a(bu.target).is("input:visible,textarea:visible")||(window.getSelection&&window.getSelection().toString())||(document.selection&&document.selection.createRange().text)){return;
}if(!this.areaClipBoard){this.areaClipBoard=a("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper);
}this.areaClipBoard.val(this.getTSV()).focus().select();
},getTSV:function(){var bx=this;
var bD=bx.select();
var bw="\t";
var bu=bx.options.allowCopy;
var bA=true;
if(a.isPlainObject(bu)&&bu.delimeter){bw=bu.delimeter;
}var bE="";
if(bD.length){if(bD.eq(0).is("tr")){bD=bD.find("td:not(.k-group-cell)");
}if(bA){bD.filter(":visible");
}var bB=[];
var bv=this.columns.length;
var bz=bx._isLocked()&&aD(bx.columns).length;
var by=true;
a.each(bD,function(bI,bF){bF=a(bF);
var bK=bF.closest("tr");
var bJ=bK.index();
var bG=bF.index();
if(bA){bG-=bF.prevAll(":hidden").length;
}if(bz&&by){by=a.contains(bx.lockedTable[0],bF[0]);
}if(bx._groups()&&by){bG-=bx._groups();
}bG=by?bG:(bG+bz);
if(bv>bG){bv=bG;
}var bH=bF.text();
if(!bB[bJ]){bB[bJ]=[];
}bB[bJ][bG]=bH;
});
var bC=bB.length;
bB=a.each(bB,function(bF,bG){if(bG){bB[bF]=bG.slice(bv);
if(bC>bF){bC=bF;
}}});
a.each(bB.slice(bC),function(bF,bG){if(bG){bE+=bG.join(bw)+"\r\n";
}else{bE+="\r\n";
}});
}return bE;
},clearArea:function(bu){if(this.areaClipBoard&&bu&&bu.target===this.areaClipBoard[0]){if(this.options.navigatable){a(this.current()).closest("table").focus();
}else{this.table.focus();
}}if(this.areaClipBoard){this.areaClipBoard.remove();
this.areaClipBoard=null;
}},_minScreenSupport:function(){var bu=this.hideMinScreenCols();
if(bu){this.minScreenResizeHandler=aV(this.hideMinScreenCols,this);
a(window).on("resize",this.minScreenResizeHandler);
}},hideMinScreenCols:function(){var bw=this.columns,bu=false,bz=(window.innerWidth>0)?window.innerWidth:screen.width;
for(var bx=0;
bx<bw.length;
bx++){var bv=bw[bx];
var by=bv.minScreenWidth;
if(by!==bj&&by!==null){bu=true;
if(by>bz){this.hideColumn(bv);
}else{this.showColumn(bv);
}}}return bu;
},_relatedRow:function(bw){var bv=this.lockedTable;
bw=a(bw);
if(!bv){return bw;
}var bx=bw.closest(this.table.add(this.lockedTable));
var bu=bx.find(">tbody>tr").index(bw);
bx=bx[0]===this.table[0]?bv:this.table;
return bx.find(">tbody>tr").eq(bu);
},clearSelection:function(){var bu=this;
bu.selectable.clear();
bu.trigger(j);
},select:function(bu){var bw=this,bv=bw.selectable;
bu=a(bu);
if(bu.length){if(!bv.options.multiple){bv.clear();
bu=bu.first();
}if(bw._isLocked()){bu=bu.add(bu.map(function(){return bw._relatedRow(this);
}));
}bv.value(bu);
return;
}return bv.value();
},_updateCurrentAttr:function(bv,bx){var bw=a(bv).data("headerId");
a(bv).removeClass(W).removeAttr("aria-describedby").closest("table").removeAttr("aria-activedescendant");
if(bw){bw=bw.replace(this._cellId,"");
a(bv).attr("id",bw);
}else{a(bv).removeAttr("id");
}bx.data("headerId",bx.attr("id")).attr("id",this._cellId).addClass(W).closest("table").attr("aria-activedescendant",this._cellId);
if(!bx.closest("tr").hasClass("k-grouping-row")&&!bx.hasClass("k-header")){var bu=this.columns[this.cellIndex(bx)];
if(bu){bw=bu.headerAttributes.id;
}bx.attr("aria-describedby",bw+" "+this._cellId);
}else{bx.attr("aria-describedby",this._cellId);
}this._current=bx;
},_scrollCurrent:function(){var bu=this._current;
var bz=this.options.scrollable;
if(!bu||!bz){return;
}var bx=bu.parent();
var bB=bx.closest("table").parent();
var bw=bB.is(".k-grid-content-locked,.k-grid-header-locked");
var bv=bB.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap");
var bA=a(this.content).find(">.k-virtual-scrollable-wrap").andSelf().last()[0];
if(bv){if(bz.virtual){var by=Math.max(an(bx[0],this._items(bx.parent())),0);
this._rowVirtualIndex=this.virtualScrollable.itemIndex(by);
this.virtualScrollable.scrollIntoView(bx);
}else{this._scrollTo(this._relatedRow(bx)[0],bA);
}}if(this.lockedContent){this.lockedContent[0].scrollTop=bA.scrollTop;
}if(!bw){this._scrollTo(bu[0],bA);
}},current:function(bv){var bu=this._current;
bv=a(bv);
if(bv.length){if(!bu||bu[0]!==bv[0]){this._updateCurrentAttr(bu,bv);
this._scrollCurrent();
}}return this._current;
},_removeCurrent:function(){if(this._current){this._current.removeClass(W);
this._current=null;
}},_scrollTo:function(by,bv){var bB=by.tagName.toLowerCase();
var bE=bB==="td"||bB==="th";
var bz=by[bE?"offsetLeft":"offsetTop"];
var bA=by[bE?"offsetWidth":"offsetHeight"];
var bx=bv[bE?"scrollLeft":"scrollTop"];
var bw=bv[bE?"clientWidth":"clientHeight"];
var bu=bz+bA;
var bF=0;
var bD=0;
var bC=0;
if(ax&&bE){var bG=a(by).closest("table")[0];
if(h.msie){bD=bG.offsetLeft;
}else{if(h.mozilla){bC=bG.offsetLeft-az.support.scrollbar();
}}}bx=Math.abs(bx+bD-bC);
if(bx>bz){bF=bz;
}else{if(bu>(bx+bw)){if(bA<=bw){bF=(bu-bw);
}else{bF=bz;
}}else{bF=bx;
}}bF=Math.abs(bF+bD)+bC;
bv[bE?"scrollLeft":"scrollTop"]=bF;
},_navigatable:function(){var bx=this;
if(!bx.options.navigatable){return;
}var bu=bx.table.add(bx.lockedTable);
var bv=bx.thead.parent().add(a(">table",bx.lockedHeader));
var bw=bu;
if(bx.options.scrollable){bw=bw.add(bv);
bv.attr(bc,-1);
}this._navigatableTables=bw;
bw.off("mousedown"+aS+" focus"+aS+" focusout"+aS+" keydown"+aS);
bv.on("keydown"+aS,aV(bx._openHeaderMenu,bx)).find("a.k-link").attr("tabIndex",-1);
bu.attr(bc,aG.max(bu.attr(bc)||0,0)).on("mousedown"+aS+" keydown"+aS,".k-detail-cell",function(by){if(by.target!==by.currentTarget){by.stopImmediatePropagation();
}});
bw.on((az.support.touch?"touchstart"+aS:"mousedown"+aS),aK+">"+aJ,aV(bd,bx)).on("focus"+aS,aV(bx._tableFocus,bx)).on("focusout"+aS,aV(bx._tableBlur,bx)).on("keydown"+aS,aV(bx._tableKeyDown,bx));
},_openHeaderMenu:function(bu){if(bu.altKey&&bu.keyCode==aA.DOWN){this.current().find(".k-grid-filter, .k-header-column-menu").click();
bu.stopImmediatePropagation();
}},_setTabIndex:function(bu){this._navigatableTables.attr(bc,-1);
bu.attr(bc,0);
},_tableFocus:function(bv){if(az.support.touch){return;
}var bu=this.current();
var bw=a(bv.currentTarget);
if(bu&&bu.is(":visible")){bu.addClass(W);
}else{this.current(bw.find(T));
}this._setTabIndex(bw);
},_tableBlur:function(){var bu=this.current();
if(bu){bu.removeClass(W);
}},_tableKeyDown:function(bw){var bv=this.current();
var by=this.virtualScrollable&&this.virtualScrollable.fetching();
var bz=a(bw.target);
var bu=!bw.isDefaultPrevented()&&!bz.is(":button,a,:input,a>.k-icon");
if(by){bw.preventDefault();
return;
}bv=bv?bv:a(this.lockedTable).add(this.table).find(T);
if(!bv.length){return;
}var bx=false;
if(bu&&bw.keyCode==aA.UP){bx=this._moveUp(bv);
}if(bu&&bw.keyCode==aA.DOWN){bx=this._moveDown(bv);
}if(bu&&bw.keyCode==(ax?aA.LEFT:aA.RIGHT)){bx=this._moveRight(bv,bw.altKey);
}if(bu&&bw.keyCode==(ax?aA.RIGHT:aA.LEFT)){bx=this._moveLeft(bv,bw.altKey);
}if(bu&&bw.keyCode==aA.PAGEDOWN){bx=this._handlePageDown();
}if(bu&&bw.keyCode==aA.PAGEUP){bx=this._handlePageUp();
}if(bw.keyCode==aA.ENTER||bw.keyCode==aA.F2){bx=this._handleEnterKey(bv,bw.currentTarget,bz);
}if(bw.keyCode==aA.ESC){bx=this._handleEscKey(bv,bw.currentTarget);
}if(bw.keyCode==aA.TAB){bx=this._handleTabKey(bv,bw.currentTarget,bw.shiftKey);
}if(bx){bw.preventDefault();
bw.stopPropagation();
}},_moveLeft:function(bw,bu){var by,bx;
var bz=bw.parent();
var bv=bz.parent();
if(bu){this.collapseRow(bz);
}else{bx=bv.find(aK).index(bz);
by=this._prevHorizontalCell(bv,bw,bx);
if(!by[0]){bv=this._horizontalContainer(bv);
by=this._prevHorizontalCell(bv,bw,bx);
if(by[0]!==bw[0]){X(bv.parent(),true);
}}this.current(by);
}return true;
},_moveRight:function(bw,bu){var by,bx;
var bz=bw.parent();
var bv=bz.parent();
if(bu){this.expandRow(bz);
}else{bx=bv.find(aK).index(bz);
by=this._nextHorizontalCell(bv,bw,bx);
if(!by[0]){bv=this._horizontalContainer(bv,true);
by=this._nextHorizontalCell(bv,bw,bx);
if(by[0]!==bw[0]){X(bv.parent(),true);
}}this.current(by);
}return true;
},_moveUp:function(bv){var bu=bv.parent().parent();
var bw=this._prevVerticalCell(bu,bv);
if(!bw[0]){bu=this._verticalContainer(bu,true);
bw=this._prevVerticalCell(bu,bv);
if(bw[0]){X(bu.parent(),true);
}}this.current(bw);
return true;
},_moveDown:function(bv){var bu=bv.parent().parent();
var bw=this._nextVerticalCell(bu,bv);
if(!bw[0]){bu=this._verticalContainer(bu);
bw=this._nextVerticalCell(bu,bv);
if(bw[0]){X(bu.parent(),true);
}}this.current(bw);
return true;
},_handlePageDown:function(){if(!this.options.pageable){return false;
}this.dataSource.page(this.dataSource.page()+1);
return true;
},_handlePageUp:function(){if(!this.options.pageable){return false;
}this.dataSource.page(this.dataSource.page()-1);
return true;
},_handleTabKey:function(bv,bw,by){var bx=this.options.editable&&this._editMode()=="incell";
var bu;
if(!bx||bv.is("th")){return false;
}bu=a(b()).closest(".k-edit-cell");
if(bu[0]&&bu[0]!==bv[0]){bv=bu;
}bu=this._tabNext(bv,bw,by);
if(bu.length){this._handleEditing(bv,bu,bu.closest("table"));
return true;
}return false;
},_handleEscKey:function(bv,bx){var bu=b();
var by=this._editMode()=="incell";
if(!av(bv)){if(bv.has(bu).length){X(bx,true);
return true;
}return false;
}if(by){this.closeCell(true);
}else{var bw=a(bv).parent().index();
if(bu){bu.blur();
}this.cancelRow();
if(bw>=0){this.current(this.items().eq(bw).children(aJ).first());
}}if(h.msie&&h.version<9){document.body.focus();
}X(bx,true);
return true;
},_toggleCurrent:function(bu){var bv=bu.parent();
if(bv.is(".k-master-row,.k-grouping-row")){bv.find(".k-icon:first").click();
return true;
}return false;
},_handleEnterKey:function(bv,bw,bz){var bx=this.options.editable;
var bu=bz.closest("[role=gridcell]");
if(!bz.is("table")&&!a.contains(bv[0],bz[0])){bv=bu;
}if(bv.is("th")){bv.find(".k-link").click();
return true;
}if(!bx&&this._toggleCurrent(bv)){return true;
}var by=bv.find(":kendoFocusable:first");
if(by[0]&&!bv.hasClass("k-edit-cell")&&bv.hasClass("k-state-focused")){by.focus();
return true;
}if(bx&&!bz.is(":button,.k-button,textarea")){if(!bu[0]){bu=bv;
}this._handleEditing(bu,false,bw);
return true;
}return false;
},_nextHorizontalCell:function(bA,bv,bx){var bu=bv.nextAll(C);
if(!bu.length){var bz=bA.find(aK);
var by=bz.index(bv.parent());
if(by==-1){if(bv.hasClass("k-header")){var bw=[];
aF([aD(this.columns)[0]],k(bz.eq(0).children().first()),bw,0,0);
if(bw[bx]){return bw[bx][0];
}return bv;
}if(bv.parent().hasClass("k-filter-row")){return bz.last().children(C).first();
}return bz.eq(bx).children(C).first();
}}return bu.first();
},_prevHorizontalCell:function(bB,bw,by){var bu=bw.prevAll(C);
if(!bu.length){var bA=bB.find(aK);
var bz=bA.index(bw.parent());
if(bz==-1){if(bw.hasClass("k-header")){var bx=[];
var bv=aD(this.columns);
aF([bv[bv.length-1]],k(bA.eq(0).children().last()),bx,0,0);
if(bx[by]){return bx[by][0];
}return bw;
}if(bw.parent().hasClass("k-filter-row")){return bA.last().children(C).last();
}return bA.eq(by).children(C).last();
}}return bu.first();
},_currentDataIndex:function(bx,bu){var bv=bu.attr("data-index");
if(!bv){return bj;
}var bw=aD(this.columns).length;
if(bw&&!bx.closest("div").hasClass("k-grid-content-locked")[0]){return bv-bw;
}return bv;
},_prevVerticalCell:function(bv,bw){var bu;
var by=bw.parent();
var bA=bv.children(aK);
var bz=bA.index(by);
var bx=this._currentDataIndex(bv,bw);
if(bx||bw.hasClass("k-header")){bu=aT(bw);
return bu.eq(bu.length-2);
}bx=by.children(C).index(bw);
if(by.hasClass("k-filter-row")){return aC(bv).eq(bx);
}if(bz==-1){by=bv.find(".k-filter-row");
if(!by[0]){return aC(bv).eq(bx);
}}else{by=bz===0?a():bA.eq(bz-1);
}bu=by.children(C);
if(bu.length>bx){return bu.eq(bx);
}return bu.eq(0);
},_nextVerticalCell:function(bv,bw){var bu;
var by=bw.parent();
var bA=bv.children(aK);
var bz=bA.index(by);
var bx=this._currentDataIndex(bv,bw);
if(bz!=-1&&bx===bj&&bw.hasClass("k-header")){return k(bw).eq(1);
}bx=bx?parseInt(bx,10):by.children(C).index(bw);
if(bz==-1){by=bA.eq(0);
}else{by=bA.eq(bz+bw[0].rowSpan);
}bu=by.children(C);
if(bu.length>bx){return bu.eq(bx);
}return bu.eq(0);
},_verticalContainer:function(bu,bz){var by=bu.parent();
var bw=this._navigatableTables.length;
var bx=Math.floor(bw/2);
var bv=an(by[0],this._navigatableTables);
if(bz){bx*=-1;
}bv+=bx;
if(bv>=0||bv<bw){by=this._navigatableTables.eq(bv);
}return by.find(bz?"thead":"tbody");
},_horizontalContainer:function(bu,bx){var bw=this._navigatableTables.length;
if(bw<=2){return bu;
}var by=bu.parent();
var bv=an(by[0],this._navigatableTables);
bv+=bx?1:-1;
if(bx&&(bv==2||bv==bw)){return bu;
}if(!bx&&(bv==1||bv<0)){return bu;
}return this._navigatableTables.eq(bv).find("thead, tbody");
},_tabNext:function(bv,bw,bu){var by=true;
var bx=bu?bv.prevAll(C+":first"):bv.nextAll(":visible:first");
if(!bx.length){bx=bv.parent();
if(this.lockedTable){by=(bu&&bw==this.lockedTable[0])||(!bu&&bw==this.table[0]);
bx=this._relatedRow(bx);
}if(by){bx=bx[bu?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first");
}bx=bx.children(C+(bu?":last":":first"));
}return bx;
},_handleEditing:function(bv,bB,bD){var bE=this,bu=a(b()),bA=bE._editMode(),bz=h.msie,bC=bz&&h.version<9,bw=bE._editContainer,bx,by;
bD=a(bD);
if(bA=="incell"){by=bv.hasClass("k-edit-cell");
}else{by=bv.parent().hasClass("k-grid-edit-row");
}if(bE.editable){if(a.contains(bw[0],bu[0])){if(h.opera||bC){bu.change().triggerHandler("blur");
}else{bu.blur();
if(bz){bu.blur();
}}}if(!bE.editable){X(bD);
return;
}if(bE.editable.end()){if(bA=="incell"){bE.closeCell();
}else{bE.saveRow();
by=true;
}}else{if(bA=="incell"){bE.current(bw);
}else{bE.current(bw.children().filter(C).first());
}bx=bw.find(":kendoFocusable:first")[0];
if(bx){bx.focus();
}return;
}}if(bB){bE.current(bB);
}if(bC){document.body.focus();
}X(bD,true);
if((!by&&!bB)||bB){if(bA=="incell"){bE.editCell(bE.current());
}else{bE.editRow(bE.current().parent());
}}},_wrapper:function(){var bw=this,bv=bw.table,bu=bw.options.height,bx=bw.element;
if(!bx.is("div")){bx=bx.wrap("<div/>").parent();
}bw.wrapper=bx.addClass("k-grid k-widget");
if(bu){bw.wrapper.css(ak,bu);
bv.css(ak,"auto");
}bw._initMobile();
},_initMobile:function(){var bv=this.options;
var bw=this;
this._isMobile=(bv.mobile===true&&az.support.mobileOS)||bv.mobile==="phone"||bv.mobile==="tablet";
if(this._isMobile){var bu=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+az.ns+'stretch="true" data-'+az.ns+'role="view" data-'+az.ns+'init-widgets="false"></div>').parent();
this.pane=az.mobile.ui.Pane.wrap(bu);
this.view=this.pane.view();
this._actionSheetPopupOptions=a(document.documentElement).hasClass("km-root")?{modal:false}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"};
if(bv.height){this.pane.element.parent().css(ak,bv.height);
}this._editAnimation="slide";
this.view.bind("show",function(){if(bw._isLocked()){bw._updateTablesWidth();
bw._applyLockedContainersWidth();
bw._syncLockedContentHeight();
bw._syncLockedHeaderHeight();
bw._syncLockedFooterHeight();
}});
}},_tbody:function(){var bw=this,bu=bw.table,bv;
bv=bu.find(">tbody");
if(!bv.length){bv=a("<tbody/>").appendTo(bu);
}bw.tbody=bv.attr("role","rowgroup");
},_scrollable:function(){var bB=this,bw,bA,bx=bB.options,by=bx.scrollable,bv=by!==true&&by.virtual&&!bB.virtualScrollable,bz=!az.support.kineticScrollNeeded||bv?az.support.scrollbar():0;
if(by){bw=bB.wrapper.children(".k-grid-header");
if(!bw[0]){bw=a('<div class="k-grid-header" />').insertBefore(bB.table);
}bw.css((ax?"padding-left":"padding-right"),by.virtual?bz+1:bz);
bA=a('<table role="grid" />');
if(at){bA.attr("cellspacing",0);
}bA.width(bB.table[0].style.width);
bA.append(bB.thead);
bw.empty().append(a('<div class="k-grid-header-wrap k-auto-scrollable" />').append(bA));
bB.content=bB.table.parent();
if(bB.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")){bB.content=bB.content.parent();
}if(!bB.content.is(".k-grid-content, .k-virtual-scrollable-wrap")){bB.content=bB.table.wrap('<div class="k-grid-content" />').parent();
}if(bv){bB.virtualScrollable=new bn(bB.content,{dataSource:bB.dataSource,itemHeight:function(){return bB._averageRowHeight();
}});
}bB.scrollables=bw.children(".k-grid-header-wrap").add(bB.content);
var bu=bB.wrapper.find(".k-grid-footer");
if(bu.length){bB.scrollables=bB.scrollables.add(bu.children(".k-grid-footer-wrap"));
}if(by.virtual){bB.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+aS).bind("scroll"+aS,function(){bB.scrollables.scrollLeft(this.scrollLeft);
if(bB.lockedContent){bB.lockedContent[0].scrollTop=this.scrollTop;
}});
}else{bB.scrollables.unbind("scroll"+aS).bind("scroll"+aS,function(bD){bB.scrollables.not(bD.currentTarget).scrollLeft(this.scrollLeft);
if(bB.lockedContent){bB.lockedContent[0].scrollTop=this.scrollTop;
}});
var bC=bB.content.data("kendoTouchScroller");
if(bC){bC.destroy();
}bC=az.touchScroller(bB.content);
if(bC&&bC.movable){bB.touchScroller=bC;
bC.movable.bind("change",function(bD){bB.scrollables.scrollLeft(-bD.sender.x);
if(bB.lockedContent){bB.lockedContent.scrollTop(-bD.sender.y);
}});
bB.one(D,function(bD){bD.sender.wrapper.addClass("k-grid-backface");
});
}}}},_renderNoRecordsContent:function(){var bv=this;
if(bv.options.noRecords){var bu=bv.table.parent().children("."+aO);
if(bu.length){bu.remove();
}if(!bv.dataSource||!bv.dataSource.view().length){a(bv.noRecordsTemplate({})).insertAfter(bv.table);
}}},_setContentWidth:function(by){var bz=this,bw="k-grid-content-expander",bv='<div class="'+bw+'"></div>',bx=bz.resizable,bu;
if(bz.options.scrollable&&bz.wrapper.is(":visible")){bu=bz.table.parent().children("."+bw);
bz._setContentWidthHandler=aV(bz._setContentWidth,bz);
if(!bz.dataSource||!bz.dataSource.view().length){if(!bu[0]){bu=a(bv).appendTo(bz.table.parent());
if(bx){bx.bind("resize",bz._setContentWidthHandler);
}}if(bz.thead){bu.width(bz.thead.width());
if(by){bz.content.scrollLeft(by);
}}}else{if(bu[0]){bu.remove();
if(bx){bx.unbind("resize",bz._setContentWidthHandler);
}}}bz._applyLockedContainersWidth();
}},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var by=this.thead.parent(),bz=by.parent(),bv=this.wrapper[0].clientWidth,bx=this._groups(),bC=az.support.scrollbar(),bu=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),bA=by.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),bD=v(bu),bB=v(bA),bw;
if(bx>0){bD+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*bx;
}if(bD>=bv){bD=bv-3*bC;
}this.lockedHeader.add(this.lockedContent).width(bD);
bz[0].style.width=bz.parent().width()-bD-2+"px";
by.add(this.table).width(bB);
if(this.virtualScrollable){bv-=bC;
}this.content[0].style.width=bv-bD-2+"px";
if(this.lockedFooter&&this.lockedFooter.length){this.lockedFooter.width(bD);
bw=this.footer.find(".k-grid-footer-wrap");
bw[0].style.width=bz[0].clientWidth+"px";
bw.children().first().width(bB);
}}},_setContentHeight:function(){var bz=this,bx=bz.options,bv=bz.wrapper.innerHeight(),bu=bz.wrapper.children(".k-grid-header"),by=az.support.scrollbar();
if(bx.scrollable&&bz.wrapper.is(":visible")){bv-=bu.outerHeight();
if(bz.pager){bv-=bz.pager.element.outerHeight();
}if(bx.groupable){bv-=bz.wrapper.children(".k-grouping-header").outerHeight();
}if(bx.toolbar){bv-=bz.wrapper.children(".k-grid-toolbar").outerHeight();
}if(bz.footerTemplate){bv-=bz.wrapper.children(".k-grid-footer").outerHeight();
}var bw=function(bA){var bB,bC;
if(bA[0].style.height){return true;
}else{bB=bA.height();
}bA.height("auto");
bC=bA.height();
if(bB!=bC){bA.height("");
return true;
}bA.height("");
return false;
};
if(bw(bz.wrapper)){if(bv>by*2){if(bz.lockedContent){by=bz.table[0].offsetWidth>bz.table.parent()[0].clientWidth?by:0;
bz.lockedContent.height(bv-by);
}bz.content.height(bv);
}else{bz.content.height(by*2+1);
}}}},_averageRowHeight:function(){var bx=this,bv=bx._items(bx.tbody).length,bw=bx._rowHeight;
if(bv===0){return bw;
}if(!bx._rowHeight){bx._rowHeight=bw=bx.table.outerHeight()/bv;
bx._sum=bw;
bx._measures=1;
}var bu=bx.table.outerHeight()/bv;
if(bw!==bu){bx._measures++;
bx._sum+=bu;
bx._rowHeight=bx._sum/bx._measures;
}return bw;
},_dataSource:function(){var bx=this,bv=bx.options,bw,bu=bv.dataSource;
bu=ao(bu)?{data:bu}:bu;
if(aw(bu)){O(bu,{table:bx.table,fields:bx.columns});
bw=bv.pageable;
if(aw(bw)&&bw.pageSize!==bj){bu.pageSize=bw.pageSize;
}}if(bx.dataSource&&bx._refreshHandler){bx.dataSource.unbind(j,bx._refreshHandler).unbind(aU,bx._progressHandler).unbind(N,bx._errorHandler);
}else{bx._refreshHandler=aV(bx.refresh,bx);
bx._progressHandler=aV(bx._requestStart,bx);
bx._errorHandler=aV(bx._error,bx);
}bx.dataSource=E.create(bu).bind(j,bx._refreshHandler).bind(aU,bx._progressHandler).bind(N,bx._errorHandler);
},_error:function(){this._progress(false);
},_requestStart:function(){this._progress(true);
},_modelChange:function(by){var bK=this,bJ=bK.tbody,bD=by.model,bG=bK.tbody.find("tr["+az.attr("uid")+"="+bD.uid+"]"),bF,bv,bx,bA=bG.hasClass("k-alt"),bL,bz=bK._items(bJ).index(bG),bB=bK.lockedContent,bH,bI,bw,bE,bC;
if(bB){bF=bK._relatedRow(bG);
}if(bG.add(bF).children(".k-edit-cell").length&&!bK.options.rowTemplate){bG.add(bF).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){bv=a(this);
bx=aB(bK.columns)[bK.cellIndex(bv)];
if(bx.field===by.field){if(!bv.hasClass("k-edit-cell")){bK._displayCell(bv,bx,bD);
a('<span class="k-dirty"/>').prependTo(bv);
}else{bv.addClass("k-dirty-cell");
}}});
}else{if(!bG.hasClass("k-grid-edit-row")){bI=a().add(bG);
if(bB){bL=(bA?bK.lockedAltRowTemplate:bK.lockedRowTemplate)(bD);
bI=bI.add(bF);
bF.replaceWith(bL);
}bK.angular("cleanup",function(){return{elements:bI.get()};
});
bL=(bA?bK.altRowTemplate:bK.rowTemplate)(bD);
bG.replaceWith(bL);
bL=bK._items(bJ).eq(bz);
var bu=[{dataItem:bD}];
if(bB){bG=bG.add(bF);
bF=bK._relatedRow(bL)[0];
e(bL[0],bF);
bL=bL.add(bF);
bu.push({dataItem:bD});
}bK.angular("compile",function(){return{elements:bL.get(),data:bu};
});
bH=bK.options.selectable;
if(bH&&bG.hasClass("k-state-selected")){bK.select(bL);
}bE=bI.children(":not(.k-group-cell,.k-hierarchy-cell)");
bw=bL.children(":not(.k-group-cell,.k-hierarchy-cell)");
for(bz=0,bC=bK.columns.length;
bz<bC;
bz++){bx=bK.columns[bz];
bv=bw.eq(bz);
if(bH&&bE.eq(bz).hasClass("k-state-selected")){bv.addClass("k-state-selected");
}if(bx.field===by.field){a('<span class="k-dirty"/>').prependTo(bv);
}}bK.trigger("itemChange",{item:bL,data:bD,ns:bi});
}}},_pageable:function(){var bv=this,bw,bu=bv.options.pageable;
if(bu){bw=bv.wrapper.children("div.k-grid-pager");
if(!bw.length){bw=a('<div class="k-pager-wrap k-grid-pager"/>').appendTo(bv.wrapper);
}if(bv.pager){bv.pager.destroy();
}if(typeof bu==="object"&&bu instanceof az.ui.Pager){bv.pager=bu;
}else{bv.pager=new az.ui.Pager(bw,O({},bu,{dataSource:bv.dataSource}));
}}},_footer:function(){var bC=this,bu=bC.dataSource.aggregates(),bz="",bw=bC.footerTemplate,bB=bC.options,bx,bv=bC.footer||bC.wrapper.find(".k-grid-footer");
if(bw){bz=a(bC._wrapFooter(bw(bu)));
if(bv.length){var bD=bz;
bC.angular("cleanup",function(){return{elements:bv.get()};
});
bv.replaceWith(bD);
bv=bC.footer=bD;
}else{if(bB.scrollable){bv=bC.footer=bB.pageable?bz.insertBefore(bC.wrapper.children("div.k-grid-pager")):bz.appendTo(bC.wrapper);
}else{bv=bC.footer=bz.insertBefore(bC.tbody);
}}bC.angular("compile",function(){return{elements:bv.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:aE(bC.columns,function(bE){return{column:bE,aggregate:bu[bE.field]};
})};
});
}else{if(bv&&!bC.footer){bC.footer=bv;
}}if(bv.length){if(bB.scrollable){bx=bv.attr("tabindex",-1).children(".k-grid-footer-wrap");
bC.scrollables=bC.scrollables.filter(function(){return !a(this).is(".k-grid-footer-wrap");
}).add(bx);
}if(bC._footerWidth){bv.find("table").css("width",bC._footerWidth);
}if(bx){var bA=bC.content.scrollLeft();
var by=bB.scrollable!==true&&bB.scrollable.virtual&&!bC.virtualScrollable;
if(by){bA=bC.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft();
}bx.scrollLeft(bA);
}}if(bC.lockedContent){bC._appendLockedColumnFooter();
bC._applyLockedContainersWidth();
bC._syncLockedFooterHeight();
}},_wrapFooter:function(bu){var bx=this,bv="",bw=!az.support.mobileOS?az.support.scrollbar():0;
if(bx.options.scrollable){bv=a('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(at?' cellspacing="0"':"")+"><tbody>"+bu+"</tbody></table></div></div>");
bx._appendCols(bv.find("table"));
bv.css((ax?"padding-left":"padding-right"),bw);
return bv;
}return'<tfoot class="k-grid-footer">'+bu+"</tfoot>";
},_columnMenu:function(){var bL=this,bH,bA=aB(bL.columns),by,bJ=bL.options,bz=bJ.columnMenu,bI,bK,bB,bw,bC=ac(bL.columns,function(bM){return bM.columns!==bj;
}).length>0,bF=this._isMobile,bE=function(bM){bL.trigger(o,{field:bM.field,container:bM.container});
},bx=function(bM){X(bM.closest("table"),true);
},bu=bJ.$angular;
if(bz){if(typeof bz=="boolean"){bz={};
}bw=aC(bL.thead);
for(var bD=0,bG=bw.length;
bD<bG;
bD++){by=bA[bD];
var bv=bw.eq(bD);
if(!by.command&&(by.field||bv.attr("data-"+az.ns+"field"))){bH=bv.data("kendoColumnMenu");
if(bH){bH.destroy();
}bK=by.sortable!==false&&bz.sortable!==false&&bJ.sortable!==false?O({},bJ.sortable,{compare:(by.sortable||{}).compare}):false;
bB=bJ.filterable&&by.filterable!==false&&bz.filterable!==false?O({pane:bL.pane},bJ.filterable,by.filterable):false;
if(by.filterable&&by.filterable.dataSource){bB.forceUnique=false;
bB.checkSource=by.filterable.dataSource;
}if(bB){bB.format=by.format;
}bI={dataSource:bL.dataSource,values:by.values,columns:bz.columns,sortable:bK,filterable:bB,messages:bz.messages,owner:bL,closeCallback:bx,init:bE,pane:bL.pane,filter:bF?":not(.k-column-active)":"",lockedColumns:!bC&&by.lockable!==false&&aD(bA).length>0};
if(bu){bI.$angular=bu;
}bv.kendoColumnMenu(bI);
}}}},_headerCells:function(){return this.thead.find("th").filter(function(){var bu=a(this);
return !bu.hasClass("k-group-cell")&&!bu.hasClass("k-hierarchy-cell");
});
},_filterable:function(){var bF=this,by=aB(bF.columns),bB,bv,bu,bA=function(bG){bF.trigger(P,{field:bG.field,container:bG.container});
},bw=function(bG){X(bG.closest("table"),true);
},bz=bF.options.filterable;
if(bz&&typeof bz.mode==a9&&bz.mode.indexOf("menu")==-1){bz=false;
}if(bz&&!bF.options.columnMenu){bv=aC(bF.thead);
for(var bC=0,bD=bv.length;
bC<bD;
bC++){bu=bv.eq(bC);
if(by[bC].filterable!==false&&!by[bC].command&&(by[bC].field||bu.attr("data-"+az.ns+"field"))){bB=bu.data("kendoFilterMenu");
if(bB){bB.destroy();
}bB=bu.data("kendoFilterMultiCheck");
if(bB){bB.destroy();
}var bx=by[bC].filterable;
var bE=O({},bz,bx,{dataSource:bF.dataSource,values:by[bC].values,format:by[bC].format,closeCallback:bw,title:by[bC].title||by[bC].field,init:bA,pane:bF.pane});
if(bx&&bx.messages){bE.messages=O(true,{},bz.messages,bx.messages);
}if(bx&&bx.dataSource){bE.forceUnique=false;
bE.checkSource=bx.dataSource;
}if(bx&&bx.multi){bu.kendoFilterMultiCheck(bE);
}else{bu.kendoFilterMenu(bE);
}}}}},_filterRow:function(){var bG=this;
if(!bG._hasFilterRow()){return;
}var bw=aB(bG.columns),bz=bG.options.filterable,bD=bG.thead.find(".k-filter-row");
this._updateHeader(this.dataSource.group().length);
for(var bA=0;
bA<bw.length;
bA++){var bE,bv=bw[bA],bC=bG.options.filterable.operators,bx=false,bF=a("<th/>"),by=bv.field;
if(bv.hidden){bF.hide();
}bD.append(bF);
if(by&&bv.filterable!==false){var bu=bv.filterable&&bv.filterable.cell||{};
bE=bG.options.dataSource;
if(bE instanceof E){bE=bG.options.dataSource.options;
}var bB=O(true,{},bz.messages);
if(bv.filterable){O(true,bB,bv.filterable.messages);
}if(bu.enabled===false){bF.html("&nbsp;");
continue;
}if(bu.dataSource){bE=bu.dataSource;
bx=true;
}if(bv.filterable&&bv.filterable.operators){bC=bv.filterable.operators;
}a("<span/>").attr(az.attr("field"),by).kendoFilterCell({dataSource:bG.dataSource,suggestDataSource:bE,customDataSource:bx,field:by,messages:bB,values:bv.values,template:bu.template,delay:bu.delay,inputWidth:bu.inputWidth,suggestionOperator:bu.suggestionOperator,minLength:bu.minLength,dataTextField:bu.dataTextField,operator:bu.operator,operators:bC,showOperators:bu.showOperators}).appendTo(bF);
}else{bF.html("&nbsp;");
}}},_sortable:function(){var bC=this,bx=aB(bC.columns),bw,bB,bu,bA=bC.options.sortable;
if(bA){var bv=aC(bC.thead);
for(var by=0,bz=bv.length;
by<bz;
by++){bw=bx[by];
if(bw.sortable!==false&&!bw.command&&bw.field){bu=bv.eq(by);
bB=bu.data("kendoColumnSorter");
if(bB){bB.destroy();
}bu.attr("data-"+az.ns+"field",bw.field).kendoColumnSorter(O({},bA,bw.sortable,{dataSource:bC.dataSource,aria:true,filter:":not(.k-column-active)"}));
}}bv=null;
}},_columns:function(bv){var bB=this,bA=bB.table,bx,bu=bA.find("col"),bz,bw=bB.options.dataSource;
bv=bv.length?bv:aE(bA.find("th"),function(bI,bF){bI=a(bI);
var bH=bI.attr(az.attr("sortable")),bD=bI.attr(az.attr("filterable")),bK=bI.attr(az.attr("type")),bE=bI.attr(az.attr("groupable")),bC=bI.attr(az.attr("field")),bJ=bI.attr(az.attr("title")),bG=bI.attr(az.attr("menu"));
if(!bC){bC=bI.text().replace(/\s|[^A-z0-9]/g,"");
}return{field:bC,type:bK,title:bJ,sortable:bH!=="false",filterable:bD!=="false",groupable:bE!=="false",menu:bG,template:bI.attr(az.attr("template")),width:bu.eq(bF).css("width")};
});
bx=!(bB.table.find("tbody tr").length>0&&(!bw||!bw.transport));
if(bB.options.scrollable){var by=bv;
bz=aD(bv);
bv=aM(bv);
if(bz.length>0&&bv.length===0){throw new Error("There should be at least one non locked column");
}aR(bB.element.find("tr:has(th):first"),by);
bv=bz.concat(bv);
}bB.columns=aQ(bv,bx);
},_groups:function(){var bu=this.dataSource.group();
return bu?bu.length:0;
},_tmpl:function(bC,bx,bu,bE){var bH=this,bD=O({},az.Template,bH.options.templateSettings),bA,bB=bx.length,bG,bF={storage:{},count:0},bw,bI,bz=bH._hasDetails(),bv=[],by=bH._groups();
if(!bC){bC="<tr";
if(bu){bv.push("k-alt");
}if(bz){bv.push("k-master-row");
}if(bv.length){bC+=' class="'+bv.join(" ")+'"';
}if(bB){bC+=" "+az.attr("uid")+'="#='+az.expr("uid",bD.paramName)+'#"';
}bC+=" role='row'>";
if(by>0&&!bE){bC+=ae(by);
}if(bz){bC+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>';
}for(bA=0;
bA<bB;
bA++){bw=bx[bA];
bG=bw.template;
bI=typeof bG;
bC+="<td"+ba(bw.attributes)+" role='gridcell'>";
bC+=bH._cellTmpl(bw,bF);
bC+="</td>";
}bC+="</tr>";
}bC=az.template(bC,bD);
if(bF.count>0){return aV(bC,bF.storage);
}return bC;
},_headerCellText:function(bu){var by=this,bv=O({},az.Template,by.options.templateSettings),bw=bu.headerTemplate,bz=typeof(bw),bx=bu.title||bu.field||"";
if(bz===aa){bx=az.template(bw,bv)({});
}else{if(bz===a9){bx=bw;
}}return bx;
},_cellTmpl:function(bu,bD){var bF=this,bC=O({},az.Template,bF.options.templateSettings),bE=bu.template,bB=bC.paramName,bw=bu.field,by="",bz,bA,bx=bu.format,bG=typeof bE,bv=bu.values;
if(bu.command){if(ao(bu.command)){for(bz=0,bA=bu.command.length;
bz<bA;
bz++){by+=bF._createButton(bu.command[bz]);
}return by.replace(bg,"\\#");
}return bF._createButton(bu.command).replace(bg,"\\#");
}if(bG===aa){bD.storage["tmpl"+bD.count]=bE;
by+="#=this.tmpl"+bD.count+"("+bB+")#";
bD.count++;
}else{if(bG===a9){by+=bE;
}else{if(bv&&bv.length&&aw(bv[0])&&"value" in bv[0]&&bw){by+="#var v ="+az.stringify(A(bv)).replace(bg,"\\#")+"#";
by+="#var f = v[";
if(!bC.useWithBlock){by+=bB+".";
}by+=bw+"]#";
by+="${f != null ? f : ''}";
}else{by+=bu.encoded?"#:":"#=";
if(bx){by+='kendo.format("'+bx.replace(Z,"\\$1")+'",';
}if(bw){bw=az.expr(bw,bB);
by+=bw+"==null?'':"+bw;
}else{by+="''";
}if(bx){by+=")";
}by+="#";
}}}return by;
},_templates:function(){var bC=this,bB=bC.options,by=bC.dataSource,bA=by.group(),bz=bC.footer||bC.wrapper.find(".k-grid-footer"),bu=by.aggregate(),bv=aB(bC.columns),bx=aB(aD(bC.columns)),bw=bB.scrollable?aB(aM(bC.columns)):bv;
if(bB.scrollable&&bx.length){if(bB.rowTemplate||bB.altRowTemplate){throw new Error("Having both row template and locked columns is not supported");
}bC.rowTemplate=bC._tmpl(bB.rowTemplate,bw,false,true);
bC.altRowTemplate=bC._tmpl(bB.altRowTemplate||bB.rowTemplate,bw,true,true);
bC.lockedRowTemplate=bC._tmpl(bB.rowTemplate,bx);
bC.lockedAltRowTemplate=bC._tmpl(bB.altRowTemplate||bB.rowTemplate,bx,true);
}else{bC.rowTemplate=bC._tmpl(bB.rowTemplate,bw);
bC.altRowTemplate=bC._tmpl(bB.altRowTemplate||bB.rowTemplate,bw,true);
}if(bC._hasDetails()){bC.detailTemplate=bC._detailTmpl(bB.detailTemplate||"");
}if((bC._group&&!aq(bu))||(!aq(bu)&&!bz.length)||ac(bv,function(bD){return bD.footerTemplate;
}).length){bC.footerTemplate=bC._footerTmpl(bv,bu,"footerTemplate","k-footer-template");
}if(bA&&ac(bv,function(bD){return bD.groupFooterTemplate;
}).length){bu=a.map(bA,function(bD){return bD.aggregates;
});
bC.groupFooterTemplate=bC._footerTmpl(bw,bu,"groupFooterTemplate","k-group-footer",bx.length);
if(bB.scrollable&&bx.length){bC.lockedGroupFooterTemplate=bC._footerTmpl(bx,bu,"groupFooterTemplate","k-group-footer");
}}if(bC.options.noRecords){bC.noRecordsTemplate=bC._noRecordsTmpl();
}},_noRecordsTmpl:function(){var bD='<div class="{0}">{1}</div>';
var bu='<div class="k-grid-norecords-template"{1}>{0}</div>';
var bx=(this.options.scrollable&&!this.wrapper[0].style.height)?' style="margin:0 auto;position:static;"':"";
var bz={storage:{},count:0};
var by=a.extend({},az.Template,this.options.templateSettings);
var bw=by.paramName;
var bA;
var bv="";
var bC;
var bB;
if(this.options.noRecords.template){bA=this.options.noRecords.template;
}else{bA=az.format(bu,this.options.messages.noRecords,bx);
}bC=typeof bA;
if(bC==="function"){bz.storage["tmpl"+bz.count]=bA;
bv+="#=this.tmpl"+bz.count+"("+bw+")#";
bz.count++;
}else{if(bC==="string"){bv+=bA;
}}bB=az.template(az.format(bD,aO,bv),by);
if(bz.count>0){bB=a.proxy(bB,bz.storage);
}return bB;
},_footerTmpl:function(bw,bu,bK,bE,bH){var bL=this,bG=O({},az.Template,bL.options.templateSettings),bD=bG.paramName,bA="",bB,bC,bJ,bM,bI={},bx=0,bF={},bz=bL._groups(),by=bL.dataSource._emptyAggregates(bu),bv;
bA+='<tr class="'+bE+'">';
if(bz>0&&!bH){bA+=ae(bz);
}if(bL._hasDetails()){bA+='<td class="k-hierarchy-cell">&nbsp;</td>';
}for(bB=0,bC=bw.length;
bB<bC;
bB++){bv=bw[bB];
bJ=bv[bK];
bM=typeof bJ;
bA+="<td"+ba(bv.footerAttributes)+">";
if(bJ){if(bM!==aa){bF=by[bv.field]?O({},bG,{paramName:bD+"['"+bv.field+"']"}):{};
bJ=az.template(bJ,bF);
}bI["tmpl"+bx]=bJ;
bA+="#=this.tmpl"+bx+"("+bD+")#";
bx++;
}else{bA+="&nbsp;";
}bA+="</td>";
}bA+="</tr>";
bA=az.template(bA,bG);
if(bx>0){return aV(bA,bI);
}return bA;
},_detailTmpl:function(bz){var bC=this,bw="",by=O({},az.Template,bC.options.templateSettings),bx=by.paramName,bB={},bA=0,bv=bC._groups(),bu=bo(aB(bC.columns)).length,bD=typeof bz;
bw+='<tr class="k-detail-row">';
if(bv>0){bw+=ae(bv);
}bw+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(bu?' colspan="'+bu+'"':"")+">";
if(bD===aa){bB["tmpl"+bA]=bz;
bw+="#=this.tmpl"+bA+"("+bx+")#";
bA++;
}else{bw+=bz;
}bw+="</td></tr>";
bw=az.template(bw,by);
if(bA>0){return aV(bw,bB);
}return bw;
},_hasDetails:function(){var bu=this;
return bu.options.detailTemplate!==null||(bu._events[K]||[]).length;
},_hasFilterRow:function(){var bw=this.options.filterable;
var bx=bw&&typeof bw.mode==a9&&bw.mode.indexOf("row")!=-1;
var bu=this.columns;
var bv=a.grep(bu,function(by){return by.filterable===false;
});
if(bu.length&&bv.length==bu.length){bx=false;
}return bx;
},_details:function(){var bu=this;
if(bu.options.scrollable&&bu._hasDetails()&&aD(bu.columns).length){throw new Error("Having both detail template and locked columns is not supported");
}bu.table.on(l+aS,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(bz){var bv=a(this),bA=bv.hasClass("k-plus"),bC=bv.closest("tr.k-master-row"),bx,by=bu.detailTemplate,bw,bB=bu._hasDetails();
bv.toggleClass("k-plus",!bA).toggleClass("k-minus",bA);
bx=bC.next();
if(bB&&!bx.hasClass("k-detail-row")){bw=bu.dataItem(bC);
bx=a(by(bw)).addClass(bC.hasClass("k-alt")?"k-alt":"").insertAfter(bC);
bu.angular("compile",function(){return{elements:bx.get(),data:[{dataItem:bw}]};
});
bu.trigger(K,{masterRow:bC,detailRow:bx,data:bw,detailCell:bx.find(".k-detail-cell")});
}bu.trigger(bA?J:I,{masterRow:bC,detailRow:bx});
bx.toggle(bA);
if(bu._current){bu._current.attr("aria-expanded",bA);
}bz.preventDefault();
return false;
});
},dataItem:function(bz){bz=a(bz)[0];
if(!bz){return null;
}var by=this.tbody.children(),bu=/k-grouping-row|k-detail-row|k-group-footer/,bw=bz.sectionRowIndex,bx,bv;
bv=bw;
for(bx=0;
bx<bw;
bx++){if(bu.test(by[bx].className)){bv--;
}}return this._data[bv];
},expandRow:function(bu){a(bu).find("> td .k-plus, > td .k-i-expand").click();
},collapseRow:function(bu){a(bu).find("> td .k-minus, > td .k-i-collapse").click();
},_createHeaderCells:function(bu,bB){var bE=this,bx,bD,bC,bw="",bA,bz=aB(bE.columns),bv;
for(bx=0,bA=bu.length;
bx<bA;
bx++){bD=bu[bx].column||bu[bx];
bC=bE._headerCellText(bD);
bv="";
var by=an(bD,bz);
if(!bD.command){if(bD.field){bv=az.attr("field")+"='"+bD.field+"' ";
}bw+="<th role='columnheader' "+bv;
if(bB&&!bu[bx].colSpan){bw+=" rowspan='"+bB+"'";
}if(bu[bx].colSpan>1){bw+='colspan="'+(bu[bx].colSpan-al(bD.columns))+'" ';
bw+=az.attr("colspan")+"='"+bu[bx].colSpan+"'";
}if(bD.title){bw+=az.attr("title")+'="'+bD.title.replace('"',"&quot;").replace(/'/g,"'")+'" ';
}if(bD.groupable!==bj){bw+=az.attr("groupable")+"='"+bD.groupable+"' ";
}if(bD.aggregates&&bD.aggregates.length){bw+=az.attr("aggregates")+"='"+bD.aggregates+"'";
}if(by>-1){bw+=az.attr("index")+"='"+by+"'";
}bw+=ba(bD.headerAttributes);
bw+=">"+bC+"</th>";
}else{bw+="<th"+ba(bD.headerAttributes);
if(bB&&!bu[bx].colSpan){bw+=" rowspan='"+bB+"'";
}if(by>-1){bw+=az.attr("index")+"='"+by+"'";
}bw+=">"+bC+"</th>";
}}return bw;
},_appendLockedColumnContent:function(){var by=this.columns,bA,bu=this.table.find("colgroup"),bw=bu.find("col:not(.k-group-col,.k-hierarchy-col)"),bB,bC=a(),bD=0,bz,bx,bE,bv=0;
for(bA=0,bB=by.length;
bA<bB;
bA++){if(by[bA].locked){if(ay(by[bA])){bx=1;
if(by[bA].columns){bx=aB(by[bA].columns).length-al(by[bA].columns);
}bx=bx||1;
for(bE=0;
bE<bx;
bE++){bC=bC.add(bw.eq(bA+bv+bE-bD));
}bv+=bx-1;
}else{bD++;
}}}bz=a('<div class="k-grid-content-locked"><table'+(at?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>");
bu.detach();
bz.find("colgroup").append(bC);
bu.insertBefore(this.table.find("tbody"));
this.lockedContent=bz.insertBefore(this.content);
this.lockedTable=bz.children("table");
},_appendLockedColumnFooter:function(){var bD=this;
var bw=bD.footer;
var bu=bw.find(".k-footer-template>td");
var bv=bw.find(".k-grid-footer-wrap>table>colgroup>col");
var by=a('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>');
var bz,bA;
var bx=bD._groups();
var bB=a(),bC=a();
bB=bB.add(bu.filter(".k-group-cell"));
for(bz=0,bA=aB(aD(bD.columns)).length;
bz<bA;
bz++){bB=bB.add(bu.eq(bz+bx));
}bC=bC.add(bv.filter(".k-group-col"));
for(bz=0,bA=aB(bq(bD.columns)).length;
bz<bA;
bz++){bC=bC.add(bv.eq(bz+bx));
}bB.appendTo(by.find("tr"));
bC.appendTo(by.find("colgroup"));
bD.lockedFooter=by.prependTo(bw);
},_appendLockedColumnHeader:function(bB){var bR=this,bA=this.columns,bJ,bI,bM,bw,bS,bT,bQ,bH,bD,bN=[],bO=0,by=a(),bG=bR._hasFilterRow(),bE=0,bF=a(),bu,bL=0,bv=a();
bw=bR.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)");
bH=bR.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)");
bD=bR.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");
var bx=0;
for(bJ=0,bM=bA.length;
bJ<bM;
bJ++){if(bA[bJ].locked){bu=bH.eq(bJ);
bL=aB(bA[bJ].columns||[]).length;
if(ay(bA[bJ])){var bz;
if(bA[bJ].columns){bz=bL-al(bA[bJ].columns);
}bz=bz||1;
for(var bP=0;
bP<bz;
bP++){by=by.add(bw.eq(bJ+bx+bP-bO));
}bx+=bz-1;
}aF([bA[bJ]],k(bu),bN,0,0);
bL=bL||1;
for(var bK=0;
bK<bL;
bK++){bF=bF.add(bD.eq(bE+bK));
}bE+=bL;
}if(bA[bJ].columns){bO+=al(bA[bJ].columns);
}if(!ay(bA[bJ])){bO++;
}}if(bN.length){bI='<div class="k-grid-header-locked" style="width:1px"><table'+(at?' cellspacing="0"':"")+"><colgroup/><thead>";
bI+=new Array(bN.length+1).join("<tr></tr>");
bI+=(bG?'<tr class="k-filter-row" />':"")+"</thead></table></div>";
bQ=a(bI);
bw=bQ.find("colgroup");
bw.append(bR.thead.prev().find("col.k-group-col").add(by));
bS=bQ.find("thead tr:not(.k-filter-row)");
for(bJ=0,bM=bN.length;
bJ<bM;
bJ++){bv=bh(bN[bJ]);
bS.eq(bJ).append(bR.thead.find("tr:eq("+bJ+") .k-group-cell").add(bv));
}var bC=aY(this.thead);
if(bN.length<bC){a0(bQ,bC-bN.length);
}bT=bQ.find(".k-filter-row");
bT.append(bR.thead.find(".k-filter-row .k-group-cell").add(bF));
this.lockedHeader=bQ.prependTo(bB);
this.thead.find(".k-group-cell").remove();
this._syncLockedHeaderHeight();
}},_removeLockedContainers:function(){var bu=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);
az.destroy(bu);
bu.off(aS).remove();
this.lockedHeader=this.lockedContent=this.lockedFooter=null;
this.selectable=null;
},_thead:function(){var bD=this,bu=bD.columns,bx=bD._hasDetails()&&bu.length,by=bD._hasFilterRow(),bB,bA="",bE=bD.table.find(">thead"),bz=bD.element.find("thead:first").length>0,bF;
if(!bE.length){bE=a("<thead/>").insertBefore(bD.tbody);
}if(bD.lockedHeader&&bD.thead){bF=bD.thead.find("tr:has(th):not(.k-filter-row)").html("");
bF.remove();
bF=a();
bD._removeLockedContainers();
}else{if(bz){bF=bD.element.find("thead:first tr:has(th):not(.k-filter-row)");
}else{bF=bD.element.find("tr:has(th):first");
}}if(!bF.length){bF=bE.children().first();
if(!bF.length){var bC=[{rowSpan:1,cells:[],index:0}];
bD._prepareColumns(bC,bu);
for(bB=0;
bB<bC.length;
bB++){bA+="<tr>";
if(bx){bA+='<th class="k-hierarchy-cell">&nbsp;</th>';
}bA+=bD._createHeaderCells(bC[bB].cells,bC[bB].rowSpan);
bA+="</tr>";
}bF=a(bA);
}}if(by){var bw=a("<tr/>");
bw.addClass("k-filter-row");
if(bx||bF.find(".k-hierarchy-cell").length){bw.prepend('<th class="k-hierarchy-cell">&nbsp;</th>');
}var bv=(bD.thead||bE).find(".k-filter-row");
if(bv.length){az.destroy(bv);
bv.remove();
}bE.append(bw);
}if(!bF.children().length){bA="";
if(bx){bA+='<th class="k-hierarchy-cell">&nbsp;</th>';
}bA+=bD._createHeaderCells(bu);
bF.html(bA);
}else{if(bx&&!bF.find(".k-hierarchy-cell")[0]){bF.prepend('<th class="k-hierarchy-cell">&nbsp;</th>');
}}bF.attr("role","row").find("th").addClass("k-header");
if(!bD.options.scrollable){bE.addClass("k-grid-header");
}bF.find("script").remove().end().prependTo(bE);
if(bD.thead){bD._destroyColumnAttachments();
}this.angular("cleanup",function(){return{elements:bE.find("th").get()};
});
this.angular("compile",function(){return{elements:bE.find("th").get(),data:aE(bu,function(bG){return{column:bG};
})};
});
bD.thead=bE.attr("role","rowgroup");
bD._sortable();
bD._filterable();
bD._filterRow();
bD._scrollable();
bD._updateCols();
bD._columnMenu();
if(this.options.scrollable&&aD(this.columns).length){bD._appendLockedColumnHeader(bD.thead.closest(".k-grid-header"));
bD._appendLockedColumnContent();
bD.lockedContent.bind("DOMMouseScroll"+aS+" mousewheel"+aS,aV(bD._wheelScroll,bD));
bD._applyLockedContainersWidth();
}bD._updateColumnCellIndex();
bD._updateFirstColumnClass();
bD._resizable();
bD._draggable();
bD._reorderable();
if(bD.groupable){bD._attachGroupable();
}},_updateFirstColumnClass:function(){var bx=this,bu=bx.columns||[],bv=bx._hasDetails()&&bu.length;
if(!bv&&!bx._groups()){var bw=a();
var by=bx.thead.find(">tr:not(.k-filter-row):not(:first)");
bu=aM(bu);
if(by.length&&bu[0]&&!bu[0].columns){bw=bw.add(by);
}if(bx._isLocked()){by=bx.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)");
bu=aD(bx.columns);
if(by.length&&bu[0]&&!bu[0].columns){bw=bw.add(by);
}}bw.each(function(){var bz=a(this).find("th");
bz.removeClass("k-first");
bz.eq(0).addClass("k-first");
});
}},_prepareColumns:function(bB,bw,by,bz){var bA=bz||bB[bB.length-1];
var bv=bB[bA.index+1];
var bC=0;
for(var bx=0;
bx<bw.length;
bx++){var bu={column:bw[bx],colSpan:0};
bA.cells.push(bu);
if(bw[bx].columns&&bw[bx].columns.length){if(!bv){bv={rowSpan:0,cells:[],index:bB.length};
bB.push(bv);
}bu.colSpan=bw[bx].columns.length;
this._prepareColumns(bB,bw[bx].columns,bu,bv);
bC+=bu.colSpan-1;
bA.rowSpan=bB.length-bA.index;
}}if(by){by.colSpan+=bC;
}},_wheelScroll:function(bw){if(bw.ctrlKey){return;
}var bu=this.content;
if(this.options.scrollable.virtual){bu=this.virtualScrollable.verticalScrollbar;
}var bx=bu.scrollTop(),bv=az.wheelDeltaY(bw);
if(bv){bw.preventDefault();
a(bw.currentTarget).one("wheel"+aS,false);
bu.scrollTop(bx+(-bv));
}},_isLocked:function(){return this.lockedHeader!=null;
},_updateCols:function(bu){bu=bu||this.thead.parent().add(this.table);
this._appendCols(bu,this._isLocked());
},_updateLockedCols:function(bu){if(this._isLocked()){bu=bu||this.lockedHeader.find("table").add(this.lockedTable);
aP(bu,bp(bq(this.columns)),this._hasDetails(),this._groups());
}},_appendCols:function(bv,bu){if(bu){aP(bv,bp(br(this.columns)),this._hasDetails(),0);
}else{aP(bv,bp(bo(this.columns)),this._hasDetails(),this._groups());
}},_autoColumns:function(bw){if(bw&&bw.toJSON){var bx=this,bv,bu;
bw=bw.toJSON();
bu=!(bx.table.find("tbody tr").length>0&&(!bx.dataSource||!bx.dataSource.transport));
for(bv in bw){bx.columns.push({field:bv,encoded:bu,headerAttributes:{id:az.guid()}});
}bx._thead();
bx._templates();
}},_rowsHtml:function(bv,bA){var bB=this,bw="",bx,bz=bA.rowTemplate,bu=bA.altRowTemplate,by;
for(bx=0,by=bv.length;
bx<by;
bx++){if(bx%2){bw+=bu(bv[bx]);
}else{bw+=bz(bv[bx]);
}bB._data.push(bv[bx]);
}return bw;
},_groupRowHtml:function(bA,bv,bH,bC,bK,bI){var bM=this,bE="",bF,bG,by=bA.field,bw=ac(aB(bM.columns),function(bN){return bN.field==by;
})[0]||{},bJ=bw.groupHeaderTemplate,bL=(bw.title||by)+": "+Y(bA.value,bw.format,bw.values,bw.encoded),bz=bM._groupAggregatesDefaultObject||{},bu=O({},bz,bA.aggregates),bx=O({},{field:bA.field,value:bA.value,aggregates:bu},bA.aggregates[bA.field]),bB=bK.groupFooterTemplate,bD=bA.items;
if(bJ){bL=typeof bJ===aa?bJ(bx):az.template(bJ)(bx);
}bE+=bC(bv,bH,bL);
if(bA.hasSubgroups){for(bF=0,bG=bD.length;
bF<bG;
bF++){bE+=bM._groupRowHtml(bD[bF],bI?bv:bv-1,bH+1,bC,bK,bI);
}}else{bE+=bM._rowsHtml(bD,bK);
}if(bB){bE+=bB(bu);
}return bE;
},collapseGroup:function(bv){bv=a(bv);
var bz,bw=this.options.groupable,bC=bw.showFooter,bu=bC?0:1,bA,bB=a(),bx,by,bD;
if(this._isLocked()){if(!bv.closest("div").hasClass("k-grid-content-locked")){bB=bv.nextAll("tr");
bv=this.lockedTable.find(">tbody>tr:eq("+bv.index()+")");
}else{bB=this.tbody.children("tr:eq("+bv.index()+")").nextAll("tr");
}}bz=bv.find(".k-group-cell").length;
bv.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse");
bv.find("td[aria-expanded='true']:first").attr("aria-expanded",false);
bv=bv.nextAll("tr");
for(bx=0,by=bv.length;
bx<by;
bx++){bD=bv.eq(bx);
bA=bD.find(".k-group-cell").length;
if(bD.hasClass("k-grouping-row")){bu++;
}else{if(bD.hasClass("k-group-footer")){bu--;
}}if(bA<=bz||(bD.hasClass("k-group-footer")&&bu<0)){break;
}bD.hide();
bB.eq(bx).hide();
}},expandGroup:function(bv){bv=a(bv);
var bD=this,bC=bD.options.groupable.showFooter,bz,bE,bA,bB=a(),bx,by,bu=[],bw=1;
if(this._isLocked()){if(!bv.closest("div").hasClass("k-grid-content-locked")){bB=bv.nextAll("tr");
bv=this.lockedTable.find(">tbody>tr:eq("+bv.index()+")");
}else{bB=this.tbody.children("tr:eq("+bv.index()+")").nextAll("tr");
}}bz=bv.find(".k-group-cell").length;
bv.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand");
bv.find("td[aria-expanded='false']:first").attr("aria-expanded",true);
bv=bv.nextAll("tr");
for(bx=0,by=bv.length;
bx<by;
bx++){bE=bv.eq(bx);
bA=bE.find(".k-group-cell").length;
if(bA<=bz){break;
}if(bA==bz+1&&!bE.hasClass("k-detail-row")){bE.show();
bB.eq(bx).show();
if(bE.hasClass("k-grouping-row")&&bE.find(".k-icon").hasClass("k-i-collapse")){bD.expandGroup(bE);
}if(bE.hasClass("k-master-row")&&bE.find(".k-icon").hasClass("k-minus")){bE.next().show();
bB.eq(bx+1).show();
}}if(bE.hasClass("k-grouping-row")){if(bC){bu.push(bE.is(":visible"));
}bw++;
}if(bE.hasClass("k-group-footer")){if(bC){bE.toggle(bu.pop());
}if(bw==1){bE.show();
bB.eq(bx).show();
}else{bw--;
}}}},_updateHeader:function(bw){var bz=this,bu=bz._isLocked()?bz.lockedHeader.find("thead"):bz.thead,bv=bu.find("tr.k-filter-row").find("th.k-group-cell").length,bx=bu.find("tr:first").find("th.k-group-cell").length,by=bu.children("tr:not(:first)").filter(function(){return !a(this).children(":visible").length;
});
if(bw>bx){a(new Array(bw-bx+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(bu.children("tr:not(.k-filter-row)"));
if(bz.element.is(":visible")){by.find("th.k-group-cell").hide();
}}else{if(bw<bx){bu.find("tr").each(function(){a(this).find("th.k-group-cell").filter(":eq("+bw+"),:gt("+bw+")").remove();
});
}}if(bw>bv){a(new Array(bw-bv+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(bu.find(".k-filter-row"));
}},_firstDataItem:function(bu,bv){if(bu&&bv){if(bu.hasSubgroups){bu=this._firstDataItem(bu.items[0],bv);
}else{bu=bu.items[0];
}}return bu;
},_updateTablesWidth:function(){var bv=this,bu;
if(!bv._isLocked()){return;
}bu=a(">.k-grid-footer>.k-grid-footer-wrap>table",bv.wrapper).add(bv.thead.parent()).add(bv.table);
bv._footerWidth=be(bu.eq(0));
bu.width(bv._footerWidth);
bu=a(">.k-grid-footer>.k-grid-footer-locked>table",bv.wrapper).add(bv.lockedHeader.find(">table")).add(bv.lockedTable);
bu.width(be(bu.eq(0)));
},hideColumn:function(bw){var bH=this,bu,bG,bD,bv,bz,bF,bJ=0,bC,bE,bB=bH.footer||bH.wrapper.find(".k-grid-footer"),by=bH.columns,bI=bH.lockedHeader?aC(bH.lockedHeader.find(">table>thead")).filter(ap).length:0,bx;
if(typeof bw=="number"){bw=by[bw];
}else{if(aw(bw)){bw=ac(U(by),function(bK){return bK===bw;
})[0];
}else{bw=ac(U(by),function(bK){return bK.field===bw;
})[0];
}}if(!bw||!ay(bw)){return;
}if(bw.columns&&bw.columns.length){bF=x(bw,by);
a7(bw,false);
a6(M(a(">table>thead",bH.lockedHeader),bH.thead,">tr:eq("+bF.row+")>th"),bF.cell,false);
for(bD=0;
bD<bw.columns.length;
bD++){this.hideColumn(bw.columns[bD]);
}bH.trigger(m,{column:bw});
return;
}bx=an(bw,bo(aB(by)));
a7(bw,false);
bH._setParentsVisibility(bw,false);
bH._templates();
bH._updateCols();
bH._updateLockedCols();
var bA=bH.thead;
bC=bx;
if(bH.lockedHeader&&bI>bx){bA=bH.lockedHeader.find(">table>thead");
}else{bC-=bI;
}bu=aC(bA).filter(ap).eq(bC);
bu[0].style.display="none";
a6(M(a(">table>thead",bH.lockedHeader),bH.thead,">tr.k-filter-row>th"),bx,false);
if(bB[0]){bH._updateCols(bB.find(">.k-grid-footer-wrap>table"));
bH._updateLockedCols(bB.find(">.k-grid-footer-locked>table"));
a6(bB.find(".k-footer-template>td"),bx,false);
}if(bH.lockedTable&&bI>bx){am(bH.lockedTable.find(">tbody>tr"),bx);
}else{am(bH.tbody.children(),bx-bI);
}if(bH.lockedTable){bH._updateTablesWidth();
bH._applyLockedContainersWidth();
bH._syncLockedContentHeight();
bH._syncLockedHeaderHeight();
bH._syncLockedFooterHeight();
}else{bv=bH.thead.prev().find("col");
for(bD=0,bE=bv.length;
bD<bE;
bD+=1){bz=bv[bD].style.width;
if(bz&&bz.indexOf("%")==-1){bJ+=parseInt(bz,10);
}else{bJ=0;
break;
}}bG=a(">.k-grid-header table:first,>.k-grid-footer table:first",bH.wrapper).add(bH.table);
bH._footerWidth=null;
if(bJ){bG.each(function(){this.style.width=bJ+"px";
});
bH._footerWidth=bJ;
}if(h.msie&&h.version==8){bG.css("display","inline-table");
setTimeout(function(){bG.css("display","table");
},1);
}}bH._updateFirstColumnClass();
bH.trigger(m,{column:bw});
},_setParentsVisibility:function(bw,bD){var bx=this.columns;
var by;
var bA=[];
var bz;
var bB;
var bu;
var bv;
var bC=bD?function(bE){return bo(bE.columns).length&&bE.hidden;
}:function(bE){return !bo(bE.columns).length&&!bE.hidden;
};
if(q(bw,bx,bA)&&bA.length){for(by=bA.length-1;
by>=0;
by--){bz=bA[by];
bB=r(bz,bx);
bu=M(a(">table>thead",this.lockedHeader),this.thead,">tr:eq("+bB.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(bB.cell);
if(bC(bz)){a7(bz,bD);
bu[0].style.display=bD?"":"none";
}if(bu.filter("["+az.attr("colspan")+"]").length){bv=parseInt(bu.attr(az.attr("colspan")),10);
bu[0].colSpan=(bv-al(bz.columns))||1;
}}}},showColumn:function(bw){var bI=this,bD,bE,bu,bH,bJ,bC,bG,bz,bv,by=bI.columns,bB=bI.footer||bI.wrapper.find(".k-grid-footer"),bF=bI.lockedHeader?aC(bI.lockedHeader.find(">table>thead")).length:0,bx;
if(typeof bw=="number"){bw=by[bw];
}else{if(aw(bw)){bw=ac(U(by),function(bK){return bK===bw;
})[0];
}else{bw=ac(U(by),function(bK){return bK.field===bw;
})[0];
}}if(!bw||ay(bw)){return;
}if(bw.columns&&bw.columns.length){bG=r(bw,by);
a7(bw,true);
a6(M(a(">table>thead",bI.lockedHeader),bI.thead,">tr:eq("+bG.row+")>th"),bG.cell,true);
for(bD=0;
bD<bw.columns.length;
bD++){this.showColumn(bw.columns[bD]);
}bI.trigger(u,{column:bw});
return;
}bx=an(bw,aB(by));
a7(bw,true);
bI._setParentsVisibility(bw,true);
bI._templates();
bI._updateCols();
bI._updateLockedCols();
var bA=bI.thead;
bC=bx;
if(bI.lockedHeader&&bF>bx){bA=bI.lockedHeader.find(">table>thead");
}else{bC-=bF;
}bu=aC(bA).eq(bC);
bu[0].style.display="";
a6(M(a(">table>thead",bI.lockedHeader),bI.thead,">tr.k-filter-row>th"),bx,true);
if(bB[0]){bI._updateCols(bB.find(">.k-grid-footer-wrap>table"));
bI._updateLockedCols(bB.find(">.k-grid-footer-locked>table"));
a6(bB.find(".k-footer-template>td"),bx,true);
}if(bI.lockedTable&&bF>bx){a8(bI.lockedTable.find(">tbody>tr"),bx);
}else{a8(bI.tbody.children(),bx-bF);
}if(bI.lockedTable){bI._updateTablesWidth();
bI._applyLockedContainersWidth();
bI._syncLockedContentHeight();
bI._syncLockedHeaderHeight();
}else{bH=a(">.k-grid-header table:first,>.k-grid-footer table:first",bI.wrapper).add(bI.table);
if(!bw.width){bH.width("");
}else{bJ=0;
bv=bI.thead.prev().find("col");
for(bD=0,bE=bv.length;
bD<bE;
bD+=1){bz=bv[bD].style.width;
if(bz.indexOf("%")>-1){bJ=0;
break;
}bJ+=parseInt(bz,10);
}bI._footerWidth=null;
if(bJ){bH.each(function(){this.style.width=bJ+"px";
});
bI._footerWidth=bJ;
}}}bI._updateFirstColumnClass();
bI.trigger(u,{column:bw});
},_progress:function(bv){var bu=this.element;
if(this.lockedContent){bu=this.wrapper;
}else{if(this.element.is("table")){bu=this.element.parent();
}else{if(this.content&&this.content.length){bu=this.content;
}}}az.ui.progress(bu,bv);
},_resize:function(bv,bu){if(this.content){this._setContentWidth();
this._setContentHeight();
}if(this.virtualScrollable&&(bu||this._rowHeight)){if(bu){this._rowHeight=null;
}this.virtualScrollable.repaintScrollbar();
}},_isActiveInTable:function(){var bu=b();
return this.table[0]===bu||a.contains(this.table[0],bu)||(this._isLocked()&&(this.lockedTable[0]===bu||a.contains(this.lockedTable[0],bu)));
},refresh:function(by){var bD=this,bx=bD.dataSource.view(),bB=bD.options.navigatable,bw,bv=a(bD.current()),bA=false,bz=(bD.dataSource.group()||[]).length,bC=bD.content&&bD.content.scrollLeft(),bu=bz+bp(bo(bD.columns)).length;
if(by&&by.action==="itemchange"&&bD.editable){return;
}by=by||{};
if(bD.trigger("dataBinding",{action:by.action||"rebind",index:by.index,items:by.items})){return;
}bD._angularItems("cleanup");
if(bB&&(bD._isActiveInTable()||(bD._editContainer&&bD._editContainer.data("kendoWindow")))){bA=bv.is("th");
bw=Math.max(bD.cellIndex(bv),0);
}bD._destroyEditable();
bD._progress(false);
bD._hideResizeHandle();
bD._data=[];
if(!bD.columns.length){bD._autoColumns(bD._firstDataItem(bx[0],bz));
bu=bz+bD.columns.length;
}bD._group=bz>0||bD._group;
if(bD._group){bD._templates();
bD._updateCols();
bD._updateLockedCols();
bD._updateHeader(bz);
bD._group=bz>0;
}bD._renderContent(bx,bu,bz);
bD._renderLockedContent(bx,bu,bz);
bD._footer();
bD._renderNoRecordsContent();
bD._setContentHeight();
bD._setContentWidth(bC);
if(bD.lockedTable){if(bD.options.scrollable.virtual){bD.content.find(">.k-virtual-scrollable-wrap").trigger("scroll");
}else{if(bD.touchScroller){bD.touchScroller.movable.trigger("change");
}else{bD.wrapper.one("scroll",function(bE){bE.stopPropagation();
});
bD.content.trigger("scroll");
}}}bD._restoreCurrent(bw,bA);
if(bD.touchScroller){bD.touchScroller.contentResized();
}if(bD.selectable){bD.selectable.resetTouchEvents();
}bD._angularItems("compile");
bD.trigger(D);
},_restoreCurrent:function(bu,bv){if(bu===bj||bu<0){return;
}this._removeCurrent();
if(bv){this.current(this.thead.find("th:not(.k-group-cell)").eq(bu));
}else{var bx=0;
if(this._rowVirtualIndex){bx=this.virtualScrollable.position(this._rowVirtualIndex);
}else{bu=0;
}var bw=a();
if(this.lockedTable){bw=this.lockedTable.find(">tbody>tr").eq(bx);
}bw=bw.add(this.tbody.children().eq(bx));
var by=bw.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(bu);
this.current(by);
}if(this._current){X(this._current.closest("table")[0],true);
}},_angularItems:function(bu){az.ui.DataBoundWidget.fn._angularItems.call(this,bu);
if(bu==="cleanup"){this._cleanupDetailItems();
}this._angularGroupItems(bu);
this._angularGroupFooterItems(bu);
},_cleanupDetailItems:function(){var bu=this;
if(bu._hasDetails()){bu.angular("cleanup",function(){return{elements:bu.tbody.children(".k-detail-row")};
});
bu.tbody.find(".k-detail-cell").empty();
}},_angularGroupItems:function(bu){var bw=this,bv=bw.tbody;
if(bw.lockedContent){bv=bw.lockedTable.find("tbody");
}if(bw._group){bw.angular(bu,function(){return{elements:bv.children(".k-grouping-row"),data:a.map(ai(bw.dataSource.view()),function(bx){return{dataItem:bx};
})};
});
}},_angularGroupFooterItems:function(bu){var bw=this,bv=bw.tbody;
if(bw.lockedContent){bv=bw.element;
}if(bw._group&&bw.groupFooterTemplate){bw.angular(bu,function(){return{elements:bv.find(".k-group-footer"),data:a.map(af(bw.dataSource.view()),function(bx){return{dataItem:bx};
})};
});
}},_renderContent:function(bv,bu,bw){var bC=this,by,bA,bx="",bz=bC.lockedContent!=null,bB={rowTemplate:bC.rowTemplate,altRowTemplate:bC.altRowTemplate,groupFooterTemplate:bC.groupFooterTemplate};
bu=bz?bu-bp(bq(bC.columns)).length:bu;
if(bw>0){bu=bz?bu-bw:bu;
if(bC.detailTemplate){bu++;
}if(bC.groupFooterTemplate){bC._groupAggregatesDefaultObject=bC.dataSource.aggregates();
}for(by=0,bA=bv.length;
by<bA;
by++){bx+=bC._groupRowHtml(bv[by],bu,0,bz?ah:ag,bB,bz);
}}else{bx+=bC._rowsHtml(bv,bB);
}bC.tbody=f(bC.tbody,bC.table,bx,this.options.$angular);
},_renderLockedContent:function(bv,bu,bw){var bx="",by,bz,bB={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};
if(this.lockedContent){var bA=this.lockedTable;
if(bw>0){bu=bu-bo(aB(aM(this.columns))).length;
for(by=0,bz=bv.length;
by<bz;
by++){bx+=this._groupRowHtml(bv[by],bu,0,ag,bB);
}}else{bx=this._rowsHtml(bv,bB);
}f(bA.children("tbody"),bA,bx,this.options.$angular);
this._syncLockedContentHeight();
}},_adjustRowsHeight:function(bE,bF){var bC=bE[0].rows,bz=bC.length,by,bD=bF[0].rows,bu=bE.add(bF),bv=bu.length,bx=[];
for(by=0;
by<bz;
by++){if(!bD[by]){break;
}if(bC[by].style.height){bC[by].style.height=bD[by].style.height="";
}var bA=bC[by].offsetHeight;
var bB=bD[by].offsetHeight;
var bw=0;
if(bA>bB){bw=bA;
}else{if(bA<bB){bw=bB;
}}bx.push(bw);
}for(by=0;
by<bv;
by++){bu[by].style.display="none";
}for(by=0;
by<bz;
by++){if(bx[by]){bC[by].style.height=bD[by].style.height=(bx[by]+1)+"px";
}}for(by=0;
by<bv;
by++){bu[by].style.display="";
}}});
if(az.ExcelMixin){az.ExcelMixin.extend(ad.prototype);
}if(az.PDFMixin){az.PDFMixin.extend(ad.prototype);
ad.prototype._drawPDF=function(bz){var bB=new a.Deferred();
var by=this;
var bv=by.dataSource;
var bu=by.options.pdf.allPages;
this._initPDFProgress(bz);
var bw=new az.drawing.Group();
var bC=bv.page();
function bA(){if(bu&&bC!==bj){bv.unbind("change",bx);
bv.one("change",function(){bB.resolve(bw);
});
bv.page(bC);
}else{bB.resolve(bw);
}}function bx(){by._drawPDFShadow({width:by.wrapper.width()}).done(function(bE){var bF=bv.page();
var bG=bu?bv.totalPages():1;
var bD={page:bE,pageNumber:bF,progress:bF/bG,totalPages:bG};
bz.notify(bD);
bw.append(bD.page);
if(bF<bG){bv.page(bF+1);
}else{bA();
}}).fail(function(bD){bB.reject(bD);
});
}if(bu){bv.bind("change",bx);
bv.page(1);
}else{bx();
}return bB.promise();
};
ad.prototype._initPDFProgress=function(bu){var bv=a("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");
bv.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0}));
this.wrapper.append(bv);
var bw=a("<div class='k-loading-pdf-progress'>").appendTo(bv).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");
bu.progress(function(bx){bw.value(bx.progress);
}).always(function(){az.destroy(bv);
bv.remove();
});
};
}function bb(bx,by){bx=bx[0];
by=by[0];
if(bx.rows.length!==by.rows.length){var bv=bx.offsetHeight;
var bz=by.offsetHeight;
var bw;
var bu;
if(bv>bz){bw=by.rows[by.rows.length-1];
if(Q.test(bw.className)){bw=by.rows[by.rows.length-2];
}bu=bv-bz;
}else{bw=bx.rows[bx.rows.length-1];
if(Q.test(bw.className)){bw=bx.rows[bx.rows.length-2];
}bu=bz-bv;
}bw.style.height=bw.offsetHeight+bu+"px";
}}function e(bx,by){var bu;
var bv=bx.offsetHeight;
var bw=by.offsetHeight;
if(bv>bw){bu=bv+"px";
}else{if(bv<bw){bu=bw+"px";
}}if(bu){bx.style.height=by.style.height=bu;
}}function ab(bv,by){var bw,bx,bu;
if(typeof bv===a9&&bv===by){return bv;
}if(aw(bv)&&bv.name===by){return bv;
}if(ao(bv)){for(bw=0,bx=bv.length;
bw<bx;
bw++){bu=bv[bw];
if((typeof bu===a9&&bu===by)||(bu.name===by)){return bu;
}}}return null;
}function X(bA,bv){var bx=h.msie;
if(bv===true){bA=a(bA);
var bu=true||bx&&bA.parent().is(".k-grid-content,.k-grid-header-wrap"),bz,by;
if(bu){bz=bA.parent().scrollTop();
by=bA.parent().scrollLeft();
}if(bx){try{bA[0].setActive();
}catch(bw){bA[0].focus();
}}else{bA[0].focus();
}if(bu){bA.parent().scrollTop(bz);
bA.parent().scrollLeft(by);
}}else{a(bA).one("focusin",function(bB){bB.preventDefault();
}).focus();
}}function bd(bw){var bv=a(bw.currentTarget),by=bv.is("th"),bA=this.table.add(this.lockedTable),bx=this.thead.parent().add(a(">table",this.lockedHeader)),bz=a(bw.target).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon"),bu=bv.closest("table")[0];
if(az.support.touch){return;
}if(bz&&bv.find(az.roleSelector("filtercell")).length){this.current(bv);
return;
}if(bu!==bA[0]&&bu!==bA[1]&&bu!==bx[0]&&bu!==bx[1]){return;
}if(a(bw.target).is("a.k-i-collapse, a.k-i-expand")){return;
}if(this.options.navigatable){this.current(bv);
}if(by||!bz){setTimeout(function(){if(!(au&&a(az._activeElement()).hasClass("k-widget"))){X(bu,true);
}});
}if(by){bw.preventDefault();
}}function av(bu){return bu&&(bu.hasClass("k-edit-cell")||bu.parent().hasClass("k-grid-edit-row"));
}function ag(bu,bv,bw){return'<tr role="row" class="k-grouping-row">'+ae(bv)+'<td colspan="'+bu+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+bw+"</p></td></tr>";
}function ah(bu){return'<tr role="row" class="k-grouping-row"><td colspan="'+bu+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>';
}bi.plugin(ad);
bi.plugin(bn);
})(window.kendo.jQuery);
})();
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b){b();
});
