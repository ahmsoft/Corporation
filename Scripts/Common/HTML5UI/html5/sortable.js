(function(b,a){a(["./kendo.draganddrop"],b);
})(function(){(function(){(function(a,r){var m=window.kendo,s=m.ui.Widget,q="start",e="beforeMove",o="move",l="end",g="change",f="cancel",d="sort",c="remove",b="receive",i=">*",n=-1;
function h(v,t){try{return a.contains(v,t)||v==t;
}catch(u){return false;
}}function j(t){return t.clone();
}function k(t){return t.clone().removeAttr("id").css("visibility","hidden");
}var p=s.extend({init:function(t,u){var v=this;
s.fn.init.call(v,t,u);
if(!v.options.placeholder){v.options.placeholder=k;
}if(!v.options.hint){v.options.hint=j;
}v.draggable=v._createDraggable();
},events:[q,e,o,l,g,f],options:{name:"Sortable",hint:null,placeholder:null,filter:i,holdToDrag:false,disabled:null,container:null,connectWith:null,handler:null,cursorOffset:null,axis:null,ignore:null,autoScroll:false,cursor:"auto",moveOnDragEnter:false},destroy:function(){this.draggable.destroy();
s.fn.destroy.call(this);
},_createDraggable:function(){var v=this,t=v.element,u=v.options;
return new m.ui.Draggable(t,{filter:u.filter,hint:m.isFunction(u.hint)?u.hint:a(u.hint),holdToDrag:u.holdToDrag,container:u.container?a(u.container):null,cursorOffset:u.cursorOffset,axis:u.axis,ignore:u.ignore,autoScroll:u.autoScroll,dragstart:a.proxy(v._dragstart,v),dragcancel:a.proxy(v._dragcancel,v),drag:a.proxy(v._drag,v),dragend:a.proxy(v._dragend,v)});
},_dragstart:function(w){var v=this.draggedElement=w.currentTarget,u=this.options.disabled,x=this.options.handler,t=this.options.placeholder,y=this.placeholder=m.isFunction(t)?a(t.call(this,v)):a(t);
if(u&&v.is(u)){w.preventDefault();
}else{if(x&&!a(w.initialTarget).is(x)){w.preventDefault();
}else{if(this.trigger(q,{item:v,draggableEvent:w})){w.preventDefault();
}else{v.css("display","none");
v.before(y);
this._setCursor();
}}}},_dragcancel:function(){this._cancel();
this.trigger(f,{item:this.draggedElement});
this._resetCursor();
},_drag:function(y){var x=this.draggedElement,E=this._findTarget(y),F,v={left:y.x.location,top:y.y.location},C,u={x:y.x.delta,y:y.y.delta},w,D,A,t=this.options.axis,B=this.options.moveOnDragEnter,z={item:x,list:this,draggableEvent:y};
if(t==="x"||t==="y"){this._movementByAxis(t,v,u[t],z);
return;
}if(E){F=this._getElementCenter(E.element);
C={left:Math.round(v.left-F.left),top:Math.round(v.top-F.top)};
a.extend(z,{target:E.element});
if(E.appendToBottom){this._movePlaceholder(E,null,z);
return;
}if(E.appendAfterHidden){this._movePlaceholder(E,"next",z);
}if(this._isFloating(E.element)){if(u.x<0&&(B||C.left<0)){w="prev";
}else{if(u.x>0&&(B||C.left>0)){w="next";
}}}else{if(u.y<0&&(B||C.top<0)){w="prev";
}else{if(u.y>0&&(B||C.top>0)){w="next";
}}}if(w){A=(w==="prev")?jQuery.fn.prev:jQuery.fn.next;
D=A.call(E.element);
while(D.length&&!D.is(":visible")){D=A.call(D);
}if(D[0]!=this.placeholder[0]){this._movePlaceholder(E,w,z);
}}}},_dragend:function(y){var B=this.placeholder,w=this.draggedElement,x=this.indexOf(w),C=this.indexOf(B),v=this.options.connectWith,t,A,z,u;
this._resetCursor();
z={action:d,item:w,oldIndex:x,newIndex:C,draggableEvent:y};
if(C>=0){A=this.trigger(l,z);
}else{t=B.parents(v).getKendoSortable();
z.action=c;
u=a.extend({},z,{action:b,oldIndex:n,newIndex:t.indexOf(B)});
A=!(!this.trigger(l,z)&&!t.trigger(l,u));
}if(A||C===x){this._cancel();
return;
}B.replaceWith(w);
w.show();
this.draggable.dropped=true;
z={action:this.indexOf(w)!=n?d:c,item:w,oldIndex:x,newIndex:this.indexOf(w),draggableEvent:y};
this.trigger(g,z);
if(t){u=a.extend({},z,{action:b,oldIndex:n,newIndex:t.indexOf(w)});
t.trigger(g,u);
}},_findTarget:function(u){var v=this._findElementUnderCursor(u),w,t=this.options.connectWith,x;
if(a.contains(this.element[0],v)){w=this.items();
x=w.filter(v)[0]||w.has(v)[0];
return x?{element:a(x),sortable:this}:null;
}else{if(this.element[0]==v&&this._isEmpty()){return{element:this.element,sortable:this,appendToBottom:true};
}else{if(this.element[0]==v&&this._isLastHidden()){x=this.items().eq(0);
return{element:x,sortable:this,appendAfterHidden:true};
}else{if(t){return this._searchConnectedTargets(v,u);
}}}}},_findElementUnderCursor:function(u){var v=m.elementUnderCursor(u),t=u.sender;
if(h(t.hint[0],v)){t.hint.hide();
v=m.elementUnderCursor(u);
if(!v){v=m.elementUnderCursor(u);
}t.hint.show();
}return v;
},_searchConnectedTargets:function(v,u){var t=a(this.options.connectWith),z,x,y;
for(var w=0;
w<t.length;
w++){z=t.eq(w).getKendoSortable();
if(a.contains(t[w],v)){if(z){x=z.items();
y=x.filter(v)[0]||x.has(v)[0];
if(y){z.placeholder=this.placeholder;
return{element:a(y),sortable:z};
}else{return null;
}}}else{if(t[w]==v){if(z&&z._isEmpty()){return{element:t.eq(w),sortable:z,appendToBottom:true};
}else{if(this._isCursorAfterLast(z,u)){y=z.items().last();
return{element:y,sortable:z};
}}}}}},_isCursorAfterLast:function(y,v){var w=y.items().last(),t={left:v.x.location,top:v.y.location},x,u;
x=m.getOffset(w);
x.top+=w.outerHeight();
x.left+=w.outerWidth();
if(this._isFloating(w)){u=x.left-t.left;
}else{u=x.top-t.top;
}return u<0?true:false;
},_movementByAxis:function(t,u,w,x){var v=(t==="x")?u.left:u.top,y=(w<0)?this.placeholder.prev():this.placeholder.next(),z;
if(y.length&&!y.is(":visible")){y=(w<0)?y.prev():y.next();
}a.extend(x,{target:y});
z=this._getElementCenter(y);
if(z){z=(t==="x")?z.left:z.top;
}if(y.length&&w<0&&v-z<0){this._movePlaceholder({element:y,sortable:this},"prev",x);
}else{if(y.length&&w>0&&v-z>0){this._movePlaceholder({element:y,sortable:this},"next",x);
}}},_movePlaceholder:function(w,t,u){var v=this.placeholder;
if(!w.sortable.trigger(e,u)){if(!t){w.element.append(v);
}else{if(t==="prev"){w.element.before(v);
}else{if(t==="next"){w.element.after(v);
}}}w.sortable.trigger(o,u);
}},_setCursor:function(){var u=this.options.cursor,t;
if(u&&u!=="auto"){t=a(document.body);
this._originalCursorType=t.css("cursor");
t.css({cursor:u});
if(!this._cursorStylesheet){this._cursorStylesheet=a("<style>* { cursor: "+u+" !important; }</style>");
}this._cursorStylesheet.appendTo(t);
}},_resetCursor:function(){if(this._originalCursorType){a(document.body).css("cursor",this._originalCursorType);
this._originalCursorType=null;
this._cursorStylesheet.remove();
}},_getElementCenter:function(u){var t=u.length?m.getOffset(u):null;
if(t){t.top+=u.outerHeight()/2;
t.left+=u.outerWidth()/2;
}return t;
},_isFloating:function(t){return(/left|right/).test(t.css("float"))||(/inline|table-cell/).test(t.css("display"));
},_cancel:function(){this.draggedElement.show();
this.placeholder.remove();
},_items:function(){var t=this.options.filter,u;
if(t){u=this.element.find(t);
}else{u=this.element.children();
}return u;
},indexOf:function(u){var v=this._items(),w=this.placeholder,t=this.draggedElement;
if(w&&u[0]==w[0]){return v.not(t).index(u);
}else{return v.not(w).index(u);
}},items:function(){var u=this.placeholder,t=this._items();
if(u){t=t.not(u);
}return t;
},_isEmpty:function(){return !this.items().length;
},_isLastHidden:function(){return this.items().length===1&&this.items().is(":hidden");
}});
m.ui.plugin(p);
})(window.kendo.jQuery);
})();
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b){b();
});
