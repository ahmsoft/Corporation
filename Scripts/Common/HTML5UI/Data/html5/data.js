(function(b,a){a(["./kendo.core","./kendo.data.odata","./kendo.data.xml"],b);
})(function(){(function(){(function(a,aV){var A=a.extend,ax=a.proxy,X=a.isPlainObject,U=a.isEmptyObject,S=a.isArray,I=a.grep,b=a.ajax,ac,v=a.each,ai=a.noop,Z=window.kendo,V=Z.isFunction,ao=Z.Observable,h=Z.Class,aP="string",D="function",n="create",aB="read",aX="update",u="destroy",g="change",aR="sync",F="get",y="error",aI="requestStart",aw="progress",aH="requestEnd",o=[n,aB,aX,u],L=function(a0){return a0;
},H=Z.getter,aQ=Z.stringify,ad=Math,ay=[].push,Y=[].join,av=[].pop,aM=[].splice,aK=[].shift,aL=[].slice,aW=[].unshift,aT={}.toString,aO=Z.support.stableSort,s=/^\/Date\((.*?)\)\/$/,ag=/(\r+|\n+)/g,aA=/(?=['\\])/g;
var ap=ao.extend({init:function(a0,a2){var a1=this;
a1.type=a2||aq;
ao.fn.init.call(a1);
a1.length=a0.length;
a1.wrapAll(a0,a1);
},at:function(a0){return this[a0];
},toJSON:function(){var a0,a2=this.length,a3,a1=new Array(a2);
for(a0=0;
a0<a2;
a0++){a3=this[a0];
if(a3 instanceof aq){a3=a3.toJSON();
}a1[a0]=a3;
}return a1;
},parent:ai,wrapAll:function(a3,a4){var a5=this,a0,a1,a2=function(){return a5;
};
a4=a4||[];
for(a0=0,a1=a3.length;
a0<a1;
a0++){a4[a0]=a5.wrap(a3[a0],a2);
}return a4;
},wrap:function(a0,a2){var a3=this,a1;
if(a0!==null&&aT.call(a0)==="[object Object]"){a1=a0 instanceof a3.type||a0 instanceof af;
if(!a1){a0=a0 instanceof aq?a0.toJSON():a0;
a0=new a3.type(a0);
}a0.parent=a2;
a0.bind(g,function(a4){a3.trigger(g,{field:a4.field,node:a4.node,index:a4.index,items:a4.items||[this],action:a4.node?(a4.action||"itemloaded"):"itemchange"});
});
}return a0;
},push:function(){var a0=this.length,a1=this.wrapAll(arguments),a2;
a2=ay.apply(this,a1);
this.trigger(g,{action:"add",index:a0,items:a1});
return a2;
},slice:aL,sort:[].sort,join:Y,pop:function(){var a0=this.length,a1=av.apply(this);
if(a0){this.trigger(g,{action:"remove",index:a0-1,items:[a1]});
}return a1;
},splice:function(a2,a0,a3){var a4=this.wrapAll(aL.call(arguments,2)),a6,a1,a5;
a6=aM.apply(this,[a2,a0].concat(a4));
if(a6.length){this.trigger(g,{action:"remove",index:a2,items:a6});
for(a1=0,a5=a6.length;
a1<a5;
a1++){if(a6[a1]&&a6[a1].children){a6[a1].unbind(g);
}}}if(a3){this.trigger(g,{action:"add",index:a2,items:a4});
}return a6;
},shift:function(){var a0=this.length,a1=aK.apply(this);
if(a0){this.trigger(g,{action:"remove",index:0,items:[a1]});
}return a1;
},unshift:function(){var a0=this.wrapAll(arguments),a1;
a1=aW.apply(this,a0);
this.trigger(g,{action:"add",index:0,items:a0});
return a1;
},indexOf:function(a1){var a3=this,a0,a2;
for(a0=0,a2=a3.length;
a0<a2;
a0++){if(a3[a0]===a1){return a0;
}}return -1;
},forEach:function(a0){var a1=0,a2=this.length;
for(;
a1<a2;
a1++){a0(this[a1],a1,this);
}},map:function(a0){var a1=0,a3=[],a2=this.length;
for(;
a1<a2;
a1++){a3[a1]=a0(this[a1],a1,this);
}return a3;
},reduce:function(a0){var a1=0,a3,a2=this.length;
if(arguments.length==2){a3=arguments[1];
}else{if(a1<a2){a3=this[a1++];
}}for(;
a1<a2;
a1++){a3=a0(a3,this[a1],a1,this);
}return a3;
},reduceRight:function(a0){var a1=this.length-1,a2;
if(arguments.length==2){a2=arguments[1];
}else{if(a1>0){a2=this[a1--];
}}for(;
a1>=0;
a1--){a2=a0(a2,this[a1],a1,this);
}return a2;
},filter:function(a0){var a1=0,a4=[],a2,a3=this.length;
for(;
a1<a3;
a1++){a2=this[a1];
if(a0(a2,a1,this)){a4[a4.length]=a2;
}}return a4;
},find:function(a0){var a1=0,a2,a3=this.length;
for(;
a1<a3;
a1++){a2=this[a1];
if(a0(a2,a1,this)){return a2;
}}},every:function(a0){var a1=0,a2,a3=this.length;
for(;
a1<a3;
a1++){a2=this[a1];
if(!a0(a2,a1,this)){return false;
}}return true;
},some:function(a0){var a1=0,a2,a3=this.length;
for(;
a1<a3;
a1++){a2=this[a1];
if(a0(a2,a1,this)){return true;
}}return false;
},remove:function(a1){var a0=this.indexOf(a1);
if(a0!==-1){this.splice(a0,1);
}},empty:function(){this.splice(0,this.length);
}});
var aa=ap.extend({init:function(a0,a2){ao.fn.init.call(this);
this.type=a2||aq;
for(var a1=0;
a1<a0.length;
a1++){this[a1]=a0[a1];
}this.length=a1;
this._parent=ax(function(){return this;
},this);
},at:function(a0){var a1=this[a0];
if(!(a1 instanceof this.type)){a1=this[a0]=this.wrap(a1,this._parent);
}else{a1.parent=this._parent;
}return a1;
}});
function z(a0,a3,a1,a2){return function(a4){var a5={},a6;
for(a6 in a4){a5[a6]=a4[a6];
}if(a2){a5.field=a1+"."+a4.field;
}else{a5.field=a1;
}if(a3==g&&a0._notifyChange){a0._notifyChange(a5);
}a0.trigger(a3,a5);
};
}var aq=ao.extend({init:function(a4){var a3=this,a1,a0,a2=function(){return a3;
};
ao.fn.init.call(this);
this._handlers={};
for(a0 in a4){a1=a4[a0];
if(typeof a1==="object"&&a1&&!a1.getTime&&a0.charAt(0)!="_"){a1=a3.wrap(a1,a0,a2);
}a3[a0]=a1;
}a3.uid=Z.guid();
},shouldSerialize:function(a0){return this.hasOwnProperty(a0)&&a0!=="_handlers"&&a0!=="_events"&&typeof this[a0]!==D&&a0!=="uid";
},forEach:function(a0){for(var a1 in this){if(this.shouldSerialize(a1)){a0(this[a1],a1);
}}},toJSON:function(){var a1={},a2,a0;
for(a0 in this){if(this.shouldSerialize(a0)){a2=this[a0];
if(a2 instanceof aq||a2 instanceof ap){a2=a2.toJSON();
}a1[a0]=a2;
}}return a1;
},get:function(a0){var a2=this,a1;
a2.trigger(F,{field:a0});
if(a0==="this"){a1=a2;
}else{a1=Z.getter(a0,true)(a2);
}return a1;
},_set:function(a1,a6){var a5=this;
var a0=a1.indexOf(".")>=0;
if(a0){var a4=a1.split("."),a3="";
while(a4.length>1){a3+=a4.shift();
var a2=Z.getter(a3,true)(a5);
if(a2 instanceof aq){a2.set(a4.join("."),a6);
return a0;
}a3+=".";
}}Z.setter(a1)(a5,a6);
return a0;
},set:function(a2,a4){var a3=this,a0=a2.indexOf(".")>=0,a1=Z.getter(a2,true)(a3);
if(a1!==a4){if(a1 instanceof ao&&this._handlers[a2]){if(this._handlers[a2].get){a1.unbind(F,this._handlers[a2].get);
}a1.unbind(g,this._handlers[a2].change);
}if(!a3.trigger("set",{field:a2,value:a4})){if(!a0){a4=a3.wrap(a4,a2,function(){return a3;
});
}if(!a3._set(a2,a4)||a2.indexOf("(")>=0||a2.indexOf("[")>=0){a3.trigger(g,{field:a2});
}}}},parent:ai,wrap:function(a5,a1,a6){var a7=this;
var a2;
var a0;
var a8=aT.call(a5);
if(a5!=null&&(a8==="[object Object]"||a8==="[object Array]")){var a4=a5 instanceof ap;
var a3=a5 instanceof r;
if(a8==="[object Object]"&&!a3&&!a4){if(!(a5 instanceof aq)){a5=new aq(a5);
}a2=z(a7,F,a1,true);
a5.bind(F,a2);
a0=z(a7,g,a1,true);
a5.bind(g,a0);
a7._handlers[a1]={get:a2,change:a0};
}else{if(a8==="[object Array]"||a4||a3){if(!a4&&!a3){a5=new ap(a5);
}a0=z(a7,g,a1,false);
a5.bind(g,a0);
a7._handlers[a1]={change:a0};
}}a5.parent=a6;
}return a5;
}});
function x(a1,a3){if(a1===a3){return true;
}var a2=a.type(a1),a4=a.type(a3),a0;
if(a2!==a4){return false;
}if(a2==="date"){return a1.getTime()===a3.getTime();
}if(a2!=="object"&&a2!=="array"){return false;
}for(a0 in a1){if(!x(a1[a0],a3[a0])){return false;
}}return true;
}var au={number:function(a0){return Z.parseFloat(a0);
},date:function(a0){return Z.parseDate(a0);
},"boolean":function(a0){if(typeof a0===aP){return a0.toLowerCase()==="true";
}return a0!=null?!!a0:a0;
},string:function(a0){return a0!=null?(a0+""):a0;
},"default":function(a0){return a0;
}};
var t={string:"",number:0,date:new Date(),"boolean":false,"default":""};
function G(a3,a2){var a0,a1;
for(a1 in a3){a0=a3[a1];
if(X(a0)&&a0.field&&a0.field===a2){return a0;
}else{if(a0===a2){return a0;
}}}return null;
}var af=aq.extend({init:function(a0){var a3=this;
if(!a0||a.isEmptyObject(a0)){a0=a.extend({},a3.defaults,a0);
if(a3._initializers){for(var a1=0;
a1<a3._initializers.length;
a1++){var a2=a3._initializers[a1];
a0[a2]=a3.defaults[a2]();
}}}aq.fn.init.call(a3,a0);
a3.dirty=false;
if(a3.idField){a3.id=a3.get(a3.idField);
if(a3.id===aV){a3.id=a3._defaultId;
}}},shouldSerialize:function(a0){return aq.fn.shouldSerialize.call(this,a0)&&a0!=="uid"&&!(this.idField!=="id"&&a0==="id")&&a0!=="dirty"&&a0!=="_accessors";
},_parse:function(a0,a5){var a4=this,a1=a0,a2=(a4.fields||{}),a3;
a0=a2[a0];
if(!a0){a0=G(a2,a1);
}if(a0){a3=a0.parse;
if(!a3&&a0.type){a3=au[a0.type.toLowerCase()];
}}return a3?a3(a5):a5;
},_notifyChange:function(a1){var a0=a1.action;
if(a0=="add"||a0=="remove"){this.dirty=true;
}},editable:function(a0){a0=(this.fields||{})[a0];
return a0?a0.editable!==false:true;
},set:function(a0,a3,a1){var a2=this;
if(a2.editable(a0)){a3=a2._parse(a0,a3);
if(!x(a3,a2.get(a0))){a2.dirty=true;
aq.fn.set.call(a2,a0,a3,a1);
}}},accept:function(a0){var a3=this,a2=function(){return a3;
},a1;
for(a1 in a0){var a4=a0[a1];
if(a1.charAt(0)!="_"){a4=a3.wrap(a0[a1],a1,a2);
}a3._set(a1,a4);
}if(a3.idField){a3.id=a3.get(a3.idField);
}a3.dirty=false;
},isNew:function(){return this.id===this._defaultId;
}});
af.define=function(a0,a9){if(a9===aV){a9=a0;
a0=af;
}var a7,bb=A({defaults:{}},a9),a8,a1,bc,bd,a5,a6,a2={},ba,a4=bb.id,a3=[];
if(a4){bb.idField=a4;
}if(bb.id){delete bb.id;
}if(a4){bb.defaults[a4]=bb._defaultId="";
}if(aT.call(bb.fields)==="[object Array]"){for(a5=0,a6=bb.fields.length;
a5<a6;
a5++){a1=bb.fields[a5];
if(typeof a1===aP){a2[a1]={};
}else{if(a1.field){a2[a1.field]=a1;
}}}bb.fields=a2;
}for(a8 in bb.fields){a1=bb.fields[a8];
bc=a1.type||"default";
bd=null;
ba=a8;
a8=typeof(a1.field)===aP?a1.field:a8;
if(!a1.nullable){bd=bb.defaults[ba!==a8?ba:a8]=a1.defaultValue!==aV?a1.defaultValue:t[bc.toLowerCase()];
if(typeof bd==="function"){a3.push(a8);
}}if(a9.id===a8){bb._defaultId=bd;
}bb.defaults[ba!==a8?ba:a8]=bd;
a1.parse=a1.parse||au[bc];
}if(a3.length>0){bb._initializers=a3;
}a7=a0.extend(bb);
a7.define=function(be){return af.define(a7,be);
};
if(bb.fields){a7.fields=bb.fields;
a7.idField=bb.idField;
}return a7;
};
var i={selector:function(a0){return V(a0)?a0:H(a0);
},compare:function(a0){var a1=this.selector(a0);
return function(a2,a3){a2=a1(a2);
a3=a1(a3);
if(a2==null&&a3==null){return 0;
}if(a2==null){return -1;
}if(a3==null){return 1;
}if(a2.localeCompare){return a2.localeCompare(a3);
}return a2>a3?1:(a2<a3?-1:0);
};
},create:function(a1){var a0=a1.compare||this.compare(a1.field);
if(a1.dir=="desc"){return function(a2,a3){return a0(a3,a2,true);
};
}return a0;
},combine:function(a0){return function(a1,a2){var a5=a0[0](a1,a2),a3,a4;
for(a3=1,a4=a0.length;
a3<a4;
a3++){a5=a5||a0[a3](a1,a2);
}return a5;
};
}};
var aN=A({},i,{asc:function(a0){var a1=this.selector(a0);
return function(a2,a3){var a4=a1(a2);
var a5=a1(a3);
if(a4&&a4.getTime&&a5&&a5.getTime){a4=a4.getTime();
a5=a5.getTime();
}if(a4===a5){return a2.__position-a3.__position;
}if(a4==null){return -1;
}if(a5==null){return 1;
}if(a4.localeCompare){return a4.localeCompare(a5);
}return a4>a5?1:-1;
};
},desc:function(a0){var a1=this.selector(a0);
return function(a2,a3){var a4=a1(a2);
var a5=a1(a3);
if(a4&&a4.getTime&&a5&&a5.getTime){a4=a4.getTime();
a5=a5.getTime();
}if(a4===a5){return a2.__position-a3.__position;
}if(a4==null){return 1;
}if(a5==null){return -1;
}if(a5.localeCompare){return a5.localeCompare(a4);
}return a4<a5?1:-1;
};
},create:function(a0){return this[a0.dir](a0.field);
}});
ac=function(a0,a1){var a2,a3=a0.length,a4=new Array(a3);
for(a2=0;
a2<a3;
a2++){a4[a2]=a1(a0[a2],a2,a0);
}return a4;
};
var at=(function(){function a1(a2){return a2.replace(aA,"\\").replace(ag,"");
}function a0(a6,a2,a3,a5){var a4;
if(a3!=null){if(typeof a3===aP){a3=a1(a3);
a4=s.exec(a3);
if(a4){a3=new Date(+a4[1]);
}else{if(a5){a3="'"+a3.toLowerCase()+"'";
a2="("+a2+" || '').toLowerCase()";
}else{a3="'"+a3+"'";
}}}if(a3.getTime){a2="("+a2+"?"+a2+".getTime():"+a2+")";
a3=a3.getTime();
}}return a2+" "+a6+" "+a3;
}return{quote:function(a2){if(a2&&a2.getTime){return"new Date("+a2.getTime()+")";
}if(typeof a2=="string"){return"'"+a1(a2)+"'";
}return""+a2;
},eq:function(a2,a3,a4){return a0("==",a2,a3,a4);
},neq:function(a2,a3,a4){return a0("!=",a2,a3,a4);
},gt:function(a2,a3,a4){return a0(">",a2,a3,a4);
},gte:function(a2,a3,a4){return a0(">=",a2,a3,a4);
},lt:function(a2,a3,a4){return a0("<",a2,a3,a4);
},lte:function(a2,a3,a4){return a0("<=",a2,a3,a4);
},startswith:function(a2,a3,a4){if(a4){a2="("+a2+" || '').toLowerCase()";
if(a3){a3=a3.toLowerCase();
}}if(a3){a3=a1(a3);
}return a2+".lastIndexOf('"+a3+"', 0) == 0";
},doesnotstartwith:function(a2,a3,a4){if(a4){a2="("+a2+" || '').toLowerCase()";
if(a3){a3=a3.toLowerCase();
}}if(a3){a3=a1(a3);
}return a2+".lastIndexOf('"+a3+"', 0) == -1";
},endswith:function(a2,a3,a4){if(a4){a2="("+a2+" || '').toLowerCase()";
if(a3){a3=a3.toLowerCase();
}}if(a3){a3=a1(a3);
}return a2+".indexOf('"+a3+"', "+a2+".length - "+(a3||"").length+") >= 0";
},doesnotendwith:function(a2,a3,a4){if(a4){a2="("+a2+" || '').toLowerCase()";
if(a3){a3=a3.toLowerCase();
}}if(a3){a3=a1(a3);
}return a2+".indexOf('"+a3+"', "+a2+".length - "+(a3||"").length+") < 0";
},contains:function(a2,a3,a4){if(a4){a2="("+a2+" || '').toLowerCase()";
if(a3){a3=a3.toLowerCase();
}}if(a3){a3=a1(a3);
}return a2+".indexOf('"+a3+"') >= 0";
},doesnotcontain:function(a2,a3,a4){if(a4){a2="("+a2+" || '').toLowerCase()";
if(a3){a3=a3.toLowerCase();
}}if(a3){a3=a1(a3);
}return a2+".indexOf('"+a3+"') == -1";
}};
})();
function az(a0){this.data=a0||[];
}az.filterExpr=function(a1){var a2=[],a9={and:" && ",or:" || "},a7,a8,a5,a0,a4=[],bb=[],a3,ba,a6=a1.filters;
for(a7=0,a8=a6.length;
a7<a8;
a7++){a5=a6[a7];
a3=a5.field;
ba=a5.operator;
if(a5.filters){a0=az.filterExpr(a5);
a5=a0.expression.replace(/__o\[(\d+)\]/g,function(bd,bc){bc=+bc;
return"__o["+(bb.length+bc)+"]";
}).replace(/__f\[(\d+)\]/g,function(bd,bc){bc=+bc;
return"__f["+(a4.length+bc)+"]";
});
bb.push.apply(bb,a0.operators);
a4.push.apply(a4,a0.fields);
}else{if(typeof a3===D){a0="__f["+a4.length+"](d)";
a4.push(a3);
}else{a0=Z.expr(a3);
}if(typeof ba===D){a5="__o["+bb.length+"]("+a0+", "+at.quote(a5.value)+")";
bb.push(ba);
}else{a5=at[(ba||"eq").toLowerCase()](a0,a5.value,a5.ignoreCase!==aV?a5.ignoreCase:true);
}}a2.push(a5);
}return{expression:"("+a2.join(a9[a1.logic])+")",fields:a4,operators:bb};
};
function an(a3,a2){if(a3){var a0=typeof a3===aP?{field:a3,dir:a2}:a3,a1=S(a0)?a0:(a0!==aV?[a0]:[]);
return I(a1,function(a4){return !!a4.dir;
});
}}var ar={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"};
function am(a0){var a3,a4,a1,a5,a2=a0.filters;
if(a2){for(a3=0,a4=a2.length;
a3<a4;
a3++){a1=a2[a3];
a5=a1.operator;
if(a5&&typeof a5===aP){a1.operator=ar[a5.toLowerCase()]||a5;
}am(a1);
}}}function ak(a0){if(a0&&!U(a0)){if(S(a0)||!a0.filters){a0={logic:"and",filters:S(a0)?a0:[a0]};
}am(a0);
return a0;
}}az.normalizeFilter=ak;
function aj(a0){return S(a0)?a0:[a0];
}function al(a3,a2){var a0=typeof a3===aP?{field:a3,dir:a2}:a3,a1=S(a0)?a0:(a0!==aV?[a0]:[]);
return ac(a1,function(a4){return{field:a4.field,dir:a4.dir||"asc",aggregates:a4.aggregates};
});
}az.prototype={toArray:function(){return this.data;
},range:function(a1,a0){return new az(this.data.slice(a1,a1+a0));
},skip:function(a0){return new az(this.data.slice(a0));
},take:function(a0){return new az(this.data.slice(0,a0));
},select:function(a0){return new az(ac(this.data,a0));
},order:function(a1,a0){var a2={dir:a0};
if(a1){if(a1.compare){a2.compare=a1.compare;
}else{a2.field=a1;
}}return new az(this.data.slice(0).sort(i.create(a2)));
},orderBy:function(a0){return this.order(a0,"asc");
},orderByDescending:function(a0){return this.order(a0,"desc");
},sort:function(a4,a3,a0){var a5,a6,a2=an(a4,a3),a1=[];
a0=a0||i;
if(a2.length){for(a5=0,a6=a2.length;
a5<a6;
a5++){a1.push(a0.create(a2[a5]));
}return this.orderBy({compare:a0.combine(a1)});
}return this;
},filter:function(a3){var a6,a1,a7,a0,a9,a2=this.data,a4,a8,ba=[],a5;
a3=ak(a3);
if(!a3||a3.filters.length===0){return this;
}a0=az.filterExpr(a3);
a4=a0.fields;
a8=a0.operators;
a9=a5=new Function("d, __f, __o","return "+a0.expression);
if(a4.length||a8.length){a5=function(bb){return a9(bb,a4,a8);
};
}for(a6=0,a7=a2.length;
a6<a7;
a6++){a1=a2[a6];
if(a5(a1)){ba.push(a1);
}}return new az(ba);
},group:function(a2,a0){a2=al(a2||[]);
a0=a0||this.data;
var a4=this,a3=new az(a4.data),a1;
if(a2.length>0){a1=a2[0];
a3=a3.groupBy(a1).select(function(a6){var a5=new az(a0).filter([{field:a6.field,operator:"eq",value:a6.value,ignoreCase:false}]);
return{field:a6.field,value:a6.value,items:a2.length>1?new az(a6.items).group(a2.slice(1),a5.toArray()).toArray():a6.items,hasSubgroups:a2.length>1,aggregates:a5.aggregate(a1.aggregates)};
});
}return a3;
},groupBy:function(a2){if(U(a2)||!this.data.length){return new az([]);
}var a3=a2.field,ba=this._sortForGrouping(a3,a2.dir||"asc"),a0=Z.accessor(a3),a7,a5=a0.get(ba[0],a3),a4={field:a3,value:a5,items:[]},a1,a6,a8,a9=[a4];
for(a6=0,a8=ba.length;
a6<a8;
a6++){a7=ba[a6];
a1=a0.get(a7,a3);
if(!J(a5,a1)){a5=a1;
a4={field:a3,value:a5,items:[]};
a9.push(a4);
}a4.items.push(a7);
}return new az(a9);
},_sortForGrouping:function(a2,a1){var a3,a4,a0=this.data;
if(!aO){for(a3=0,a4=a0.length;
a3<a4;
a3++){a0[a3].__position=a3;
}a0=new az(a0).sort(a2,a1,aN).toArray();
for(a3=0,a4=a0.length;
a3<a4;
a3++){delete a0[a3].__position;
}return a0;
}return this.sort(a2,a1).toArray();
},aggregate:function(a0){var a1,a2,a3={},a4={};
if(a0&&a0.length){for(a1=0,a2=this.data.length;
a1<a2;
a1++){f(a3,a0,this.data[a1],a1,a2,a4);
}}return a3;
}};
function J(a0,a1){if(a0&&a0.getTime&&a1&&a1.getTime){return a0.getTime()===a1.getTime();
}return a0===a1;
}function f(a0,a2,a7,a6,a9,ba){a2=a2||[];
var a5,a1,a4,a8=a2.length;
for(a5=0;
a5<a8;
a5++){a1=a2[a5];
a4=a1.aggregate;
var a3=a1.field;
a0[a3]=a0[a3]||{};
ba[a3]=ba[a3]||{};
ba[a3][a4]=ba[a3][a4]||{};
a0[a3][a4]=E[a4.toLowerCase()](a0[a3][a4],a7,Z.accessor(a3),a6,a9,ba[a3][a4]);
}}var E={sum:function(a1,a2,a0){var a3=a0.get(a2);
if(!W(a1)){a1=a3;
}else{if(W(a3)){a1+=a3;
}}return a1;
},count:function(a0){return(a0||0)+1;
},average:function(a1,a3,a0,a2,a4,a5){var a6=a0.get(a3);
if(a5.count===aV){a5.count=0;
}if(!W(a1)){a1=a6;
}else{if(W(a6)){a1+=a6;
}}if(W(a6)){a5.count++;
}if(a2==a4-1&&W(a1)){a1=a1/a5.count;
}return a1;
},max:function(a1,a2,a0){var a3=a0.get(a2);
if(!W(a1)&&!T(a1)){a1=a3;
}if(a1<a3&&(W(a3)||T(a3))){a1=a3;
}return a1;
},min:function(a1,a2,a0){var a3=a0.get(a2);
if(!W(a1)&&!T(a1)){a1=a3;
}if(a1>a3&&(W(a3)||T(a3))){a1=a3;
}return a1;
}};
function W(a0){return typeof a0==="number"&&!isNaN(a0);
}function T(a0){return a0&&a0.getTime;
}function aS(a0){var a1,a2=a0.length,a3=new Array(a2);
for(a1=0;
a1<a2;
a1++){a3[a1]=a0[a1].toJSON();
}return a3;
}az.process=function(a0,a4){a4=a4||{};
var a5=new az(a0),a3=a4.group,a7=al(a3||[]).concat(an(a4.sort||[])),a9,a2=a4.filterCallback,a1=a4.filter,a6=a4.skip,a8=a4.take;
if(a1){a5=a5.filter(a1);
if(a2){a5=a2(a5);
}a9=a5.toArray().length;
}if(a7){a5=a5.sort(a7);
if(a3){a0=a5.toArray();
}}if(a6!==aV&&a8!==aV){a5=a5.range(a6,a8);
}if(a3){a5=a5.group(a3,a0);
}return{total:a9,data:a5.toArray()};
};
var ab=h.extend({init:function(a0){this.data=a0.data;
},read:function(a0){a0.success(this.data);
},update:function(a0){a0.success(a0.data);
},create:function(a0){a0.success(a0.data);
},destroy:function(a0){a0.success(a0.data);
}});
var aC=h.extend({init:function(a0){var a2=this,a1;
a0=a2.options=A({},a2.options,a0);
v(o,function(a3,a4){if(typeof a0[a4]===aP){a0[a4]={url:a0[a4]};
}});
a2.cache=a0.cache?e.create(a0.cache):{find:ai,add:ai};
a1=a0.parameterMap;
if(V(a0.push)){a2.push=a0.push;
}if(!a2.push){a2.push=L;
}a2.parameterMap=V(a1)?a1:function(a3){var a4={};
v(a3,function(a5,a6){if(a5 in a1){a5=a1[a5];
if(X(a5)){a6=a5.value(a6);
a5=a5.key;
}}a4[a5]=a6;
});
return a4;
};
},options:{parameterMap:L},create:function(a0){return b(this.setup(a0,n));
},read:function(a2){var a5=this,a4,a1,a3,a0=a5.cache;
a2=a5.setup(a2,aB);
a4=a2.success||ai;
a1=a2.error||ai;
a3=a0.find(a2.data);
if(a3!==aV){a4(a3);
}else{a2.success=function(a6){a0.add(a2.data,a6);
a4(a6);
};
a.ajax(a2);
}},update:function(a0){return b(this.setup(a0,aX));
},destroy:function(a0){return b(this.setup(a0,u));
},setup:function(a2,a5){a2=a2||{};
var a4=this,a3,a1=a4.options[a5],a0=V(a1.data)?a1.data(a2.data):a1.data;
a2=A(true,{},a1,a2);
a3=A(true,{},a0,a2.data);
a2.data=a4.parameterMap(a3,a5);
if(V(a2.url)){a2.url=a2.url(a3);
}return a2;
}});
var e=h.extend({init:function(){this._store={};
},add:function(a1,a0){if(a1!==aV){this._store[aQ(a1)]=a0;
}},find:function(a0){return this._store[aQ(a0)];
},clear:function(){this._store={};
},remove:function(a0){delete this._store[aQ(a0)];
}});
e.create=function(a0){var a1={inmemory:function(){return new e();
}};
if(X(a0)&&V(a0.find)){return a0;
}if(a0===true){return new e();
}return a1[a0]();
};
function aJ(a0,a3,a6,a7,a1){var a9,a2,a8,a4,a5;
for(a4=0,a5=a0.length;
a4<a5;
a4++){a9=a0[a4];
for(a2 in a3){a8=a1[a2];
if(a8&&a8!==a2){a9[a8]=a3[a2](a9);
delete a9[a2];
}}}}function m(a0,a3,a6,a7,a1){var a9,a2,a8,a4,a5;
for(a4=0,a5=a0.length;
a4<a5;
a4++){a9=a0[a4];
for(a2 in a3){a9[a2]=a6._parse(a2,a3[a2](a9));
a8=a1[a2];
if(a8&&a8!==a2){delete a9[a8];
}}}}function l(a0,a3,a6,a7,a2){var a8,a4,a1,a5;
for(a4=0,a5=a0.length;
a4<a5;
a4++){a8=a0[a4];
a1=a7[a8.field];
if(a1&&a1!=a8.field){a8.field=a1;
}a8.value=a6._parse(a8.field,a8.value);
if(a8.hasSubgroups){l(a8.items,a3,a6,a7,a2);
}else{m(a8.items,a3,a6,a7,a2);
}}}function aY(a5,a3,a0,a2,a4,a1){return function(a6){a6=a5(a6);
if(a6&&!U(a2)){if(aT.call(a6)!=="[object Array]"&&!(a6 instanceof ap)){a6=[a6];
}a0(a6,a2,new a3(),a4,a1);
}return a6||[];
};
}var q=h.extend({init:function(ba){var be=this,a7,a4,a8,a0;
ba=ba||{};
for(a7 in ba){a4=ba[a7];
be[a7]=typeof a4===aP?H(a4):a4;
}a0=ba.modelBase||af;
if(X(be.model)){be.model=a8=a0.define(be.model);
}var a1=ax(be.data,be);
be._dataAccessFunction=a1;
if(be.model){var a6=ax(be.groups,be),bb=ax(be.serialize,be),a9={},a5={},bc={},a3={},bd=false,a2;
a8=be.model;
if(a8.fields){v(a8.fields,function(bf,bh){var bg;
a2=bf;
if(X(bh)&&bh.field){a2=bh.field;
}else{if(typeof bh===aP){a2=bh;
}}if(X(bh)&&bh.from){bg=bh.from;
}bd=bd||(bg&&bg!==bf)||a2!==bf;
a5[bf]=H(bg||a2);
bc[bf]=H(bf);
a9[bg||a2]=bf;
a3[bf]=bg||a2;
});
if(!ba.serialize&&bd){be.serialize=aY(bb,a8,aJ,bc,a9,a3);
}}be._dataAccessFunction=a1;
be.data=aY(a1,a8,m,a5,a9,a3);
be.groups=aY(a6,a8,l,a5,a9,a3);
}},errors:function(a0){return a0?a0.errors:null;
},parse:L,data:L,total:function(a0){return a0.length;
},groups:L,aggregates:function(){return{};
},serialize:function(a0){return a0;
}});
function ae(a7,a0,a5,a6){var a1,a2=0,a3;
while(a0.length&&a6){a1=a0[a2];
a3=a1.items;
var a4=a3.length;
if(a7&&a7.field===a1.field&&a7.value===a1.value){if(a7.hasSubgroups&&a7.items.length){ae(a7.items[a7.items.length-1],a1.items,a5,a6);
}else{a3=a3.slice(a5,a5+a6);
a7.items=a7.items.concat(a3);
}a0.splice(a2--,1);
}else{if(a1.hasSubgroups&&a3.length){ae(a1,a3,a5,a6);
if(!a1.items.length){a0.splice(a2--,1);
}}else{a3=a3.slice(a5,a5+a6);
a1.items=a3;
if(!a1.items.length){a0.splice(a2--,1);
}}}if(a3.length===0){a5-=a4;
}else{a5=0;
a6-=a3.length;
}if(++a2>=a0.length){break;
}}if(a2<a0.length){a0.splice(a2,a0.length-a2);
}}function C(a0){var a2,a6=[],a5,a4,a3;
for(a2=0,a5=a0.length;
a2<a5;
a2++){var a1=a0.at(a2);
if(a1.hasSubgroups){a6=a6.concat(C(a1.items));
}else{a4=a1.items;
for(a3=0;
a3<a4.length;
a3++){a6.push(a4.at(a3));
}}}return a6;
}function aZ(a0,a4){var a2,a3,a1;
if(a4){for(a2=0,a3=a0.length;
a2<a3;
a2++){a1=a0.at(a2);
if(a1.hasSubgroups){aZ(a1.items,a4);
}else{a1.items=new aa(a1.items,a4);
}}}}function w(a0,a1){for(var a2=0,a3=a0.length;
a2<a3;
a2++){if(a0[a2].hasSubgroups){if(w(a0[a2].items,a1)){return true;
}}else{if(a1(a0[a2].items,a0[a2])){return true;
}}}}function aF(a4,a0,a2,a3){for(var a1=0;
a1<a4.length;
a1++){if(a4[a1].data===a0){break;
}if(aE(a4[a1].data,a2,a3)){break;
}}}function aE(a2,a1,a4){for(var a0=0,a3=a2.length;
a0<a3;
a0++){if(a2[a0]&&a2[a0].hasSubgroups){return aE(a2[a0].items,a1,a4);
}else{if(a2[a0]===a1||a2[a0]===a4){a2[a0]=a4;
return true;
}}}}function aG(a7,a0,a4,a6,a5){for(var a8=0,a3=a7.length;
a8<a3;
a8++){var a2=a7[a8];
if(!a2||a2 instanceof a6){continue;
}if(a2.hasSubgroups!==aV&&!a5){aG(a2.items,a0,a4,a6,a5);
}else{for(var a1=0;
a1<a0.length;
a1++){if(a0[a1]===a2){a7[a8]=a0.at(a1);
aF(a4,a0,a2,a7[a8]);
break;
}}}}}function aD(a0,a4){var a2,a3;
for(a2=0,a3=a0.length;
a2<a3;
a2++){var a1=a0.at(a2);
if(a1.uid==a4.uid){a0.splice(a2,1);
return a1;
}}}function O(a0,a1){if(a1){return M(a0,function(a2){return(a2.uid&&a2.uid==a1.uid)||(a2[a1.idField]===a1.id&&a1.id!==a1._defaultId);
});
}return -1;
}function N(a0,a1){if(a1){return M(a0,function(a2){return a2.uid==a1.uid;
});
}return -1;
}function M(a1,a0){var a2,a3;
for(a2=0,a3=a1.length;
a2<a3;
a2++){if(a0(a1[a2])){return a2;
}}return -1;
}function B(a2,a3){if(a2&&!U(a2)){var a0=a2[a3];
var a1;
if(X(a0)){a1=a0.from||a0.field||a3;
}else{a1=a2[a3]||a3;
}if(V(a1)){return a3;
}return a1;
}return a3;
}function k(a0,a4){var a2,a3,a5={};
for(var a1 in a0){if(a1!=="filters"){a5[a1]=a0[a1];
}}if(a0.filters){a5.filters=[];
for(a2=0,a3=a0.filters.length;
a2<a3;
a2++){a5.filters[a2]=k(a0.filters[a2],a4);
}}else{a5.field=B(a4.fields,a5.field);
}return a5;
}function j(a1,a5){var a3,a4,a6=[],a7,a0;
for(a3=0,a4=a1.length;
a3<a4;
a3++){a7={};
a0=a1[a3];
for(var a2 in a0){a7[a2]=a0[a2];
}a7.field=B(a5.fields,a7.field);
if(a7.aggregates&&S(a7.aggregates)){a7.aggregates=j(a7.aggregates,a5);
}a6.push(a7);
}return a6;
}var r=ao.extend({init:function(a3){var a4=this,a2,a0;
if(a3){a0=a3.data;
}a3=a4.options=A({},a4.options,a3);
a4._map={};
a4._prefetch={};
a4._data=[];
a4._pristineData=[];
a4._ranges=[];
a4._view=[];
a4._pristineTotal=0;
a4._destroyed=[];
a4._pageSize=a3.pageSize;
a4._page=a3.page||(a3.pageSize?1:aV);
a4._sort=an(a3.sort);
a4._filter=ak(a3.filter);
a4._group=al(a3.group);
a4._aggregate=a3.aggregate;
a4._total=a3.total;
a4._shouldDetachObservableParents=true;
ao.fn.init.call(a4);
a4.transport=aU.create(a3,a0,a4);
if(V(a4.transport.push)){a4.transport.push({pushCreate:ax(a4._pushCreate,a4),pushUpdate:ax(a4._pushUpdate,a4),pushDestroy:ax(a4._pushDestroy,a4)});
}if(a3.offlineStorage!=null){if(typeof a3.offlineStorage=="string"){var a1=a3.offlineStorage;
a4._storage={getItem:function(){return JSON.parse(localStorage.getItem(a1));
},setItem:function(a5){localStorage.setItem(a1,aQ(a4.reader.serialize(a5)));
}};
}else{a4._storage=a3.offlineStorage;
}}a4.reader=new Z.data.readers[a3.schema.type||"json"](a3.schema);
a2=a4.reader.model||{};
a4._detachObservableParents();
a4._data=a4._observe(a4._data);
a4._online=true;
a4.bind(["push",y,g,aI,aR,aH,aw],a3);
},options:{data:null,schema:{modelBase:af},offlineStorage:null,serverSorting:false,serverPaging:false,serverFiltering:false,serverGrouping:false,serverAggregates:false,batch:false},clone:function(){return this;
},online:function(a0){if(a0!==aV){if(this._online!=a0){this._online=a0;
if(a0){return this.sync();
}}return a.Deferred().resolve().promise();
}else{return this._online;
}},offlineData:function(a0){if(this.options.offlineStorage==null){return null;
}if(a0!==aV){return this._storage.setItem(a0);
}return this._storage.getItem()||[];
},_isServerGrouped:function(){var a0=this.group()||[];
return this.options.serverGrouping&&a0.length;
},_pushCreate:function(a0){this._push(a0,"pushCreate");
},_pushUpdate:function(a0){this._push(a0,"pushUpdate");
},_pushDestroy:function(a0){this._push(a0,"pushDestroy");
},_push:function(a2,a1){var a0=this._readData(a2);
if(!a0){a0=a2;
}this[a1](a0);
},_flatData:function(a0,a2){if(a0){if(this._isServerGrouped()){return C(a0);
}if(!a2){for(var a1=0;
a1<a0.length;
a1++){a0.at(a1);
}}}return a0;
},parent:ai,get:function(a1){var a2,a3,a0=this._flatData(this._data);
for(a2=0,a3=a0.length;
a2<a3;
a2++){if(a0[a2].id==a1){return a0[a2];
}}},getByUid:function(a1){var a2,a3,a0=this._flatData(this._data);
if(!a0){return;
}for(a2=0,a3=a0.length;
a2<a3;
a2++){if(a0[a2].uid==a1){return a0[a2];
}}},indexOf:function(a0){return N(this._data,a0);
},at:function(a0){return this._data.at(a0);
},data:function(a2){var a1=this;
if(a2!==aV){a1._detachObservableParents();
a1._data=this._observe(a2);
a1._pristineData=a2.slice(0);
a1._storeData();
a1._ranges=[];
a1.trigger("reset");
a1._addRange(a1._data);
a1._total=a1._data.length;
a1._pristineTotal=a1._total;
a1._process(a1._data);
}else{if(a1._data){for(var a0=0;
a0<a1._data.length;
a0++){a1._data.at(a0);
}}return a1._data;
}},view:function(a0){if(a0===aV){return this._view;
}else{this._view=this._observeView(a0);
}},_observeView:function(a0){var a1=this;
aG(a0,a1._data,a1._ranges,a1.reader.model||aq,a1._isServerGrouped());
var a2=new aa(a0,a1.reader.model);
a2.parent=function(){return a1.parent();
};
return a2;
},flatView:function(){var a0=this.group()||[];
if(a0.length){return C(this._view);
}else{return this._view;
}},add:function(a0){return this.insert(this._data.length,a0);
},_createNewModel:function(a0){if(this.reader.model){return new this.reader.model(a0);
}if(a0 instanceof aq){return a0;
}return new aq(a0);
},insert:function(a0,a1){if(!a1){a1=a0;
a0=0;
}if(!(a1 instanceof af)){a1=this._createNewModel(a1);
}if(this._isServerGrouped()){this._data.splice(a0,0,this._wrapInEmptyGroup(a1));
}else{this._data.splice(a0,0,a1);
}return a1;
},pushCreate:function(a3){if(!S(a3)){a3=[a3];
}var a5=[];
var a0=this.options.autoSync;
this.options.autoSync=false;
try{for(var a1=0;
a1<a3.length;
a1++){var a2=a3[a1];
var a6=this.add(a2);
a5.push(a6);
var a4=a6.toJSON();
if(this._isServerGrouped()){a4=this._wrapInEmptyGroup(a4);
}this._pristineData.push(a4);
}}finally{this.options.autoSync=a0;
}if(a5.length){this.trigger("push",{type:"create",items:a5});
}},pushUpdate:function(a2){if(!S(a2)){a2=[a2];
}var a4=[];
for(var a0=0;
a0<a2.length;
a0++){var a1=a2[a0];
var a3=this._createNewModel(a1);
var a5=this.get(a3.id);
if(a5){a4.push(a5);
a5.accept(a1);
a5.trigger(g);
this._updatePristineForModel(a5,a1);
}else{this.pushCreate(a1);
}}if(a4.length){this.trigger("push",{type:"update",items:a4});
}},pushDestroy:function(a0){var a1=this._removeItems(a0);
if(a1.length){this.trigger("push",{type:"destroy",items:a1});
}},_removeItems:function(a5){if(!S(a5)){a5=[a5];
}var a1=[];
var a0=this.options.autoSync;
this.options.autoSync=false;
try{for(var a3=0;
a3<a5.length;
a3++){var a4=a5[a3];
var a6=this._createNewModel(a4);
var a2=false;
this._eachItem(this._data,function(a9){for(var a7=0;
a7<a9.length;
a7++){var a8=a9.at(a7);
if(a8.id===a6.id){a1.push(a8);
a9.splice(a7,1);
a2=true;
break;
}}});
if(a2){this._removePristineForModel(a6);
this._destroyed.pop();
}}}finally{this.options.autoSync=a0;
}return a1;
},remove:function(a1){var a2,a3=this,a0=a3._isServerGrouped();
this._eachItem(a3._data,function(a4){a2=aD(a4,a1);
if(a2&&a0){if(!a2.isNew||!a2.isNew()){a3._destroyed.push(a2);
}return true;
}});
this._removeModelFromRanges(a1);
this._updateRangesLength();
return a1;
},destroyed:function(){return this._destroyed;
},created:function(){var a1,a2,a3=[],a0=this._flatData(this._data);
for(a1=0,a2=a0.length;
a1<a2;
a1++){if(a0[a1].isNew&&a0[a1].isNew()){a3.push(a0[a1]);
}}return a3;
},updated:function(){var a1,a2,a3=[],a0=this._flatData(this._data);
for(a1=0,a2=a0.length;
a1<a2;
a1++){if((a0[a1].isNew&&!a0[a1].isNew())&&a0[a1].dirty){a3.push(a0[a1]);
}}return a3;
},sync:function(){var a4=this,a0=[],a5=[],a1=a4._destroyed;
var a2=a.Deferred().resolve().promise();
if(a4.online()){if(!a4.reader.model){return a2;
}a0=a4.created();
a5=a4.updated();
var a3=[];
if(a4.options.batch&&a4.transport.submit){a3=a4._sendSubmit(a0,a5,a1);
}else{a3.push.apply(a3,a4._send("create",a0));
a3.push.apply(a3,a4._send("update",a5));
a3.push.apply(a3,a4._send("destroy",a1));
}a2=a.when.apply(null,a3).then(function(){var a6,a7;
for(a6=0,a7=arguments.length;
a6<a7;
a6++){a4._accept(arguments[a6]);
}a4._storeData(true);
a4._change({action:"sync"});
a4.trigger(aR);
});
}else{a4._storeData(true);
a4._change({action:"sync"});
}return a2;
},cancelChanges:function(a0){var a1=this;
if(a0 instanceof Z.data.Model){a1._cancelModel(a0);
}else{a1._destroyed=[];
a1._detachObservableParents();
a1._data=a1._observe(a1._pristineData);
if(a1.options.serverPaging){a1._total=a1._pristineTotal;
}a1._ranges=[];
a1._addRange(a1._data);
a1._change();
}},hasChanges:function(){var a1,a2,a0=this._flatData(this._data);
if(this._destroyed.length){return true;
}for(a1=0,a2=a0.length;
a1<a2;
a1++){if((a0[a1].isNew&&a0[a1].isNew())||a0[a1].dirty){return true;
}}return false;
},_accept:function(a5){var a7=this,a2=a5.models,a4=a5.response,a0=0,a6=a7._isServerGrouped(),a3=a7._pristineData,a8=a5.type,a1;
a7.trigger(aH,{response:a4,type:a8});
if(a4&&!U(a4)){a4=a7.reader.parse(a4);
if(a7._handleCustomErrors(a4)){return;
}a4=a7.reader.data(a4);
if(!S(a4)){a4=[a4];
}}else{a4=a.map(a2,function(a9){return a9.toJSON();
});
}if(a8==="destroy"){a7._destroyed=[];
}for(a0=0,a1=a2.length;
a0<a1;
a0++){if(a8!=="destroy"){a2[a0].accept(a4[a0]);
if(a8==="create"){a3.push(a6?a7._wrapInEmptyGroup(a2[a0]):a4[a0]);
}else{if(a8==="update"){a7._updatePristineForModel(a2[a0],a4[a0]);
}}}else{a7._removePristineForModel(a2[a0]);
}}},_updatePristineForModel:function(a0,a1){this._executeOnPristineForModel(a0,function(a2,a3){Z.deepExtend(a3[a2],a1);
});
},_executeOnPristineForModel:function(a1,a0){this._eachPristineItem(function(a3){var a2=O(a3,a1);
if(a2>-1){a0(a2,a3);
return true;
}});
},_removePristineForModel:function(a0){this._executeOnPristineForModel(a0,function(a1,a2){a2.splice(a1,1);
});
},_readData:function(a0){var a1=!this._isServerGrouped()?this.reader.data:this.reader.groups;
return a1.call(this.reader,a0);
},_eachPristineItem:function(a0){this._eachItem(this._pristineData,a0);
},_eachItem:function(a1,a0){if(a1&&a1.length){if(this._isServerGrouped()){w(a1,a0);
}else{a0(a1);
}}},_pristineForModel:function(a2){var a3,a1,a0=function(a4){a1=O(a4,a2);
if(a1>-1){a3=a4[a1];
return true;
}};
this._eachPristineItem(a0);
return a3;
},_cancelModel:function(a0){var a1=this._pristineForModel(a0);
this._eachItem(this._data,function(a3){var a2=N(a3,a0);
if(a2>=0){if(a1&&(!a0.isNew()||a1.__state__)){a3[a2].accept(a1);
}else{a3.splice(a2,1);
}}});
},_submit:function(a1,a0){var a2=this;
a2.trigger(aI,{type:"submit"});
a2.transport.submit(A({success:function(a4,a5){var a3=a.grep(a1,function(a6){return a6.type==a5;
})[0];
if(a3){a3.resolve({response:a4,models:a3.models,type:a5});
}},error:function(a5,a6,a3){for(var a4=0;
a4<a1.length;
a4++){a1[a4].reject(a5);
}a2.error(a5,a6,a3);
}},a0));
},_sendSubmit:function(a0,a4,a1){var a3=this,a2=[];
if(a3.options.batch){if(a0.length){a2.push(a.Deferred(function(a5){a5.type="create";
a5.models=a0;
}));
}if(a4.length){a2.push(a.Deferred(function(a5){a5.type="update";
a5.models=a4;
}));
}if(a1.length){a2.push(a.Deferred(function(a5){a5.type="destroy";
a5.models=a1;
}));
}a3._submit(a2,{data:{created:a3.reader.serialize(aS(a0)),updated:a3.reader.serialize(aS(a4)),destroyed:a3.reader.serialize(aS(a1))}});
}return a2;
},_promise:function(a0,a1,a3){var a2=this;
return a.Deferred(function(a4){a2.trigger(aI,{type:a3});
a2.transport[a3].call(a2.transport,A({success:function(a5){a4.resolve({response:a5,models:a1,type:a3});
},error:function(a6,a7,a5){a4.reject(a6);
a2.error(a6,a7,a5);
}},a0));
}).promise();
},_send:function(a4,a1){var a6=this,a2,a3,a5=[],a0=a6.reader.serialize(aS(a1));
if(a6.options.batch){if(a1.length){a5.push(a6._promise({data:{models:a0}},a1,a4));
}}else{for(a2=0,a3=a1.length;
a2<a3;
a2++){a5.push(a6._promise({data:a0[a2]},[a1[a2]],a4));
}}return a5;
},read:function(a0){var a3=this,a2=a3._params(a0);
var a1=a.Deferred();
a3._queueRequest(a2,function(){var a4=a3.trigger(aI,{type:"read"});
if(!a4){a3.trigger(aw);
a3._ranges=[];
a3.trigger("reset");
if(a3.online()){a3.transport.read({data:a2,success:function(a5){a3.success(a5,a2);
a1.resolve();
},error:function(){var a5=aL.call(arguments);
a3.error.apply(a3,a5);
a1.reject.apply(a1,a5);
}});
}else{if(a3.options.offlineStorage!=null){a3.success(a3.offlineData(),a2);
a1.resolve();
}}}else{a3._dequeueRequest();
a1.resolve(a4);
}});
return a1.promise();
},_readAggregates:function(a0){return this.reader.aggregates(a0);
},success:function(a0){var ba=this,a8=ba.options;
ba.trigger(aH,{response:a0,type:"read"});
if(ba.online()){a0=ba.reader.parse(a0);
if(ba._handleCustomErrors(a0)){ba._dequeueRequest();
return;
}ba._total=ba.reader.total(a0);
if(ba._aggregate&&a8.serverAggregates){ba._aggregateResult=ba._readAggregates(a0);
}a0=ba._readData(a0);
}else{a0=ba._readData(a0);
var a6=[];
var a5={};
var a7=ba.reader.model;
var a2=a7?a7.idField:"id";
var a3;
for(a3=0;
a3<this._destroyed.length;
a3++){var a1=this._destroyed[a3][a2];
a5[a1]=a1;
}for(a3=0;
a3<a0.length;
a3++){var a4=a0[a3];
var a9=a4.__state__;
if(a9=="destroy"){if(!a5[a4[a2]]){this._destroyed.push(this._createNewModel(a4));
}}else{a6.push(a4);
}}a0=a6;
ba._total=a0.length;
}ba._pristineTotal=ba._total;
ba._pristineData=a0.slice(0);
ba._detachObservableParents();
ba._data=ba._observe(a0);
if(ba.options.offlineStorage!=null){ba._eachItem(ba._data,function(bd){for(var bb=0;
bb<bd.length;
bb++){var bc=bd.at(bb);
if(bc.__state__=="update"){bc.dirty=true;
}}});
}ba._storeData();
ba._addRange(ba._data);
ba._process(ba._data);
ba._dequeueRequest();
},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents){for(var a0=0;
a0<this._data.length;
a0++){if(this._data[a0].parent){this._data[a0].parent=ai;
}}}},_storeData:function(a7){var a5=this._isServerGrouped();
var a4=this.reader.model;
function a3(a8){var bc=[];
for(var ba=0;
ba<a8.length;
ba++){var a9=a8.at(ba);
var bb=a9.toJSON();
if(a5&&a9.items){bb.items=a3(a9.items);
}else{bb.uid=a9.uid;
if(a4){if(a9.isNew()){bb.__state__="create";
}else{if(a9.dirty){bb.__state__="update";
}}}}bc.push(bb);
}return bc;
}if(this.options.offlineStorage!=null){var a6=a3(this._data);
var a0=[];
for(var a1=0;
a1<this._destroyed.length;
a1++){var a2=this._destroyed[a1].toJSON();
a2.__state__="destroy";
a0.push(a2);
}this.offlineData(a6.concat(a0));
if(a7){this._pristineData=a6;
}}},_addRange:function(a0){var a3=this,a2=a3._skip||0,a1=a2+a3._flatData(a0,true).length;
a3._ranges.push({start:a2,end:a1,data:a0,timestamp:new Date().getTime()});
a3._ranges.sort(function(a4,a5){return a4.start-a5.start;
});
},error:function(a2,a1,a0){this._dequeueRequest();
this.trigger(aH,{});
this.trigger(y,{xhr:a2,status:a1,errorThrown:a0});
},_params:function(a0){var a2=this,a1=A({take:a2.take(),skip:a2.skip(),page:a2.page(),pageSize:a2.pageSize(),sort:a2._sort,filter:a2._filter,group:a2._group,aggregate:a2._aggregate},a0);
if(!a2.options.serverPaging){delete a1.take;
delete a1.skip;
delete a1.page;
delete a1.pageSize;
}if(!a2.options.serverGrouping){delete a1.group;
}else{if(a2.reader.model&&a1.group){a1.group=j(a1.group,a2.reader.model);
}}if(!a2.options.serverFiltering){delete a1.filter;
}else{if(a2.reader.model&&a1.filter){a1.filter=k(a1.filter,a2.reader.model);
}}if(!a2.options.serverSorting){delete a1.sort;
}else{if(a2.reader.model&&a1.sort){a1.sort=j(a1.sort,a2.reader.model);
}}if(!a2.options.serverAggregates){delete a1.aggregate;
}else{if(a2.reader.model&&a1.aggregate){a1.aggregate=j(a1.aggregate,a2.reader.model);
}}return a1;
},_queueRequest:function(a1,a0){var a2=this;
if(!a2._requestInProgress){a2._requestInProgress=true;
a2._pending=aV;
a0();
}else{a2._pending={callback:ax(a0,a2),options:a1};
}},_dequeueRequest:function(){var a0=this;
a0._requestInProgress=false;
if(a0._pending){a0._queueRequest(a0._pending.options,a0._pending.callback);
}},_handleCustomErrors:function(a1){if(this.reader.errors){var a0=this.reader.errors(a1);
if(a0){this.trigger(y,{xhr:null,status:"customerror",errorThrown:"custom error",errors:a0});
return true;
}}return false;
},_shouldWrap:function(a0){var a1=this.reader.model;
if(a1&&a0.length){return !(a0[0] instanceof a1);
}return false;
},_observe:function(a1){var a3=this,a2=a3.reader.model;
a3._shouldDetachObservableParents=true;
if(a1 instanceof ap){a3._shouldDetachObservableParents=false;
if(a3._shouldWrap(a1)){a1.type=a3.reader.model;
a1.wrapAll(a1,a1);
}}else{var a0=a3.pageSize()&&!a3.options.serverPaging?aa:ap;
a1=new a0(a1,a3.reader.model);
a1.parent=function(){return a3.parent();
};
}if(a3._isServerGrouped()){aZ(a1,a2);
}if(a3._changeHandler&&a3._data&&a3._data instanceof ap){a3._data.unbind(g,a3._changeHandler);
}else{a3._changeHandler=ax(a3._change,a3);
}return a1.bind(g,a3._changeHandler);
},_updateTotalForAction:function(a0,a1){var a2=this;
var a3=parseInt(a2._total,10);
if(!W(a2._total)){a3=parseInt(a2._pristineTotal,10);
}if(a0==="add"){a3+=a1.length;
}else{if(a0==="remove"){a3-=a1.length;
}else{if(a0!=="itemchange"&&a0!=="sync"&&!a2.options.serverPaging){a3=a2._pristineTotal;
}else{if(a0==="sync"){a3=a2._pristineTotal=parseInt(a2._total,10);
}}}}a2._total=a3;
},_change:function(a1){var a5=this,a3,a4,a0=a1?a1.action:"";
if(a0==="remove"){for(a3=0,a4=a1.items.length;
a3<a4;
a3++){if(!a1.items[a3].isNew||!a1.items[a3].isNew()){a5._destroyed.push(a1.items[a3]);
}}}if(a5.options.autoSync&&(a0==="add"||a0==="remove"||a0==="itemchange")){var a2=function(a6){if(a6.action==="sync"){a5.unbind("change",a2);
a5._updateTotalForAction(a0,a1.items);
}};
a5.first("change",a2);
a5.sync();
}else{a5._updateTotalForAction(a0,a1?a1.items:[]);
a5._process(a5._data,a1);
}},_calculateAggregates:function(a1,a3){a3=a3||{};
var a4=new az(a1),a0=a3.aggregate,a2=a3.filter;
if(a2){a4=a4.filter(a2);
}return a4.aggregate(a0);
},_process:function(a0,a1){var a4=this,a2={},a3;
if(a4.options.serverPaging!==true){a2.skip=a4._skip;
a2.take=a4._take||a4._pageSize;
if(a2.skip===aV&&a4._page!==aV&&a4._pageSize!==aV){a2.skip=(a4._page-1)*a4._pageSize;
}}if(a4.options.serverSorting!==true){a2.sort=a4._sort;
}if(a4.options.serverFiltering!==true){a2.filter=a4._filter;
}if(a4.options.serverGrouping!==true){a2.group=a4._group;
}if(a4.options.serverAggregates!==true){a2.aggregate=a4._aggregate;
a4._aggregateResult=a4._calculateAggregates(a0,a2);
}a3=a4._queryProcess(a0,a2);
a4.view(a3.data);
if(a3.total!==aV&&!a4.options.serverFiltering){a4._total=a3.total;
}a1=a1||{};
a1.items=a1.items||a4._view;
a4.trigger(g,a1);
},_queryProcess:function(a0,a1){return az.process(a0,a1);
},_mergeState:function(a0){var a1=this;
if(a0!==aV){a1._pageSize=a0.pageSize;
a1._page=a0.page;
a1._sort=a0.sort;
a1._filter=a0.filter;
a1._group=a0.group;
a1._aggregate=a0.aggregate;
a1._skip=a0.skip;
a1._take=a0.take;
if(a1._skip===aV){a1._skip=a1.skip();
a0.skip=a1.skip();
}if(a1._take===aV&&a1._pageSize!==aV){a1._take=a1._pageSize;
a0.take=a1._take;
}if(a0.sort){a1._sort=a0.sort=an(a0.sort);
}if(a0.filter){a1._filter=a0.filter=ak(a0.filter);
}if(a0.group){a1._group=a0.group=al(a0.group);
}if(a0.aggregate){a1._aggregate=a0.aggregate=aj(a0.aggregate);
}}return a0;
},query:function(a1){var a3;
var a2=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;
if(a2||((this._data===aV||this._data.length===0)&&!this._destroyed.length)){return this.read(this._mergeState(a1));
}var a0=this.trigger(aI,{type:"read"});
if(!a0){this.trigger(aw);
a3=this._queryProcess(this._data,this._mergeState(a1));
if(!this.options.serverFiltering){if(a3.total!==aV){this._total=a3.total;
}else{this._total=this._data.length;
}}this._aggregateResult=this._calculateAggregates(this._data,a1);
this.view(a3.data);
this.trigger(aH,{type:"read"});
this.trigger(g,{items:a3.data});
}return a.Deferred().resolve(a0).promise();
},fetch:function(a0){var a2=this;
var a1=function(a3){if(a3!==true&&V(a0)){a0.call(a2);
}};
return this._query().then(a1);
},_query:function(a0){var a1=this;
return a1.query(A({},{page:a1.page(),pageSize:a1.pageSize(),sort:a1.sort(),filter:a1.filter(),group:a1.group(),aggregate:a1.aggregate()},a0));
},next:function(a0){var a2=this,a1=a2.page(),a3=a2.total();
a0=a0||{};
if(!a1||(a3&&a1+1>a2.totalPages())){return;
}a2._skip=a1*a2.take();
a1+=1;
a0.page=a1;
a2._query(a0);
return a1;
},prev:function(a0){var a2=this,a1=a2.page();
a0=a0||{};
if(!a1||a1===1){return;
}a2._skip=a2._skip-a2.take();
a1-=1;
a0.page=a1;
a2._query(a0);
return a1;
},page:function(a2){var a1=this,a0;
if(a2!==aV){a2=ad.max(ad.min(ad.max(a2,1),a1.totalPages()),1);
a1._query({page:a2});
return;
}a0=a1.skip();
return a0!==aV?ad.round((a0||0)/(a1.take()||1))+1:aV;
},pageSize:function(a1){var a0=this;
if(a1!==aV){a0._query({pageSize:a1,page:1});
return;
}return a0.take();
},sort:function(a1){var a0=this;
if(a1!==aV){a0._query({sort:a1});
return;
}return a0._sort;
},filter:function(a1){var a0=this;
if(a1===aV){return a0._filter;
}a0.trigger("reset");
a0._query({filter:a1,page:1});
},group:function(a1){var a0=this;
if(a1!==aV){a0._query({group:a1});
return;
}return a0._group;
},total:function(){return parseInt(this._total||0,10);
},aggregate:function(a1){var a0=this;
if(a1!==aV){a0._query({aggregate:a1});
return;
}return a0._aggregate;
},aggregates:function(){var a0=this._aggregateResult;
if(U(a0)){a0=this._emptyAggregates(this.aggregate());
}return a0;
},_emptyAggregates:function(a1){var a3={};
if(!U(a1)){var a0={};
if(!S(a1)){a1=[a1];
}for(var a2=0;
a2<a1.length;
a2++){a0[a1[a2].aggregate]=0;
a3[a1[a2].field]=a0;
}}return a3;
},_wrapInEmptyGroup:function(a4){var a1=this.group(),a5,a0,a2,a3;
for(a2=a1.length-1,a3=0;
a2>=a3;
a2--){a0=a1[a2];
a5={value:a4.get(a0.field),field:a0.field,items:a5?[a5]:[a4],hasSubgroups:!!a5,aggregates:this._emptyAggregates(a0.aggregates)};
}return a5;
},totalPages:function(){var a1=this,a0=a1.pageSize()||a1.total();
return ad.ceil((a1.total()||0)/a0);
},inRange:function(a1,a2){var a3=this,a0=ad.min(a1+a2,a3.total());
if(!a3.options.serverPaging&&a3._data.length>0){return true;
}return a3._findRange(a1,a0).length>0;
},lastRange:function(){var a0=this._ranges;
return a0[a0.length-1]||{start:0,end:0,data:[]};
},firstItemUid:function(){var a0=this._ranges;
return a0.length&&a0[0].data.length&&a0[0].data[0].uid;
},enableRequestsInProgress:function(){this._skipRequestsInProgress=false;
},_timeStamp:function(){return new Date().getTime();
},range:function(a6,a8){this._currentRequestTimeStamp=this._timeStamp();
this._skipRequestsInProgress=true;
a6=ad.min(a6||0,this.total());
var a9=this,a3=ad.max(ad.floor(a6/a8),0)*a8,a5=ad.min(a3+a8,a9.total()),a1;
a1=a9._findRange(a6,ad.min(a6+a8,a9.total()));
if(a1.length){a9._pending=aV;
a9._skip=a6>a9.skip()?ad.min(a5,(a9.totalPages()-1)*a9.take()):a3;
a9._take=a8;
var a4=a9.options.serverPaging;
var a7=a9.options.serverSorting;
var a2=a9.options.serverFiltering;
var a0=a9.options.serverAggregates;
try{a9.options.serverPaging=true;
if(!a9._isServerGrouped()&&!(a9.group()&&a9.group().length)){a9.options.serverSorting=true;
}a9.options.serverFiltering=true;
a9.options.serverPaging=true;
a9.options.serverAggregates=true;
if(a4){a9._detachObservableParents();
a9._data=a1=a9._observe(a1);
}a9._process(a1);
}finally{a9.options.serverPaging=a4;
a9.options.serverSorting=a7;
a9.options.serverFiltering=a2;
a9.options.serverAggregates=a0;
}return;
}if(a8!==aV){if(!a9._rangeExists(a3,a5)){a9.prefetch(a3,a8,function(){if(a6>a3&&a5<a9.total()&&!a9._rangeExists(a5,ad.min(a5+a8,a9.total()))){a9.prefetch(a5,a8,function(){a9.range(a6,a8);
});
}else{a9.range(a6,a8);
}});
}else{if(a3<a6){a9.prefetch(a5,a8,function(){a9.range(a6,a8);
});
}}}},_findRange:function(bf,a2){var bi=this,bb=bi._ranges,a8,a1=[],bd,bh,bg,a3,a9,ba,a7,a6=bi.options,bc=a6.serverSorting||a6.serverPaging||a6.serverFiltering||a6.serverGrouping||a6.serverAggregates,a4,a0,a5;
for(bd=0,a5=bb.length;
bd<a5;
bd++){a8=bb[bd];
if(bf>=a8.start&&bf<=a8.end){a0=0;
for(bh=bd;
bh<a5;
bh++){a8=bb[bh];
a4=bi._flatData(a8.data,true);
if(a4.length&&bf+a0>=a8.start){a9=a8.data;
ba=a8.end;
if(!bc){var be=al(bi.group()||[]).concat(an(bi.sort()||[]));
a7=bi._queryProcess(a8.data,{sort:be,filter:bi.filter()});
a4=a9=a7.data;
if(a7.total!==aV){ba=a7.total;
}}bg=0;
if(bf+a0>a8.start){bg=(bf+a0)-a8.start;
}a3=a4.length;
if(ba>a2){a3=a3-(ba-a2);
}a0+=a3-bg;
a1=bi._mergeGroups(a1,a9,bg,a3);
if(a2<=a8.end&&a0==a2-bf){return a1;
}}}break;
}}return[];
},_mergeGroups:function(a0,a2,a3,a4){if(this._isServerGrouped()){var a5=a2.toJSON(),a1;
if(a0.length){a1=a0[a0.length-1];
}ae(a1,a5,a3,a4);
return a0.concat(a5);
}return a0.concat(a2.slice(a3,a4));
},skip:function(){var a0=this;
if(a0._skip===aV){return(a0._page!==aV?(a0._page-1)*(a0.take()||1):aV);
}return a0._skip;
},take:function(){return this._take||this._pageSize;
},_prefetchSuccessHandler:function(a3,a2,a0,a1){var a4=this;
var a5=a4._timeStamp();
return function(a6){var a7=false,ba={start:a3,end:a2,data:[],timestamp:a4._timeStamp()},a8,a9,bb;
a4._dequeueRequest();
a4.trigger(aH,{response:a6,type:"read"});
a6=a4.reader.parse(a6);
bb=a4._readData(a6);
if(bb.length){for(a8=0,a9=a4._ranges.length;
a8<a9;
a8++){if(a4._ranges[a8].start===a3){a7=true;
ba=a4._ranges[a8];
break;
}}if(!a7){a4._ranges.push(ba);
}}ba.data=a4._observe(bb);
ba.end=ba.start+a4._flatData(ba.data,true).length;
a4._ranges.sort(function(bc,bd){return bc.start-bd.start;
});
a4._total=a4.reader.total(a6);
if(a1||(a5>=a4._currentRequestTimeStamp||!a4._skipRequestsInProgress)){if(a0&&bb.length){a0();
}else{a4.trigger(g,{});
}}};
},prefetch:function(a3,a4,a0){var a5=this,a2=ad.min(a3+a4,a5.total()),a1={take:a4,skip:a3,page:a3/a4+1,pageSize:a4,sort:a5._sort,filter:a5._filter,group:a5._group,aggregate:a5._aggregate};
if(!a5._rangeExists(a3,a2)){clearTimeout(a5._timeout);
a5._timeout=setTimeout(function(){a5._queueRequest(a1,function(){if(!a5.trigger(aI,{type:"read"})){a5.transport.read({data:a5._params(a1),success:a5._prefetchSuccessHandler(a3,a2,a0),error:function(){var a6=aL.call(arguments);
a5.error.apply(a5,a6);
}});
}else{a5._dequeueRequest();
}});
},100);
}else{if(a0){a0();
}}},_multiplePrefetch:function(a3,a4,a0){var a5=this,a2=ad.min(a3+a4,a5.total()),a1={take:a4,skip:a3,page:a3/a4+1,pageSize:a4,sort:a5._sort,filter:a5._filter,group:a5._group,aggregate:a5._aggregate};
if(!a5._rangeExists(a3,a2)){if(!a5.trigger(aI,{type:"read"})){a5.transport.read({data:a5._params(a1),success:a5._prefetchSuccessHandler(a3,a2,a0,true)});
}}else{if(a0){a0();
}}},_rangeExists:function(a4,a0){var a5=this,a3=a5._ranges,a1,a2;
for(a1=0,a2=a3.length;
a1<a2;
a1++){if(a3[a1].start<=a4&&a3[a1].end>=a0){return true;
}}return false;
},_removeModelFromRanges:function(a3){var a5,a0,a4;
for(var a1=0,a2=this._ranges.length;
a1<a2;
a1++){a4=this._ranges[a1];
this._eachItem(a4.data,function(a6){a5=aD(a6,a3);
if(a5){a0=true;
}});
if(a0){break;
}}},_updateRangesLength:function(){var a4=0,a2,a3;
for(var a0=0,a1=this._ranges.length;
a0<a1;
a0++){a2=this._ranges[a0];
a2.start=a2.start-a4;
a3=this._flatData(a2.data,true).length;
a4=a2.end-a3;
a2.end=a2.start+a3;
}}});
var aU={};
aU.create=function(a2,a0,a1){var a3,a4=a2.transport?a.extend({},a2.transport):null;
if(a4){a4.read=typeof a4.read===aP?{url:a4.read}:a4.read;
if(a2.type==="jsdo"){a4.dataSource=a1;
}if(a2.type){Z.data.transports=Z.data.transports||{};
Z.data.schemas=Z.data.schemas||{};
if(Z.data.transports[a2.type]&&!X(Z.data.transports[a2.type])){a3=new Z.data.transports[a2.type](A(a4,{data:a0}));
}else{a4=A(true,{},Z.data.transports[a2.type],a4);
}a2.schema=A(true,{},Z.data.schemas[a2.type],a2.schema);
}if(!a3){a3=V(a4.read)?a4:new aC(a4);
}}else{a3=new ab({data:a2.data||[]});
}return a3;
};
r.create=function(a7){if(S(a7)||a7 instanceof ap){a7={data:a7};
}var a1=a7||{},a0=a1.data,a3=a1.fields,a9=a1.table,a8=a1.select,a4,a5,a6={},a2;
if(!a0&&a3&&!a1.transport){if(a9){a0=R(a9,a3);
}else{if(a8){a0=Q(a8,a3);
if(a1.group===aV&&a0[0]&&a0[0].optgroup!==aV){a1.group="optgroup";
}}}}if(Z.data.Model&&a3&&(!a1.schema||!a1.schema.model)){for(a4=0,a5=a3.length;
a4<a5;
a4++){a2=a3[a4];
if(a2.type){a6[a2.field]=a2;
}}if(!U(a6)){a1.schema=A(true,a1.schema,{model:{fields:a6}});
}}a1.data=a0;
a8=null;
a1.select=null;
a9=null;
a1.table=null;
return a1 instanceof r?a1:new r(a1);
};
function Q(ba,a1){ba=a(ba)[0];
var a7=ba.options;
var a2=a1[0];
var a9=a1[1];
var a0=[];
var a3,a4;
var a5;
var a6;
var a8;
var bb;
for(a3=0,a4=a7.length;
a3<a4;
a3++){a8={};
a6=a7[a3];
a5=a6.parentNode;
if(a5===ba){a5=null;
}if(a6.disabled||(a5&&a5.disabled)){continue;
}if(a5){a8.optgroup=a5.label;
}a8[a2.field]=a6.text;
bb=a6.attributes.value;
if(bb&&bb.specified){bb=a6.value;
}else{bb=a6.text;
}a8[a9.field]=bb;
a0.push(a8);
}return a0;
}function R(bb,a6){var bc=a(bb)[0].tBodies[0],ba=bc?bc.rows:[],a7,a8,a5,a4=a6.length,a2=[],a1,a9,a0,a3;
for(a7=0,a8=ba.length;
a7<a8;
a7++){a9={};
a3=true;
a1=ba[a7].cells;
for(a5=0;
a5<a4;
a5++){a0=a1[a5];
if(a0.nodeName.toLowerCase()!=="th"){a3=false;
a9[a6[a5].field]=a0.innerHTML;
}}if(!a3){a2.push(a9);
}}return a2;
}var ah=af.define({idField:"id",init:function(a4){var a3=this,a2=a3.hasChildren||a4&&a4.hasChildren,a0="items",a1={};
Z.data.Model.fn.init.call(a3,a4);
if(typeof a3.children===aP){a0=a3.children;
}a1={schema:{data:a0,model:{hasChildren:a2,id:a3.idField,fields:a3.fields}}};
if(typeof a3.children!==aP){A(a1,a3.children);
}a1.data=a4;
if(!a2){a2=a1.schema.data;
}if(typeof a2===aP){a2=Z.getter(a2);
}if(V(a2)){a3.hasChildren=!!a2.call(a3,a3);
}a3._childrenOptions=a1;
if(a3.hasChildren){a3._initChildren();
}a3._loaded=!!(a4&&(a4[a0]||a4._loaded));
},_initChildren:function(){var a2=this;
var a0,a3,a1;
if(!(a2.children instanceof K)){a0=a2.children=new K(a2._childrenOptions);
a3=a0.transport;
a1=a3.parameterMap;
a3.parameterMap=function(a4,a5){a4[a2.idField||"id"]=a2.id;
if(a1){a4=a1(a4,a5);
}return a4;
};
a0.parent=function(){return a2;
};
a0.bind(g,function(a4){a4.node=a4.node||a2;
a2.trigger(g,a4);
});
a0.bind(y,function(a5){var a4=a2.parent();
if(a4){a5.node=a5.node||a2;
a4.trigger(y,a5);
}});
a2._updateChildrenField();
}},append:function(a0){this._initChildren();
this.loaded(true);
this.children.add(a0);
},hasChildren:false,level:function(){var a1=this.parentNode(),a0=0;
while(a1&&a1.parentNode){a0++;
a1=a1.parentNode?a1.parentNode():null;
}return a0;
},_updateChildrenField:function(){var a0=this._childrenOptions.schema.data;
this[a0||"items"]=this.children.data();
},_childrenLoaded:function(){this._loaded=true;
this._updateChildrenField();
},load:function(){var a2={};
var a1="_query";
var a0,a3;
if(this.hasChildren){this._initChildren();
a0=this.children;
a2[this.idField||"id"]=this.id;
if(!this._loaded){a0._data=aV;
a1="read";
}a0.one(g,ax(this._childrenLoaded,this));
a3=a0[a1](a2);
}else{this.loaded(true);
}return a3||a.Deferred().resolve().promise();
},parentNode:function(){var a0=this.parent();
return a0.parent();
},loaded:function(a0){if(a0!==aV){this._loaded=a0;
}else{return this._loaded;
}},shouldSerialize:function(a0){return af.fn.shouldSerialize.call(this,a0)&&a0!=="children"&&a0!=="_loaded"&&a0!=="hasChildren"&&a0!=="_childrenOptions";
}});
function p(a0){return function(){var a1=this._data,a2=r.fn[a0].apply(this,aL.call(arguments));
if(this._data!=a1){this._attachBubbleHandlers();
}return a2;
};
}var K=r.extend({init:function(a1){var a0=ah.define({children:a1});
r.fn.init.call(this,A(true,{},{schema:{modelBase:a0,model:a0}},a1));
this._attachBubbleHandlers();
},_attachBubbleHandlers:function(){var a0=this;
a0._data.bind(y,function(a1){a0.trigger(y,a1);
});
},remove:function(a1){var a2=a1.parentNode(),a0=this,a3;
if(a2&&a2._initChildren){a0=a2.children;
}a3=r.fn.remove.call(a0,a1);
if(a2&&!a0.data().length){a2.hasChildren=false;
}return a3;
},success:p("success"),data:p("data"),insert:function(a0,a1){var a2=this.parent();
if(a2&&a2._initChildren){a2.hasChildren=true;
a2._initChildren();
}return r.fn.insert.call(this,a0,a1);
},_find:function(a4,a6){var a2,a3,a5,a0;
var a1=this._data;
if(!a1){return;
}a5=r.fn[a4].call(this,a6);
if(a5){return a5;
}a1=this._flatData(this._data);
for(a2=0,a3=a1.length;
a2<a3;
a2++){a0=a1[a2].children;
if(!(a0 instanceof K)){continue;
}a5=a0[a4](a6);
if(a5){return a5;
}}},get:function(a0){return this._find("get",a0);
},getByUid:function(a0){return this._find("getByUid",a0);
}});
function P(bb,a4){var a9=a(bb).children(),a6,ba,a2=[],bc,bf=a4[0].field,bg=a4[1]&&a4[1].field,bd=a4[2]&&a4[2].field,a7=a4[3]&&a4[3].field,a8,a5,be,a1,a0;
function a3(bh,bi){return bh.filter(bi).add(bh.find(bi));
}for(a6=0,ba=a9.length;
a6<ba;
a6++){bc={_loaded:true};
a8=a9.eq(a6);
be=a8[0].firstChild;
a0=a8.children();
bb=a0.filter("ul");
a0=a0.filter(":not(ul)");
a5=a8.attr("data-id");
if(a5){bc.id=a5;
}if(be){bc[bf]=be.nodeType==3?be.nodeValue:a0.text();
}if(bg){bc[bg]=a3(a0,"a").attr("href");
}if(a7){bc[a7]=a3(a0,"img").attr("src");
}if(bd){a1=a3(a0,".k-sprite").prop("className");
bc[bd]=a1&&a.trim(a1.replace("k-sprite",""));
}if(bb.length){bc.items=P(bb.eq(0),a4);
}if(a8.attr("data-hasChildren")=="true"){bc.hasChildren=true;
}a2.push(bc);
}return a2;
}K.create=function(a4){a4=a4&&a4.push?{data:a4}:a4;
var a1=a4||{},a0=a1.data,a2=a1.fields,a3=a1.list;
if(a0&&a0._dataSource){return a0._dataSource;
}if(!a0&&a2&&!a1.transport){if(a3){a0=P(a3,a2);
}}a1.data=a0;
return a1 instanceof K?a1:new K(a1);
};
var d=Z.Observable.extend({init:function(a1,a3,a2){Z.Observable.fn.init.call(this);
this._prefetching=false;
this.dataSource=a1;
this.prefetch=!a2;
var a0=this;
a1.bind("change",function(){a0._change();
});
a1.bind("reset",function(){a0._reset();
});
this._syncWithDataSource();
this.setViewSize(a3);
},setViewSize:function(a0){this.viewSize=a0;
this._recalculate();
},at:function(a0){var a2=this.pageSize,a1=true;
if(a0>=this.total()){this.trigger("endreached",{index:a0});
return null;
}if(!this.useRanges){return this.dataSource.view()[a0];
}if(this.useRanges){if(a0<this.dataOffset||a0>=this.skip+a2){a1=this.range(Math.floor(a0/a2)*a2);
}if(a0===this.prefetchThreshold){this._prefetch();
}if(a0===this.midPageThreshold){this.range(this.nextMidRange,true);
}else{if(a0===this.nextPageThreshold){this.range(this.nextFullRange);
}else{if(a0===this.pullBackThreshold){if(this.offset===this.skip){this.range(this.previousMidRange);
}else{this.range(this.previousFullRange);
}}}}if(a1){return this.dataSource.at(a0-this.dataOffset);
}else{this.trigger("endreached",{index:a0});
return null;
}}},indexOf:function(a0){return this.dataSource.data().indexOf(a0)+this.dataOffset;
},total:function(){return parseInt(this.dataSource.total(),10);
},next:function(){var a0=this,a2=a0.pageSize,a1=a0.skip-a0.viewSize+a2,a3=ad.max(ad.floor(a1/a2),0)*a2;
this.offset=a1;
this.dataSource.prefetch(a3,a2,function(){a0._goToRange(a1,true);
});
},range:function(a3,a2){if(this.offset===a3){return true;
}var a0=this,a4=this.pageSize,a5=ad.max(ad.floor(a3/a4),0)*a4,a1=this.dataSource;
if(a2){a5+=a4;
}if(a1.inRange(a3,a4)){this.offset=a3;
this._recalculate();
this._goToRange(a3);
return true;
}else{if(this.prefetch){a1.prefetch(a5,a4,function(){a0.offset=a3;
a0._recalculate();
a0._goToRange(a3,true);
});
return false;
}}return true;
},syncDataSource:function(){var a0=this.offset;
this.offset=null;
this.range(a0);
},destroy:function(){this.unbind();
},_prefetch:function(){var a0=this,a2=this.pageSize,a3=this.skip+a2,a1=this.dataSource;
if(!a1.inRange(a3,a2)&&!this._prefetching&&this.prefetch){this._prefetching=true;
this.trigger("prefetching",{skip:a3,take:a2});
a1.prefetch(a3,a2,function(){a0._prefetching=false;
a0.trigger("prefetched",{skip:a3,take:a2});
});
}},_goToRange:function(a1,a0){if(this.offset!==a1){return;
}this.dataOffset=a1;
this._expanding=a0;
this.dataSource.range(a1,this.pageSize);
this.dataSource.enableRequestsInProgress();
},_reset:function(){this._syncPending=true;
},_change:function(){var a0=this.dataSource;
this.length=this.useRanges?a0.lastRange().end:a0.view().length;
if(this._syncPending){this._syncWithDataSource();
this._recalculate();
this._syncPending=false;
this.trigger("reset",{offset:this.offset});
}this.trigger("resize");
if(this._expanding){this.trigger("expand");
}delete this._expanding;
},_syncWithDataSource:function(){var a0=this.dataSource;
this._firstItemUid=a0.firstItemUid();
this.dataOffset=this.offset=a0.skip()||0;
this.pageSize=a0.pageSize();
this.useRanges=a0.options.serverPaging;
},_recalculate:function(){var a1=this.pageSize,a0=this.offset,a3=this.viewSize,a2=Math.ceil(a0/a1)*a1;
this.skip=a2;
this.midPageThreshold=a2+a1-1;
this.nextPageThreshold=a2+a3-1;
this.prefetchThreshold=a2+Math.floor(a1/3*2);
this.pullBackThreshold=this.offset-1;
this.nextMidRange=a2+a1-a3;
this.nextFullRange=a2;
this.previousMidRange=a0-a3;
this.previousFullRange=a2-a1;
}});
var c=Z.Observable.extend({init:function(a2,a1){var a0=this;
Z.Observable.fn.init.call(a0);
this.dataSource=a2;
this.batchSize=a1;
this._total=0;
this.buffer=new d(a2,a1*3);
this.buffer.bind({endreached:function(a3){a0.trigger("endreached",{index:a3.index});
},prefetching:function(a3){a0.trigger("prefetching",{skip:a3.skip,take:a3.take});
},prefetched:function(a3){a0.trigger("prefetched",{skip:a3.skip,take:a3.take});
},reset:function(){a0._total=0;
a0.trigger("reset");
},resize:function(){a0._total=Math.ceil(this.length/a0.batchSize);
a0.trigger("resize",{total:a0.total(),offset:this.offset});
}});
},syncDataSource:function(){this.buffer.syncDataSource();
},at:function(a2){var a0=this.buffer,a4=a2*this.batchSize,a5=this.batchSize,a6=[],a3;
if(a0.offset>a4){a0.at(a0.offset-1);
}for(var a1=0;
a1<a5;
a1++){a3=a0.at(a4+a1);
if(a3===null){break;
}a6.push(a3);
}return a6;
},total:function(){return this._total;
},destroy:function(){this.buffer.destroy();
this.unbind();
}});
A(true,Z.data,{readers:{json:q},Query:az,DataSource:r,HierarchicalDataSource:K,Node:ah,ObservableObject:aq,ObservableArray:ap,LazyObservableArray:aa,LocalTransport:ab,RemoteTransport:aC,Cache:e,DataReader:q,Model:af,Buffer:d,BatchBuffer:c});
})(window.kendo.jQuery);
})();
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b){b();
});
