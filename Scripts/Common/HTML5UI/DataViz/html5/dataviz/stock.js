(function(b,a){a(["./kendo.dataviz.chart"],b);
})(function(){(function(){(function(a,H){var q=window.kendo,f=q.Class,z=q.Observable,k=q.deepExtend,u=Math,A=a.proxy,I=q.util,r=I.last,B=I.renderTemplate,j=q.dataviz,l=I.defined,p=j.filterSeriesByType,E=q.template,e=j.ui.Chart,C=j.Selection,b=j.addDuration,s=I.limitValue,t=j.lteDateIndex,F=j.toDate,G=j.toTime;
var c=28,d="change",i="k-",m="drag",n="dragEnd",x="_navigator",w=x,o=j.EQUALLY_SPACED_SERIES,K=3,J="zoom",L="zoomEnd";
var D=e.extend({init:function(M,N){a(M).addClass(i+"chart");
e.fn.init.call(this,M,N);
},_applyDefaults:function(N,P){var M=this,Q=M.element.width()||j.DEFAULT_WIDTH;
var O={seriesDefaults:{categoryField:N.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:false},labels:{step:2},majorTicks:{visible:false},maxDateGroups:u.floor(Q/c)}}};
if(P){P=k({},P,O);
}if(!M._navigator){v.setup(N,P);
}e.fn._applyDefaults.call(M,N,P);
},_initDataSource:function(V){var T=V||{},M=T.dataSource,Q=M&&M.serverFiltering,R=[].concat(T.categoryAxis)[0],S=T.navigator||{},U=S.select,P=U&&U.from&&U.to,O,N;
if(Q&&P){O=[].concat(M.filter||[]);
N=new j.DateCategoryAxis(k({baseUnit:"fit"},R,{categories:[U.from,U.to]}));
M.filter=v.buildFilter(N.range().min,U.to).concat(O);
}e.fn._initDataSource.call(this,V);
},options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:true},valueAxis:{narrowRange:true,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:false},tooltip:{visible:true,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:true},tooltip:{visible:true},legend:{visible:false}},_resize:function(){var M=this.options.transitions;
this.options.transitions=false;
this._fullRedraw();
this.options.transitions=M;
},_redraw:function(){var M=this,N=M._navigator;
if(!this._dirty()&&N&&N.dataSource){N.redrawSlaves();
}else{M._fullRedraw();
}},_dirty:function(){var N=this.options;
var O=[].concat(N.series,N.navigator.series);
var P=a.grep(O,function(Q){return Q&&Q.visible;
}).length;
var M=this._seriesCount!==P;
this._seriesCount=P;
return M;
},_fullRedraw:function(){var M=this,N=M._navigator;
if(!N){N=M._navigator=new v(M);
}N._setRange();
e.fn._redraw.call(M);
N._initSelection();
},_onDataChanged:function(){var M=this;
e.fn._onDataChanged.call(M);
M._dataBound=true;
},_bindCategoryAxis:function(N,S,O){var Q=this,P=Q.options.categoryAxis,M=P.length,R;
e.fn._bindCategoryAxis.apply(this,arguments);
if(N.name===w){while(O<M){R=P[O++];
if(R.pane==x){R.categories=N.categories;
}}}},_trackSharedTooltip:function(N){var M=this,P=M._plotArea,O=P.paneByPoint(N);
if(O&&O.options.name===x){M._unsetActivePoint();
}else{e.fn._trackSharedTooltip.call(M,N);
}},destroy:function(){var M=this;
M._navigator.destroy();
e.fn.destroy.call(M);
}});
var v=z.extend({init:function(M){var N=this;
N.chart=M;
N.options=k({},N.options,M.options.navigator);
N._initDataSource();
if(!l(N.options.hint.visible)){N.options.hint.visible=N.options.visible;
}M.bind(m,A(N._drag,N));
M.bind(n,A(N._dragEnd,N));
M.bind(J,A(N._zoom,N));
M.bind(L,A(N._zoomEnd,N));
},options:{},_initDataSource:function(){var O=this,P=O.options,M=P.autoBind,N=P.dataSource;
if(!l(M)){M=O.chart.options.autoBind;
}O._dataChangedHandler=A(O._onDataChanged,O);
if(N){O.dataSource=q.data.DataSource.create(N).bind(d,O._dataChangedHandler);
if(M){O.dataSource.fetch();
}}},_onDataChanged:function(){var T=this,P=T.chart,V=P.options.series,W,X=V.length,O=P.options.categoryAxis,N,M=O.length,S=T.dataSource.view(),R,Q,U;
for(W=0;
W<X;
W++){R=V[W];
if(R.axis==w&&P._isBindable(R)){R.data=S;
}}for(N=0;
N<M;
N++){Q=O[N];
if(Q.pane==x){if(Q.name==w){P._bindCategoryAxis(Q,S,N);
U=Q.categories;
}else{Q.categories=U;
}}}if(P._model){T.redraw();
T.filterAxes();
if(!P.options.dataSource||(P.options.dataSource&&P._dataBound)){T.redrawSlaves();
}}},destroy:function(){var N=this,M=N.dataSource;
if(M){M.unbind(d,N._dataChangeHandler);
}if(N.selection){N.selection.destroy();
}},redraw:function(){this._redrawSelf();
this._initSelection();
},_initSelection:function(){var T=this,O=T.chart,U=T.options,M=T.mainAxis(),N=g(M),V=M.range(),S=V.min,R=V.max,Q=M.options.categories,W=T.options.select,X=T.selection,P=F(W.from),Y=F(W.to);
if(Q.length===0){return;
}if(X){X.destroy();
X.wrapper.remove();
}N.box=M.box;
X=T.selection=new C(O,N,{min:S,max:R,from:P,to:Y,selectStart:a.proxy(T._selectStart,T),select:a.proxy(T._select,T),selectEnd:a.proxy(T._selectEnd,T),mousewheel:{zoom:"left"}});
if(U.hint.visible){T.hint=new y(O.element,{min:S,max:R,template:U.hint.template,format:U.hint.format});
}},_setRange:function(){var R=this.chart._createPlotArea(true);
var M=R.namedCategoryAxes[w];
var N=M.options;
var S=M.range();
var Q=S.min;
var P=b(S.max,N.baseUnitStep,N.baseUnit);
var T=this.options.select||{};
var O=F(T.from)||Q;
if(O<Q){O=Q;
}var U=F(T.to)||P;
if(U>P){U=P;
}this.options.select={from:O,to:U};
this.filterAxes();
},_redrawSelf:function(N){var M=this.chart._plotArea;
if(M){M.redraw(r(M.panes),N);
}},redrawSlaves:function(){var N=this,M=N.chart,O=M._plotArea,P=O.panes.slice(0,-1);
O.srcSeries=M.options.series;
O.redraw(P);
},_drag:function(Q){var T=this,N=T.chart,O=N._eventCoordinates(Q.originalEvent),U=T.mainAxis(),V=U.datesRange(),S=U.pane.box.containsPoint(O),M=N._plotArea.categoryAxis,W=Q.axisRanges[M.options.name],X=T.options.select,Y=T.selection,P,R,Z;
if(!W||S||!Y){return;
}if(X.from&&X.to){P=G(X.to)-G(X.from);
}else{P=G(Y.options.to)-G(Y.options.from);
}R=F(s(G(W.min),V.min,G(V.max)-P));
Z=F(s(G(R)+P,G(V.min)+P,V.max));
T.options.select={from:R,to:Z};
if(T._liveDrag()){T.filterAxes();
T.redrawSlaves();
}Y.set(R,Z);
T.showHint(R,Z);
},_dragEnd:function(){var M=this;
M.filterAxes();
M.filterDataSource();
M.redrawSlaves();
if(M.hint){M.hint.hide();
}},_liveDrag:function(){var Q=q.support,P=Q.touch,M=Q.browser,N=M.mozilla,O=M.msie&&M.version<9;
return !P&&!N&&!O;
},readSelection:function(){var N=this,O=N.selection,P=O.options,M=N.options.select;
M.from=P.from;
M.to=P.to;
},filterAxes:function(){var R=this,S=R.options.select||{},O=R.chart,M=O.options.categoryAxis,P=S.from,T=S.to,Q,N;
for(Q=0;
Q<M.length;
Q++){N=M[Q];
if(N.pane!==x){N.min=F(P);
N.max=F(T);
}}},filterDataSource:function(){var Q=this,R=Q.options.select||{},N=Q.chart,O=N.dataSource,P=O&&O.options.serverFiltering,M;
if(Q.dataSource&&P){M=new j.DateCategoryAxis(k({baseUnit:"fit"},N.options.categoryAxis[0],{categories:[R.from,R.to]})).options;
O.filter(v.buildFilter(b(M.min,-M.baseUnitStep,M.baseUnit),b(M.max,M.baseUnitStep,M.baseUnit)));
}},_zoom:function(Q){var S=this,O=S.chart,P=Q.delta,M=O._plotArea.categoryAxis,T=S.options.select,U=S.selection,N=S.mainAxis().options.categories,R,V;
if(!U){return;
}R=t(U.options.from,N);
V=t(U.options.to,N);
Q.originalEvent.preventDefault();
if(u.abs(P)>1){P*=K;
}if(V-R>1){U.expand(P);
S.readSelection();
}else{M.options.min=T.from;
T.from=M.scaleRange(-Q.delta).min;
}if(!q.support.touch){S.filterAxes();
S.redrawSlaves();
}U.set(T.from,T.to);
S.showHint(S.options.select.from,S.options.select.to);
},_zoomEnd:function(M){this._dragEnd(M);
},showHint:function(N,Q){var O=this,M=O.chart,P=M._plotArea;
if(O.hint){O.hint.show(N,Q,P.backgroundBox());
}},_selectStart:function(N){var M=this.chart;
M._selectStart.call(M,N);
},_select:function(N){var O=this,M=O.chart;
O.showHint(N.from,N.to);
M._select.call(M,N);
},_selectEnd:function(N){var O=this,M=O.chart;
if(O.hint){O.hint.hide();
}O.readSelection();
O.filterAxes();
O.filterDataSource();
O.redrawSlaves();
M._selectEnd.call(M,N);
},mainAxis:function(){var M=this.chart._plotArea;
if(M){return M.namedCategoryAxes[w];
}}});
v.setup=function(N,Q){N=N||{};
Q=Q||{};
var M=k({},Q.navigator,N.navigator),P=N.panes=[].concat(N.panes),O=k({},M.pane,{name:x});
if(!M.visible){O.visible=false;
O.height=0.1;
}P.push(O);
v.attachAxes(N,M);
v.attachSeries(N,M,Q);
};
v.attachAxes=function(R,Q){var N,U,S=Q.series||[];
N=R.categoryAxis=[].concat(R.categoryAxis);
U=R.valueAxis=[].concat(R.valueAxis);
var O=p(S,o);
var P=O.length===0;
var M=k({type:"date",pane:x,roundToBaseUnit:!P,justified:P,_collapse:false,majorTicks:{visible:true},tooltip:{visible:false},labels:{step:1},autoBind:!Q.dataSource,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]},_overlap:false});
var T=Q.categoryAxis;
N.push(k({},M,{maxDateGroups:200},T,{name:w,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:false},majorTicks:{visible:false}}),k({},M,T,{name:w+"_labels",maxDateGroups:20,baseUnitStep:"auto",plotBands:[],autoBaseUnitSteps:{minutes:[]}}),k({},M,T,{name:w+"_ticks",maxDateGroups:200,majorTicks:{width:0.5},plotBands:[],labels:{visible:false,mirror:true}}));
U.push(k({name:w,pane:x,majorGridLines:{visible:false},visible:false},Q.valueAxis));
};
v.attachSeries=function(Q,P,T){var R=Q.series=Q.series||[],O=[].concat(P.series||[]),S=T.seriesColors,M=P.seriesDefaults,N;
for(N=0;
N<O.length;
N++){R.push(k({color:S[N%S.length],categoryField:P.dateField,visibleInLegend:false,tooltip:{visible:false}},M,O[N],{axis:w,categoryAxis:w,autoBind:!P.dataSource}));
}};
v.buildFilter=function(M,N){return[{field:"Date",operator:"gte",value:F(M)},{field:"Date",operator:"lt",value:F(N)}];
};
var y=f.extend({init:function(M,O){var N=this;
N.options=k({},N.options,O);
N.container=M;
N.chartPadding={top:parseInt(M.css("paddingTop"),10),left:parseInt(M.css("paddingLeft"),10)};
N.template=N.template;
if(!N.template){N.template=N.template=B("<div class='"+i+"navigator-hint' style='display: none; position: absolute; top: 1px; left: 1px;'><div class='"+i+"tooltip "+i+"chart-tooltip'>&nbsp;</div><div class='"+i+"scroll' /></div>");
}N.element=a(N.template()).appendTo(M);
},options:{format:"{0:d} - {1:d}",hideDelay:500},show:function(N,ab,M){var O=this,R=F(G(N)+G(ab-N)/2),U=O.options,aa=q.format(O.options.format,N,ab),ac=O.element.find("."+i+"tooltip"),Y=O.element.find("."+i+"scroll"),Z=M.width()*0.4,S=M.center().x-Z,Q=M.center().x,V=Q-S,W=U.max-U.min,X=V/W,T=R-U.min,P;
if(O._hideTimeout){clearTimeout(O._hideTimeout);
}if(!O._visible){O.element.stop(false,true).css("visibility","hidden").show();
O._visible=true;
}if(U.template){P=E(U.template);
aa=P({from:N,to:ab});
}ac.html(aa).css({left:M.center().x-ac.outerWidth()/2,top:M.y1});
Y.css({width:Z,left:S+T*X,top:M.y1+parseInt(ac.css("margin-top"),10)+parseInt(ac.css("border-top-width"),10)+ac.height()/2});
O.element.css("visibility","visible");
},hide:function(){var M=this;
if(M._hideTimeout){clearTimeout(M._hideTimeout);
}M._hideTimeout=setTimeout(function(){M._visible=false;
M.element.fadeOut("slow");
},M.options.hideDelay);
}});
function h(){}function g(M){h.prototype=M;
return new h();
}j.ui.plugin(D);
k(j,{Navigator:v});
})(window.kendo.jQuery);
})();
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b){b();
});
