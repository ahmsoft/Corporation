Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(b,a){b.TrackChangesConstants={CssClassInsert:"Change_Insert",CssClassDelete:"Change_Delete",CssClassComment:"reComment",CssClassFormat:"reFormat",CssClassDeletTR:"Delete_TR",CssClassInsertTR:"Insert_TR",CssClass:"trackchanges_curr_rev",CssClassNamePrefixComment:"reComment",CssClassNamePrefixFormat:"reFormat",CssClassNamePrefixInsertTR:"reIns",CssClassNamePrefixDeleteTR:"reDel",TagInsert:"ins",TagDelete:"del",TagComment:"font",TagFormat:"font",Attribute:{Title:"title",Timestamp:"timestamp",Cite:"cite",BrowserCommand:"command",Author:"author",Comment:"comment"},CommentsRegex:new RegExp("reComment","ig"),InsTagMatchRegex:new RegExp("<ins[^>]*>.*","i"),DelTagMatchRegex:new RegExp("<del[^>]*>.*","i"),BlockTagMatchRegex:new RegExp("<(?:p|div)[^>]*>.*?</(?:p|div)>","i"),JustifyBlockTags:"|div|p|"};
b.TrackChangesCommandStrings={AcceptTrackChange:"Accept Trackchange",RejectTrackChange:"Reject TrackChange",RemoveTrackChange:"Remove TrackChange",AddComment:"Add Comment",RemoveComment:"Remove Comment",TrackChange:"Apply TrackChange",Delete:"Delete"};
a.registerEnum(b,"SelectionType",{Text:0,Control:1,Range:2});
a.registerEnum(b,"TrackChangesElementType",{Insert:1,Delete:2,FormatChange:3,JustifyFormatChange:4,Comment:5});
})(Telerik.Web.UI.Editor,$telerik.$);
Type.registerNamespace("$T.Editor");
(function(d,a,c,b){var f=c.Utils;
var e=c.TrackChangesUtils={wrapElementInTrackChangeDelete:function(i,g,j,h){e._wrapElementInTrackChangeElement(b.TagDelete,i,b.CssClassDelete,g,j,h);
},_wrapElementInTrackChangeElement:function(t,n,j,h,u,m){if(t=="del"&&n.tagName=="HR"){return true;
}var s="";
if(t=="del"){s="Deleted by ";
}else{if(t=="ins"){s="Inserted by ";
}else{if(t=="font"){s="Formatted by ";
}}}if(!u){u=new Date().getTime();
}if(n.tagName=="BODY"){for(var o=0;
o<n.childNodes.length;
o++){var g=n.childNodes[o];
var q=g.ownerDocument.createElement(t);
q.className=j;
q.setAttribute(b.Attribute.Cite,h);
q.setAttribute(b.Attribute.Timestamp,u);
q.setAttribute(b.Attribute.Title,s+h+" on "+new Date(u).toLocaleString());
if(t=="del"){q.setAttribute("name",m.get_deletedElemName());
}n.insertBefore(q,g);
q.appendChild(g);
e.getDomRange(m).selectNodeContents(q);
}}else{try{var p=m.get_document().createElement(t);
p.className=j;
p.setAttribute(b.Attribute.Cite,h);
p.setAttribute(b.Attribute.Timestamp,u);
p.setAttribute(b.Attribute.Title,s+h+" on "+new Date(u).toLocaleString());
if(t=="del"){p.setAttribute("name",m.get_deletedElemName());
if(n.nodeName!="#text"&&n.contentEditable.match(/(true|false)/i)){var r=n;
while(r.nodeName!="BODY"){if(r.nodeName=="A"&&r.contentEditable.match(/(true|false)/i)){break;
}r=r.parentElement;
}n=r;
}}if(n.parentNode){n.parentNode.insertBefore(p,n);
p.appendChild(n);
var k=e.getDomRange(m);
k.selectNodeContents(p);
k.select();
}else{n.outerHTML=$telerik.getOuterHtml(p);
m.selectElement(n);
}m.getSelection().getRange().collapse(false);
}catch(l){}}},_wrapTextInTrackChange:function(q,j,r,i,s,g,l){if(!r){return null;
}var p="";
if(q=="del"){p="Deleted by ";
}else{if(q=="ins"){p="Inserted by ";
}else{if(q=="font"){p="Formatted by ";
}}}if(!s){s=new Date().getTime();
}var h="";
if(g){for(var m in g){h+=" "+m+"='"+g[m]+"'";
}}var t="";
if(typeof(l)!="undefined"&&l!=null&&l!=false){if(q=="ins"){var o='<a href="'+l.href+'" >';
var k="</a>";
t=o+"<"+q+" class='"+j+"' "+b.Attribute.Cite+"='"+i+"' "+b.Attribute.Timestamp+"='"+s+"' "+b.Attribute.Title+"='"+p+i+" on "+new Date(s).toLocaleString()+"'"+h+">"+(r.replace(/^\s+/ig,"&nbsp;"))+"</"+q+">"+k;
}}else{t="<"+q+" class='"+j+"' "+b.Attribute.Cite+"='"+i+"' "+b.Attribute.Timestamp+"='"+s+"' "+b.Attribute.Title+"='"+p+i+" on "+new Date(s).toLocaleString()+"'"+h+">"+(r.replace(/^\s+/ig,"&nbsp;"))+"</"+q+">";
}return t;
},wrapElementInTrackChanageComment:function(i,h){var g=h.get_author();
var k=i.ownerDocument.createElement(b.TagComment);
k.className=b.CssClassComment+" "+h.get_userCssId();
k.setAttribute("id",h.get_commentID());
k.setAttribute(b.Attribute.Comment," ");
k.setAttribute(b.Attribute.Author,g);
k.setAttribute(b.Attribute.Title," ");
k.setAttribute(b.Attribute.Timestamp,new Date().getTime());
if(i.nodeName=="TABLE"){k.innerHTML=$telerik.getOuterHtml(i);
var j=$telerik.getOuterHtml(k);
h.selectElement(i);
h.executeBrowserCommand("Delete");
var l=h.getSelection().getRange();
l.pasteHTML(j);
l.move("character",-1);
l.select();
}else{i.parentElement.replaceChild(k,i);
k.appendChild(i);
h.selectElement(i);
}},removeInsertTrackChangeChildren:function(g){a(b.TagInsert,g).remove();
},removeNodeTracking:function(h){if(h.nodeType!=1){return;
}var g=h.getAttribute("alignOrig");
if(g){if(g=="none"){h.removeAttribute("align");
h.style.textAlign="";
}else{h.setAttribute("align",g);
h.style.textAlign=g;
}}e.clearTrackingAttributes(h);
if(f.canHaveChildren(h)&&/^[\u200b]?$/.test(h.innerHTML)&&!f.isBlockElement(h)){a(h).remove();
}},clearTrackingAttributes:function(g){if(g.nodeType!=1){return;
}g.removeAttribute(b.Attribute.Author);
e.removeTrackChangesCommand(g);
g.removeAttribute(b.Attribute.Timestamp);
g.className=g.getAttribute("originalCssClass")||"";
if(!g.className){g.removeAttribute("class");
}g.removeAttribute(b.Attribute.Title);
g.removeAttribute("alignOrig");
if(g.getAttribute("cssproperty")){g.removeAttribute("cssproperty");
}if(g.getAttribute("originalvalue")){g.removeAttribute("originalvalue");
}if(g.getAttribute("iswrapper")){g.removeAttribute("iswrapper");
}},getTrackedParentNode:function(j,k,g){var h=g||function(){return true;
},i=function(l){return k?k===l:f.isEditorContentArea(l);
};
while(j&&!i(j)){if(h(j)&&e.isTrackChangeElement(j)){return j;
}j=j.parentNode;
}return null;
},getParentTrackChangesInsertNode:function(h,i){var g=function(j){return f.isTag(j,"ins");
};
return e.getTrackedParentNode(h,i,g);
},getParentTrackChangesDeleteNode:function(g,h){return e.getTrackedParentNode(g,h,e.isChangeDelete);
},isChangeDelete:function(g){return f.isTag(g,"del")&&e.getTrackChangesCommand(g)!="StrikeThrough";
},getTrackedAncestor:function(g){var h=e.getTrackedParentNode(g),i=null;
while(h&&!f.isBlockElement(h)){i=h;
h=e.getTrackedParentNode(h.parentNode);
}return i;
},findTrackChangesParentElement:function(g,j){var h=j&&j.ignoreComments;
var l=f.getElementParentByCondition(g,function(m){return e.isTrackChangeElement(m)||(h?null:e.isCommentElement(m));
});
if(!l){return null;
}var k={HtmlElement:null,Type:null,User:""};
var i=l.nodeName.toLowerCase();
k.HtmlElement=l;
k.User=l.getAttribute(b.Attribute.Author)||l.getAttribute(b.Attribute.Cite);
k.BrowserCommand=e.getTrackChangesCommand(l);
k.Type=/Align|Justify/i.test(k.BrowserCommand)?c.TrackChangesElementType.JustifyFormatChange:/Bold|Italic|Underline|StrikeThrough|Superscript|Subscript|Indent|Outdent|LinkManager|InsertLink|InsertOrderedList|InsertUnorderedList/i.test(k.BrowserCommand)?c.TrackChangesElementType.FormatChange:i==b.TagInsert?c.TrackChangesElementType.Insert:i==b.TagDelete?c.TrackChangesElementType.Delete:c.TrackChangesElementType.Comment;
return k;
},findTrackChangesParentNode:function(h,i){var j=f.getElementParentByTag(h,i);
var g=!!e.isTrackChangeElement(j);
return g?j:null;
},findParentComment:function(g){while(g&&!f.isEditorContentArea(g)){if(e.isCommentElement(g)){return g;
}g=g.parentNode;
}return null;
},isCommentElement:function(g){if(!g||f.isTextNode(g)){return false;
}return Sys.UI.DomElement.containsCssClass(g,b.CssClassNamePrefixComment);
},_isInTrackChangeElement:function(i,g,h){if(i==null){return false;
}if(i.Type==h){if(g==null){return true;
}else{if(g==i.User){return true;
}}}return false;
},isTrackChangeElement:function(g){if(!g||f.isTextNode(g)){return false;
}var h=g.nodeName.toLowerCase();
if((h==b.TagInsert||h==b.TagDelete)&&g.getAttribute(b.Attribute.Title)&&g.getAttribute(b.Attribute.Timestamp)){return true;
}return Sys.UI.DomElement.containsCssClass(g,b.CssClassNamePrefixFormat);
},setTrackChangesAttributes:function(k,j,i,n,m){m=m||new Date().getTime();
var h=b.Attribute;
if(j=="Outdent"&&e.isTrackChangeElement(k)&&f.isTag(k,"li")&&e.getTrackChangesCommand(k)==j){if(k.getAttribute("previousoutdent")){var l=k.getAttribute("previousoutdent");
k.setAttribute("previousoutdent",l+","+k.getAttribute("timestamp"));
}else{k.setAttribute("previousoutdent",k.getAttribute("timestamp"));
}}k.setAttribute(h.Author,i);
e.setTrackChangesCommand(k,j);
k.setAttribute(h.Timestamp,m);
var g=j=="Insert"?"Inserted":j=="Delete"?"Deleted":"Formatted";
k.setAttribute(h.Title,g+" by "+i+" on "+new Date(parseInt(m,10)).toLocaleString());
k.className=(j=="Insert"||j=="Delete")?n:b.CssClassFormat+" "+n;
},getTrackChangesCommand:function(g){return g.getAttribute(b.Attribute.BrowserCommand)||g.getAttribute("browsercommand");
},removeTrackChangesCommand:function(h){var g=b.Attribute.BrowserCommand;
if(h.getAttribute(g)){h.removeAttribute(g);
}if(h.getAttribute("innercommand")){h.removeAttribute("innercommand");
}if(h.getAttribute("browsercommand")){h.removeAttribute("browsercommand");
}},setTrackChangesCommand:function(h,g){e.removeTrackChangesCommand(h);
h.setAttribute(b.Attribute.BrowserCommand,g);
},enumerateElemetsInRange:function(i){if(!i){return null;
}i=c.DomRange.toDomRange(i);
var j=i.cloneRange();
var h=i.getParentElement();
function g(l){var o=[];
j.selectNodeContents(l);
if(i.inRange(j)){o.push(l);
return o;
}var m=0;
for(;
m<l.childNodes.length;
m++){var k=l.childNodes(m);
if(!k.canHaveHTML){continue;
}var n=g(k);
if(n.length>0){o=o.concat(n);
}}return o;
}return g(h);
},enumerateNodesInRange:function(j){var l=[];
j=new d.Editor.DomRange(j);
var m=j.getParentElement();
if(m==null){return l;
}if(!m.tagName){m=m.parentNode;
}var k=j.cloneRange();
k.selectNodeContents(m);
if(!f.isEditorContentArea(m)&&this.intersect(k,j)){l.push(m);
}for(var h=0;
h<m.children.length;
h++){var g=m.children[h];
if(!g.innerHTML){continue;
}k.selectNodeContents(g);
if(this.intersect(k,j)){l.push(g);
}}j.select();
return l;
},enumerateElemetsInSelection:function(j){if(!j){return null;
}var i=c.DomRange.toDomRange(j.getRange(true));
var k=i.cloneRange();
var h=i.getParentElement();
function g(m){var p=[];
k.selectNodeContents(m);
if(i.inRange(k)){p.push(m);
return p;
}var n=0;
for(;
n<m.childNodes.length;
n++){var l=m.childNodes(n);
if(!l.canHaveHTML){continue;
}var o=g(l);
if(o.length>0){p=p.concat(o);
}}return p;
}return g(h);
},intersect:function(g,h){return !((g.compareBoundaryPoints(d.Editor.DomRange.START_TO_START,h)==-1&&g.compareBoundaryPoints(d.Editor.DomRange.START_TO_END,h)==-1)||(g.compareBoundaryPoints(d.Editor.DomRange.END_TO_START,h)==1&&g.compareBoundaryPoints(d.Editor.DomRange.END_TO_END,h)==1));
},intersectIERange:function(g,h){g=c.DomRange.toDomRange(g);
h=c.DomRange.toDomRange(h);
return !((g.compareBoundaryPoints("StartToStart",h)==-1&&g.compareBoundaryPoints("EndToStart",h)==-1)||(g.compareBoundaryPoints("StartToEnd",h)==1&&g.compareBoundaryPoints("EndToEnd",h)==1));
},getDomRange:function(g,h){var j=g.getSelection(),i=j.getRange();
if(!i){j.selectElement(g.get_contentArea());
j.collapse();
i=j.getRange();
}return new c.DomRange(i,h);
},getSameTrackingSiblings:function(g){var h=g.getAttribute("timestamp");
return a(g.parentNode).children().filter(function(){var i=this.getAttribute?this.getAttribute("timestamp"):null;
return i&&i==h;
});
},getSameTrackNodes:function(g,h){var j=h.getAttribute("timestamp");
if(!j){return a();
}var i=String.format("[timestamp={0}]",j.toString());
return a(g).find(i);
}};
})(Telerik.Web.UI,$telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.TrackChangesConstants);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(d,a,c,b){a.extend(c.DefaultToolAdapter.prototype,{onContextMenu:function(j){var k=this.get_editor();
if(!this._contextMenusEnabled||k.get_mode()!=d.EditModes.Design){return;
}this.createContextMenus();
var l=this._getContextElement(j);
if((c.Utils.isTag(l,"img")&&l.getAttribute("isflash")=="true")||(k.get_enableImmutableElements()&&c.Utils.isImmutableNode(l))){return;
}var i=this._contextMenus;
var f=c.Utils.getElementParentByCondition(l,function(p){var e=i[p.nodeName];
e=e||(c.Utils.isTag(p,"th")?i.TD:e);
return !!e;
});
var h=f?f.nodeName:"*";
if(c.Utils.isTag(f,"th")&&!i.TH){h="TD";
}var g;
var n=c.TrackChangesUtils.findTrackChangesParentElement(l);
if(n){if(n.Type==c.TrackChangesElementType.Comment){g=this.createContextMenuWithTrackChangeCommentItems(h);
}else{g=this.createContextMenuWithTrackChangeItems(h);
}}else{g=this.createContextMenuWithTrackChangeDefaultItems(h)||i[h];
}if(g){g.set_eventObject(j);
g.show();
if($telerik.isSafari){try{var o=l.tagName;
if(o=="IMG"||o=="TABLE"||o=="TD"||o=="TR"){k.selectElement(l);
}}catch(m){}}}return $telerik.cancelRawEvent(j);
},createContextMenuWithTrackChangeDefaultItems:function(e){return this._createContextMenuWithTrackChangeItems(e,"TrackChangeDefault");
},createContextMenuWithTrackChangeItems:function(e){return this._createContextMenuWithTrackChangeItems(e,"TrackChangeFormat");
},createContextMenuWithTrackChangeCommentItems:function(e){return this._createContextMenuWithTrackChangeItems(e,"TrackChangeComment");
},_createContextMenuWithTrackChangeItems:function(h,o){var m=h+"::"+o;
if(this._contextMenus[m]){return this._contextMenus[m];
}var j=this.get_editor();
var f=j.get_contextMenusJSON();
var e=null;
for(var l=0;
l<f.length;
l++){if(f[l].tagName==o){e=f[l];
break;
}}if(!e){return null;
}e.sizetofit=true;
e.parentElement=j.get_contentAreaElement();
e.skin=j.get_skin();
var k={valueSelected:this._onDropDownValueSelectedDelegate,show:this._onDropDownBeforeShowDelegate,hide:this._onDropDownHideDelegate};
var n=$create(d.EditorContextMenu,e,k,null,document.createElement("SPAN"));
if(h!="*"){var g=this._contextMenus[h];
if(g){n._tools=n._tools.concat(g._tools);
}else{return this._contextMenus[o];
}}this._contextMenus[m]=n;
return n;
}});
})(Telerik.Web.UI,$telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.TrackChangesConstants);
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(b,a){b.Editor.Dialogs=(function(){var s=-75;
var j=0;
var q=true;
var o=0.5;
var n="#FFF";
var h=false;
var l="&nbsp;OK&nbsp;";
var e="&nbsp;Cancel&nbsp;";
var g=null;
var c=$telerik.$;
var d=function(u,w,v,t){if(w==null){w="Alert";
}r(w,u,null,"alert",v,function(x){if(t){t(x);
}});
};
var f=function(u,w,v,t){if(w==null){w="Confirm";
}r(w,u,null,"confirm",v,function(x){if(t){t(x);
}});
};
var r=function(H,w,J,I,G,t){i();
m("show");
var z=c('<div class="rePopupContainer'+(G?" "+G:"")+'">');
var E=c('<h1 class="rePopupTitle"></h1>');
var A=c('<div class="rePopupContent">');
var B=c('<div class="rePopupMessage"></div>');
c("body").append(z);
z.append(E).append(A);
A.append(B);
if(g){z.addClass(g);
}var F=$telerik.isIE6?"absolute":"fixed";
z.css({position:F,zIndex:99999,padding:0,margin:0});
E.text(H);
A.addClass(I);
B.text(w);
B.html(B.text().replace(/\n/g,"<br />"));
z.css({minWidth:z.outerWidth(),maxWidth:z.outerWidth()});
p();
k(true);
if(I=="alert"||I=="confirm"){var x=c('<div class="rePopupButtonContainer"></div>');
var C=c('<input type="button" value="'+l+'" class="rePopupButton ok" />');
B.after(x);
x.append(C);
var u=C;
if(I=="confirm"){var y=c('<input type="button" value="'+e+'" class="rePopupButton cancel" />');
x.append(y);
u=u.add(y);
}var D=C.val();
u.click(function(K){i();
if(t){t(K.target.value==D);
}}).keypress(function(K){if(K.keyCode==13||K.keyCode==27){c(K.target).trigger("click");
}});
}if(h){try{z.draggable({handle:E,revert:true,containment:"window"});
E.css({cursor:"move"});
}catch(v){}}};
var i=function(){var u=c(".rePopupContainer");
try{u.remove();
}catch(t){}m("hide");
k(false);
};
var m=function(v){var u=c(".rePopupOverlay");
switch(v){case"show":m("hide");
u=c('<div class="rePopupOverlay"></div>');
c("BODY").append(u.css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:c(document).height(),background:n,opacity:o}));
break;
case"hide":try{u.remove();
}catch(t){}break;
}};
var p=function(){var u=c(".rePopupContainer");
var v=c(".rePopupOverlay");
var w=((c(window).height()/2)-(u.outerHeight()/2))+s;
var t=((c(window).width()/2)-(u.outerWidth()/2))+j;
if(w<0){w=0;
}if(t<0){t=0;
}if($telerik.isIE6){w=w+c(window).scrollTop();
}u.css({top:w+"px",left:t+"px"});
v.height(c(document).height());
};
var k=function(t){if(q){switch(t){case true:c(window).bind("resize",p);
break;
case false:c(window).unbind("resize",p);
break;
}}};
return{showAlert:function(u,w,v,t){d(u,w,v,t);
},showConfirm:function(u,w,v,t){f(u,w,v,t);
},showOverlay:function(t,u){if(t){n=t;
}if(u){o=u;
}m("show");
},hideOverlay:function(){m("hide");
}};
})();
})(Telerik.Web.UI,$telerik.$);
(function(a,b,c){var d=b.Utils;
b.DomTreeTraverser=function(e,f){this.stopCondition=e;
this.topNode=f;
};
b.DomTreeTraverser.prototype={left:function(e,g){var f=this.toDomLocation(e,g);
return this.traverse(f,{next:function(h){return h&&h.previousSibling;
},nextPos:function(h){return(h&&(d.isTextNode(h)?h.nodeValue.length:h.childNodes.length))||0;
},nextChild:function(i){var h;
return(i.isPositionAfterNodes()&&i.validNode())||((h=i.locatedNode())&&h.previousSibling);
}});
},right:function(e,g){var f=this.toDomLocation(e,g);
return this.traverse(f,{next:function(h){return h&&h.nextSibling;
},nextPos:function(h){return 0;
},nextChild:function(h){return h.locatedNode();
}});
},traverse:function(f,e){this._direction=e;
return this._traverseTree(f);
},_traverseTree:function(h){var f=h.node,j=h.position,g=this._direction;
if(!f||this.stopCondition(f,j)){return this.toDomLocation(f,j);
}var i=g.next(f),e=g.nextChild(h);
if(e){return this._traverseNext(e);
}else{if(i){return this._traverseNext(i);
}else{while(f&&f.parentNode!=this.topNode&&!g.next(f)){f=f.parentNode;
}return this._traverseNext(g.next(f));
}}},_traverseNext:function(f){var e=this.toDomLocation(f,this._direction.nextPos(f));
return this._traverseTree(e);
},toDomLocation:function(e,f){return new b.DomLocation(e,f);
}};
b.DomLocation=function(e,f){this.node=e;
this.nodesCount=this.node?this.node.childNodes.length:0;
this.position=f;
};
b.DomLocation.prototype={locatedNode:function(){return this.nodeAt(this.position);
},validNode:function(){return this.validNodeAt(this.position);
},nodeAt:function(e){return this.node.childNodes[e];
},validNodeAt:function(e){var f=Math.max(0,Math.min(this.nodesCount-1,e));
return this.nodeAt(f);
},isPositionAfterNodes:function(){return this.position>=this.nodesCount;
}};
})($telerik.$,Telerik.Web.UI.Editor);
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(b,a){b.EditorDropDown.prototype.__original_scrollIntoView=b.EditorDropDown.prototype._scrollIntoView;
a.extend(b.EditorDropDown.prototype,{_scrollIntoView:function(d,g){if(!d||!d.parentNode){return;
}var i=null;
var h=0;
var f=d.parentNode;
while(f!=null){if(f.tagName=="BODY"){var c=f.ownerDocument;
if(!$telerik.isIE&&c.defaultView&&c.defaultView.frameElement){h=c.defaultView.frameElement.offsetHeight;
}i=f;
break;
}var e=$telerik.getCurrentStyle(f,"overflowY");
if(e=="scroll"||e=="auto"){i=f;
break;
}f=f.parentNode;
}if(!i){return;
}if(!h){h=i.offsetHeight;
}if(h<d.offsetTop+d.offsetHeight){i.scrollTop=(d.offsetTop+d.offsetHeight)-h;
}else{if(d.offsetTop<i.scrollTop){i.scrollTop=d.offsetTop;
}}}});
})(Telerik.Web.UI,$telerik.$);
(function(a,b,c){var d=b.Utils;
b.PlainTextSelector=function(f,g){this.toLeft=f;
var e=f?function(h,i){return d.isTextNode(h)&&!d.isTextNodeEmpty(h)&&(i>0&&i<=h.nodeValue.length);
}:function(h,i){return d.isTextNode(h)&&!d.isTextNodeEmpty(h)&&(i>=0&&i<h.nodeValue.length);
};
this.traverser=new b.DomTreeTraverser(e,g);
};
b.PlainTextSelector.prototype={selectNext:function(i){var g=i.startContainer,n=this.toLeft,h=i.startOffset,f=this.toLeft?this.traverser.left(g,h):this.traverser.right(g,h),j=n?-1:1,e=j;
if(f.node){var k=f.node.nodeValue,m=f.position,l;
while(k.charAt(m+j).match(/[\t\n\r]/)){j+=e;
}if(n){l=m;
m=m+j;
}else{l=m+j;
}i.setStart(f.node,m);
i.setEnd(f.node,l);
i.select();
}}};
})($telerik.$,Telerik.Web.UI.Editor);
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(d,a,c,b,g){c.isControlOnDrag=false;
c.dragIsCancelled=false;
c.placeHolderID=null;
c.isPlaceHolder=false;
c.hasBeenDropped=false;
c.isHyperLink=false;
var e=["ul","ol","td","h1","h2","h3","h4","h5","h6","dd"];
var h=c.Utils;
var f=c.TrackChangesUtils;
a.registerControlProperties(d.RadEditor,{enableTrackChangesOverride:false,isAuthor:false,author:"",userCssId:"",tcInfoContainer:null,rangeStorage:null,enableCarriageReturn:false,enableInsertParagraphShortCut:false,enableShiftEnterShortCut:false,enableBoldShortCut:false,enableItalicShortCut:false,enableUnderlineShortCut:false,tempElement:document.createElement("div"),cancelBackspaceEventCaretPosition:0,cachedRange:null,elementToMove:null,reselectRange:false,iRange:null,origCutRange:null,contextMenuItems:null,commentID:"radTempCommentID",hasWorkFlowRole:false,canAcceptTrackChanges:false,canAcceptTrackChange:false,canRejectTrackChange:false,overrideWorkFlowAction:false,keyDownEvent:null,paragraphInserted:null,deletedElemName:"",origClipboardDataAsHtml:"",modifiedClipboardDataWithPlaceHolder:"",lockFormatting:true,copyCommandHit:false,clipboardData:{contentFromEditor:false,contentHTML:"",fromSelectionType:""},cutElement:{htmlText:null,selectionType:null,element:null}});
d.RadEditor.prototype.__original_initialize=d.RadEditor.prototype.initialize;
d.RadEditor.prototype.__original_pasteHtml=d.RadEditor.prototype.pasteHtml;
d.RadEditor.prototype.__original__initEvents=d.RadEditor.prototype._initEvents;
d.RadEditor.prototype.__original_onResizeEnd=d.RadEditor.prototype._onResizeEnd;
d.RadEditor.prototype.__original_getToolState=d.RadEditor.prototype.getToolState;
a.extend(d.RadEditor.prototype,{initialize:function(){var i=this;
i.__original_initialize(true);
var j=i.get_filtersManager();
j.removeFilterByName("FixUlBoldItalic");
j.removeFilterByName("FixEnclosingP");
c.UpdateCommandsArray.AcceptAllTrackChanges=new c.TrackChangesCommands.AcceptTrackChanges("Accept All Track Changes",i,null);
c.UpdateCommandsArray.AcceptTrackChange=c.UpdateCommandsArray.AcceptTrackChanges=new c.TrackChangesCommands.AcceptTrackChanges(null,i,null);
c.UpdateCommandsArray.RejectAllTrackChanges=new c.TrackChangesCommands.RejectTrackChanges("Reject All Track Changes",i,null);
c.UpdateCommandsArray.RejectTrackChange=c.UpdateCommandsArray.RejectTrackChanges=new c.TrackChangesCommands.RejectTrackChanges(null,i,null);
c.UpdateCommandsArray.RemoveTrackChanges=new c.TrackChangesCommands.RemoveTrackChanges(null,i,null);
c.UpdateCommandsArray.RemoveAllComments=new c.TrackChangesCommands.RemoveTrackChanges("Remove All Comments",i,null);
c.UpdateCommandsArray.RemoveComment=new c.TrackChangesCommands.RemoveTrackChanges(null,i,null);
c.UpdateCommandsArray.AddComment=new c.TrackChangesCommands.AddComment(null,i,null);
c.UpdateCommandsArray.EnableTrackChanges=new c.TrackChangesCommands.EnableTrackChanges(null,i,null);
c.UpdateCommandsArray.EnableTrackChangesOverride=new c.TrackChangesCommands.EnableTrackChangesOverride(null,i,null);
i.add_pasteDom(Function.createDelegate(i,i._pasteDomHandler));
i.add_pasteBlockElement(Function.createDelegate(i,i._pasteBlockElementHandler));
i.add_commandExecuted(Function.createDelegate(i,i._commandExecutedUndoRedoHandler));
i._raiseEditorLoad();
},executeCommand:function(l,m,i){var j=this;
if(!l.get_window()){l.set_window(j.get_contentWindow());
}if(false!=m&&!j.isOpera){j.setFocus();
}var n=j.shouldTrackChanges(),k;
if(n){k={formattingChanged:j._formattingChangedHandler};
l.on(k,j);
}j._commandsManager.execute(l,i);
if(n){l.off(k,j);
}},_formattingChangedHandler:function(i){var m=this,n=i.get_elements()||[],j=i.get_command(),k=j.get_title();
var l=c.TrackerFactory.getCommandTracker(k,m);
if(!l){return;
}if(!i.get_applyFormat()){k="Remove "+k;
}if(j._innerCommand){l._innerCommand=j._innerCommand;
}l.trackFormattedNodes(n,k);
},_domChangedHandler:function(l,i){if(!l.shouldTrackChanges()){return;
}var j=i.get_commandName(),m=i.get_value(),k=c.TrackerFactory.getCommandTracker(j,l);
if(k){k.trackFormatting(m,j,l.get_author());
}},_trackChangesAttributesHandler:function(j){var m=this,n=j.get_elements()||[],k=j.get_command(),l=k.get_title();
var q=new Date().getTime();
for(var o=0;
o<n.length;
o++){var p=n[o].node;
if(p){m.setTrackChangesAttributes(p,l,q);
}}},get_htmlAcceptChanges:function(k,m){var l=this.get_html();
var i=this.get_filtersManager();
c.TrackChanges.setEditor(this);
c.TrackChanges.acceptAllChangesSilently();
if(m==true){i.add(new c.StripCommentsFilter());
}var j=this.get_html(k==true);
if(m==true){i.removeFilterByName("StripCommentsFilter");
}d.Editor.Utils.setElementInnerHtml(this.get_contentArea(),l);
return j;
},get_htmlRejectChanges:function(k,m){var l=this.get_html();
var i=this.get_filtersManager();
c.TrackChanges.setEditor(this);
c.TrackChanges.rejectAllChangesSilently();
if(m==true){i.add(new c.StripCommentsFilter());
}var j=this.get_html(k==true);
if(m==true){i.removeFilterByName("StripCommentsFilter");
}d.Editor.Utils.setElementInnerHtml(this.get_contentArea(),l);
return j;
},get_htmlStripComments:function(){var k=this.get_html();
var i=this.get_filtersManager();
i.add(new c.StripCommentsFilter());
var j=this.get_html(true);
i.removeFilterByName("StripCommentsFilter");
d.Editor.Utils.setElementInnerHtml(this.get_contentArea(),k);
return j;
},_commandExecutedUndoRedoHandler:function(o,i){var l=i.get_commandName?i.get_commandName():null;
var r=l=="Undo";
var q=l=="Redo";
if(!r&&!q){return;
}var n=o.get_commandsManager();
var m=n.get_commands();
var k=n._currentCommandIndex;
k+=r?1:0;
k=Math.min(k,m.length-1);
k=Math.max(k,0);
var j=m[k];
if(!j||j.get_title()!="Delete"){return;
}var s=j.options;
if(s&&s.collapsedRange){var t=o.getDomRange();
var p=s.isDeleteLeft;
t.collapse(r?!p:p);
t.select();
}},pasteHtml:function(m,l,k,j,i){var n=this;
if(!n.shouldTrackChanges()){n.__original_pasteHtml(m,l,k,j,i);
return;
}var o=f.getDomRange(n);
if(!o.collapsed){n._executeDeleteCommand(false);
o=f.getDomRange(n);
o.collapse(false);
o.select();
}n.__original_pasteHtml(m,l,k,j,i);
},_pasteDomHandler:function(l,i){var j=i.get_element(),k=i.get_cursor();
if(l.shouldTrackChanges()){l._pasteDomEnabledTrackChanges(j,k);
}if(l.get_enableComments()){l._pasteDomEnabledComments(k);
}},_pasteDomEnabledTrackChanges:function(i,k){var l=this;
l._acceptAllTrackChanges(i);
var n=f.findTrackChangesParentNode(k,"DEL");
if(n){a(k).insertAfter(n);
}var o=f.findTrackChangesParentNode(k,"INS");
if(o){l._insertElement=o.cloneNode(true);
h.removeChildren(l._insertElement);
return;
}var m=l._createInsertTrackChangeNode(),j=m.cloneNode(true);
l._insertElement=m;
if(!h.getElementParentByTag(k,"P")){a(i).wrapInner(j);
return;
}this._wrapFirstInlineChildren(i,j);
},_pasteDomEnabledComments:function(j){var i=c.TrackChangesUtils.findParentComment(j);
if(i){a(j).insertAfter(i);
}},_wrapFirstInlineChildren:function(k,n){var m=k.ownerDocument.createDocumentFragment();
for(var l=0;
l<k.childNodes.length;
l++){var j=k.childNodes[l];
if(h.isTextNode(j)&&h.isTextNodeEmpty(j)&&!m.childNodes.length){continue;
}if(!h.isBlockElement(j)){m.appendChild(j);
}else{break;
}}if(m.childNodes.length){k.insertBefore(n,k.firstChild);
n.appendChild(m);
}},_pasteBlockElementHandler:function(j,i){var k=i.get_element();
var l=j._insertElement;
var m=c.Utils.getElementParentByTag(k,"INS");
if(!m||!c.TrackChangesUtils.isTrackChangeElement(m)){a(k).wrap(l.cloneNode(true));
}},_acceptAllTrackChanges:function(l){var k=this;
var i=a(l).find("*").filter(function(m,n){return f.isTrackChangeElement(n);
});
if(!i.length){return;
}var j=new c.TrackChangesCommands.AcceptTrackChanges(null,k,null);
i.each(function(m,n){var o=f.findTrackChangesParentElement(n);
if(o){j.acceptElementChange(o);
}});
},_createInsertTrackChangeNode:function(){var i=this;
var j=i.get_document().createElement("ins");
i.setTrackChangesAttributes(j,"Insert");
return j;
},_initEvents:function(){var i=this;
if(i.__original__initEvents){i.__original__initEvents();
}i.add_domChange(Function.createDelegate(i,i._domChangedHandler));
i.attachInternalHandler("keypress",Function.createDelegate(i,i._keyPressHandler));
i.attachInternalHandler("keydown",Function.createDelegate(i,i._keyDownHandlerEnableTrackChangesOverride));
i.attachInternalHandler("keydown",Function.createDelegate(i,i._keyDownHandler));
},_keyPressHandler:function(l){var m=this,n=null,k=null,j=null,i=m._shouldIgnoreKey(l)||!m.shouldTrackChanges();
if(i){return;
}n=m.getSelection().getRange(true);
j=n.parentElement?n.parentElement():n.commonAncestorContainer;
if(m._isElementInTrackedInsNode(j)){return;
}else{k=m.getDomRange();
if(!k.isCollapsed()){m._deleteContentWhenTypingInSelection(k);
}m._executeInsertCommand();
}},_deleteContentWhenTypingInSelection:function(i){var j=this,k=[],l=null;
j._deleteDirectionLeft=false;
j._deleteContentWithSelection(i);
i=j.getDomRange();
if(j._shouldCollapseSelection){j._collapseRange(i);
}if(j._elementsTrackedForDeletion&&j._elementsTrackedForDeletion.length>0){k=j._elementsTrackedForDeletion;
l=k[k.length-1].node;
if(j._isRangeCollapsedInNode(i,l)){return;
}if(l.nextSibling){if($telerik.isIE7||$telerik.isIE8||($telerik.isSafari&&!$telerik.isChrome)){j._insertZeroWidthCharacterAfterNode(l,1,1);
}else{i.setStartAfter(l);
i.setEndAfter(l);
i.collapse(true);
i.select();
}}else{if($telerik.isIE7||$telerik.isIE8||($telerik.isSafari&&!$telerik.isChrome)){j._insertZeroWidthCharacterAfterNode(l,1,1);
}else{j._insertZeroWidthCharacterAfterNode(l,0,0);
}}}},_isRangeCollapsedInNode:function(k,j){var i=k.commonAncestorContainer;
if(!k.collapsed||!c.Utils.isTextNode(i)){return false;
}return i.length>k.startOffset&&a.contains(j,i);
},_insertZeroWidthCharacterAfterNode:function(k,n,m){var j=this,i=null,l="\u200b";
i=j.getDomRange();
var o=j.get_document().createTextNode(l);
a(o).insertAfter(k);
c.Utils._setCursorInTextNode(i,o,n,m);
j.whitespaceTracker.trackNode(o);
},_shouldIgnoreKey:function(l){if(l.ctrlKey||l.altKey){return true;
}else{var q=l.keyCode;
var n=13,i=8,j=46,t=33,s=34,m=35,o=36,r=37,v=38,u=39,k=40,p=45;
switch(q){case n:case i:case j:case t:case s:case m:case o:case r:case v:case u:case k:case p:return true;
}}return false;
},_isElementInTrackedInsNode:function(j){var i=this,k=i._getParentInsNode(j);
return c.TrackChangesUtils.isTrackChangeElement(k)&&i._isSameAuthor(k);
},_getParentInsNode:function(i){i=h.isTextNode(i)?i.parentNode:i;
return h.isTag(i,b.TagInsert)?i:h.getElementParentByTag(i,b.TagInsert.toUpperCase());
},_executeInsertCommand:function(){var i=this;
var k=new c.TrackChangesInsert(i);
if(k){var j={formattingChanged:i._trackChangesAttributesHandler};
k.on(j,i);
k.onExecute();
k.off(j,i);
}},_keyDownHandler:function(m){var n=this;
var i=new Date().getTime().toString();
i=parseInt(i,10);
n.set_keyDownEvent(m);
n.set_copyCommandHit(false);
var k=false;
var v=n._shortCutManager.isShortCutHit(m),p;
if(null!=v){var s=v.get_name();
if(s=="Cut"){return;
}switch(s){case"Copy":n.set_copyCommandHit(true);
break;
case"Enter":case"ShiftEnter":case"InsertParagraph":case"Bold":case"Italic":case"Underline":if(!n.get_enableCarriageReturn()||!n.get_enableInsertParagraphShortCut()||!n.get_enableShiftEnterShortCut()||!n.get_enableBoldShortCut()||!n.get_enableItalicShortCut()||!n.get_enableUnderlineShortCut()){k=true;
}break;
case"Paste":p=true;
}}if(k){return $telerik.cancelRawEvent(m);
}if(!n.get_enableTrackChanges()||n.get_enableTrackChangesOverride()){return true;
}var u=n.getSelection();
var t=new c.DomRange(u.getRange(true));
if(!t){return;
}var q=function(x){return h.isTag(x,"td");
};
var w=h.getElementParentByCondition(t.startContainer,q);
var o=t.isCollapsed?w:h.getElementParentByCondition(t.endContainer,q);
if((w||o)&&w!=o){return $telerik.cancelRawEvent(m);
}n.set_deletedElemName(i.toString());
if(!n.shouldTrackChanges()||p){return true;
}var r=m.keyCode,j=8,l=46;
if(r!=l&&r!=j){return true;
}n._deleteDirectionLeft=r==j;
n._shouldExecuteRawKeyDownEvent=false;
n._deleteContent(t);
n._executeRawKeyDownEvent(m);
return true;
},_keyDownHandlerEnableTrackChangesOverride:function(l){var m=this;
var j=m.get_document();
var r=(l.keyCode===32);
if(!m.get_enableTrackChangesOverride()||!h.isTypingKey(l)){return;
}var t=m.getSelection(),k=c.DomRange.toDomRange(t.getRange(true)),v=k.startContainer,n=k.endContainer,x=f.getTrackedParentNode(v),p=f.getTrackedParentNode(n),s=x&&!h.isBlockElement(x),q=p&&!h.isBlockElement(p);
if(!s&&!q){return;
}var w=h.getElementParentByTag((h.isTextNode(v)?v.parentNode:v),"TD"),o=(k.collapsed||v===n)?w:h.getElementParentByTag((h.isTextNode(n)?n.parentNode:n),"TD");
if(w||o){return;
}if((s&&!q)||(!s&&q)){j.execCommand("delete",false,null);
k=c.DomRange.toDomRange(t.getRange(true));
}var i=new c.TrackChangesRemoveFormat(m),y=i.getState(null,m,k);
if(y!=c.CommandStates.On){return;
}var z;
if(k.collapsed){z=j.createTextNode("a");
k.insertNode(z);
h._setCursorInTextNode(k,z,0,1);
}i.onExecute();
if(r&&z){var u=(z.length===1&&!z.nextSibling)?"\xA0":"\x20";
z.nodeValue=u+z.nodeValue.substring(1);
k.setStart(z,1);
k.setEnd(z,1);
k.select();
$telerik.preventDefault(l);
}},_executeRawKeyDownEvent:function(i){var j=this;
if(j._shouldExecuteRawKeyDownEvent){j._shouldExecuteRawKeyDownEvent=false;
}else{if(i.type.toLowerCase()==="keydown"){$telerik.cancelRawEvent(i);
}}},_isDeleteDirectionLeft:function(){return(this._deleteDirectionLeft===true);
},_deleteContent:function(k){var j=this;
if(k){if(k.isCollapsed()){j._deleteContentInCollapsedRange(k);
}else{j._deleteContentWithSelection(k);
if(j._shouldCollapseSelection){k=j.getDomRange();
try{j._collapseRange(k);
}catch(i){}}}}},_deleteContentInCollapsedRange:function(k){var i=this,l=new c.PlainTextSelector(i._isDeleteDirectionLeft(),i.get_contentArea()),j=i._getEmptyBlockElementToDelete(k.startContainer);
l.selectNext(k);
if(!k.isCollapsed()&&!j){if(i._isRangeInEditableNode(k)){i._executeDeleteCommand(true);
}else{i._collapseRange(k);
}}if(i._deleteEmptyBlockElement(j)){i._shouldExecuteRawKeyDownEvent=false;
i._deleteDirectionLeft=!i._deleteDirectionLeft;
i._collapseRange(k);
}},_getEmptyBlockElementToDelete:function(i){if(!h.isBlockElement(i)){i=h.getBlockParent(i);
}if(h.isEditorContentArea(i)){return;
}if(a.inArray(i.nodeName,e)==-1&&this._isEmptyBlock(i)){return i;
}},_isEmptyBlock:function(k){var j=k.lastChild;
var i;
if(h.isTag(j,"br")){i=k.removeChild(j);
}var l=h.isNodeEmptyRecursive(k);
if(i){k.appendChild(i);
}return l;
},_deleteEmptyBlockElement:function(i){if(i){var k=i.parentNode;
var j=h.isList(k)&&k.children.length==1?k:i;
j.parentNode.removeChild(j);
return true;
}},_deleteContentWithSelection:function(k){var i=this,j=false;
i._shouldCollapseSelection=true;
j=i._isSelectionEditable(k);
if(j){i._executeDeleteCommand(false);
}},_collapseRange:function(k){var j=this;
if(j._isDeleteDirectionLeft()){if(j._shouldExecuteRawKeyDownEvent===true){k.collapse(false);
}else{k.collapse(true);
}}else{if(j._shouldExecuteRawKeyDownEvent===true){k.collapse(true);
}else{k.collapse(false);
}}try{k.select();
}catch(i){}},_isRangeInEditableNode:function(l){if(!l){return false;
}var i=this,j=l.commonAncestorContainer,k=null,o=l.startOffset,n=l.startContainer,m=null;
if(c.Utils.isTextNode(j)){k=f.getTrackedParentNode(j);
if(k){return i._isInEditableNode(k);
}}if(o===n.childNodes.length){m=n.childNodes[o-1];
}else{m=n.childNodes[o];
}k=f.getTrackedParentNode(m);
if(k){return i._isInEditableNode(k);
}return true;
},_isSelectionEditable:function(o){if(!o){return false;
}var j=this,i=j.get_contentArea(),p=o.startContainer,k=o.endContainer,q=f.getTrackedParentNode(p),l=f.getTrackedParentNode(k);
if(k===i){return true;
}if((p!==k)&&(!j._isInTrackedInsTag(p)&&!j._isInTrackedInsTag(k))){return true;
}var m=j._isInEditableNode(q);
var n=j._isInEditableNode(l);
return(m&&n);
},_isInEditableNode:function(j){var i=this;
if(!i.get_author()){return false;
}if(i._isInTrackedInsTag(j)){i._shouldExecuteRawKeyDownEvent=true;
i._shouldCollapseSelection=false;
return false;
}if(!i._isInTrackedDelete(j)){return true;
}return(i._isNodeEditableByAuthor(j));
},_isNodeEditableByAuthor:function(k){var i=a(k).attr(b.Attribute.Author);
var j=a(k).attr(b.Attribute.Cite);
if(i&&!j){return false;
}else{if(j&&!i){return false;
}else{if(!i&&!j){return true;
}}}},_isInTrackedDelete:function(i){var j=c.TrackChangesUtils.getParentTrackChangesDeleteNode(i);
return j&&this._isSameAuthor(j);
},_isInTrackedInsTag:function(j){var i=this;
var k=b.TagInsert;
return h.getElementParentByCondition(j,function(l){return h.isTag(l,k)&&f.isTrackChangeElement(l)&&i._isSameAuthor(l);
});
},_isSameAuthor:function(i){return this.get_author()==i.getAttribute("author");
},_setCollapseSelectionFlag:function(){var i=this;
i._shouldCollapseSelection=true;
},_isEmptyTextNode:function(i){return(c.Utils.isTextNode(i)&&c.Utils.isTextNodeEmpty(i));
},_executeDeleteCommand:function(i){var k=this;
var j=new c.TrackChangesDelete(k,{isDeleteLeft:k._isDeleteDirectionLeft(),collapsedRange:i});
if(!j){return;
}k._elementsTrackedForDeletion=[];
k._executeCommand(j);
var l=a.makeArray(j.elements);
k._updateRangeAfterDeleteCommand(l);
k._elementsTrackedForDeletion=l;
j.clearTrackedNodes();
},_selectAfter:function(i){var j=this.getDomRange();
j.setStartAfter(i);
j.collapse(true);
j.select();
},_executeCommand:function(j,i){var k=this;
i=i!==false;
var l={formattingChanged:k._trackChangesAttributesHandler};
j.on(l,k);
k._commandsManager.execute(j,i);
k._hasDeleteExecuted=null;
k._pendingTextTypeCmd=null;
j.off(l,k);
},_updateRangeAfterDeleteCommand:function(i){if(!i||!i.length){return;
}var j=this,m=j.getDomRange();
if(j._isDeleteDirectionLeft()){if(!c.Utils.isTextNode(m.startContainer)){var k=i[0].node;
j._setRangeStartBefore(m,k);
}m.collapse(true);
}else{var l=i[i.length-1].node;
if(!a.contains(j.get_contentArea(),l)){l=m.endContainer.childNodes[m.endOffset-1]||m.endContainer;
i[i.length-1].node=l;
}j._setRangeStartAfter(m,l);
m.collapse(false);
}m.select();
},_setRangeStartBefore:function(j,i){j.setStart(i,0);
},_setRangeStartAfter:function(j,i){j.setStart(i,1);
},setTrackChangesAttributes:function(l,j,m){var k=this,i=k.get_author(),n=k.get_userCssId();
c.TrackChangesUtils.setTrackChangesAttributes(l,j,i,n,m);
},storeSelection:function(j){var i=c.DomRange.toDomRange(j);
this._rangeStorage=i.cloneRange();
},restoreSelection:function(l){var j=this;
var k=j.get_keyDownEvent();
if(k){if("keyCode" in k){try{if(k.shiftKey&&(k.keyCode==37||k.keyCode==38||k.keyCode==39||k.keyCode==40)){return;
}}catch(i){}}}if(this._rangeStorage){this._rangeStorage.select();
}},_onResizeEnd:function(i){var j=this.getSelection();
var k=j.getParentElement();
var l=k.attributes.tagid;
if(l){k.removeAttribute("width");
k.removeAttribute("height");
k.style.cssText="display: inline; background-color: lightgrey;";
}if((k.tagName=="SPAN"||k.tagName=="FONT")&&k.contentEditable=="false"){k.style.cssText="display: inline; background-color: lightgrey;";
}this.__original_onResizeEnd(i);
},getToolState:function(k,j){switch(k){case"AcceptAllTrackChanges":case"AcceptTrackChange":case"AcceptTrackChanges":case"RejectAllTrackChanges":case"RejectTrackChange":case"RejectTrackChanges":case"RemoveTrackChanges":case"RemoveAllComments":case"RemoveComment":case"AddComment":case"EnableTrackChanges":case"EnableTrackChangesOverride":var i=d.Editor.UpdateCommandsArray[k];
i.set_editor(this);
i._toolName=k;
if(i&&i.getState){return i.getState(this.get_contentWindow());
}break;
}return this.__original_getToolState(k,j);
},enableContentArea:function(j){if(this.isIE){if(!j){var i=c.TrackChangesUtils.getDomRange(this);
if(i.getHtml()==""){this.enableContentAreaRange=i;
}}this.get_contentArea().setAttribute("contentEditable",""+j);
if(j&&this.enableContentAreaRange){this.enableContentAreaRange.select();
this.enableContentAreaRange=null;
}}},getTrueParent:function(i){function j(k){if(k){if(k.parentElement){if($telerik.getOuterHtml(k)==k.parentElement.innerHTML){return j(k.parentElement);
}}}return k;
}return j(i);
},checkIfRangeHasTrackChange:function(l){var q=c.TrackChangesSelection;
var p=new c.DomRange(this.getSelection().getRange());
var j=q.locateElementInRange(p,"del");
var m=q.locateElementInRange(p,"ins");
var i=q.locateElementInRange(p,"comment");
var n=q.locateElementInRange(p,"placeholder");
var o=false;
if(n.fullySelected&&p.getText().length){var k=p.getParentElement().parentElement.parentElement;
if(k.tagName.toLowerCase()=="ins"||k.tagName.toLowerCase()=="del"){o=true;
}}if(m.inRange||j.inRange||i.inRange){o=true;
}return o;
},checkIfRangeIsInEndOfElement:function(k,o){o=c.DomRange.toDomRange(o);
var s=false;
function i(t){q.selectNodeContents(t);
r=q.getText().replace(/[\r\n]/mg,"");
if(r==m){s=true;
}if(m.length>r.length){if(t.parentElement){i(t.parentElement);
}}}if(o&&k){var l=c.Utils.getTextContent(k)||"";
var n=l.replace("\r","").length;
var r="";
var m="";
var p=o.cloneRange();
var q=o.cloneRange();
try{p.moveStart("character",-n);
m=p.getText().replace(/[\r\n]/mg,"");
i(k);
}catch(j){}o.select();
}return s;
},checkIfRangeIsInStartOfElement:function(k,o){o=c.DomRange.toDomRange(o);
var s=false;
function i(t){q.selectNodeContents(t);
r=q.getText().replace(/[\r\n]/mg,"");
if(r==m){s=true;
}if(m.length>r.length){if(t.parentElement){i(t.parentElement);
}}}if(o&&k){var l=c.Utils.getTextContent(k)||"";
var n=l.replace("\r","").length;
var r="";
var m="";
var p=o.cloneRange();
var q=o.cloneRange();
try{p.moveEnd("character",n);
m=p.getText().replace(/[\r\n]/mg,"");
i(k);
}catch(j){}o.select();
}return s;
},_insertTagAdjacentElement:function(n,r,m,k){if(null==n){n="afterEnd";
}if(null==m){m="&nbsp";
}if(null==r){r="font";
}var s=this._document.getElementById("vrtxInsertElement");
var i=n=="afterEnd"?false:true;
if(!s||s==g){var q=this.getSelectedElement();
var p=c.TrackChangesUtils.findTrackChangesParentElement(q);
if(p){p.HtmlElement.insertAdjacentHTML(n,"<"+r+' id="vrtxInsertElement">'+m+"</"+r+">");
}else{if(q.tagName.toLowerCase()=="td"){q=q.children[0];
}q.insertAdjacentHTML(n,"<"+r+' id="vrtxInsertElement">'+m+"</"+r+">");
}s=this._document.getElementById("vrtxInsertElement");
}if(s){try{s.removeAttribute("id");
this.selectElement(s);
if(k){if(i){var o=this.getSelection().getRange();
var l=o.findText(" ");
if(l){o.select();
o.collapse(false);
}}else{this.getSelection().collapse(i);
s.innerHTML="";
}}else{this.getSelection().collapse(i);
}}catch(j){return false;
}}return true;
},set_enableTrackChangesOverride:function(i){this._enableTrackChangesOverride=i?true:false;
},shouldTrackChanges:function(){return this.get_enableTrackChanges()&&!this.get_enableTrackChangesOverride();
},get_isAuthor:function(){return true;
},set_isAuthor:function(i){this._isAuthor=i?true:false;
},set_author:function(i){this._author=i;
},set_userCssId:function(i){this._userCssId=i;
},get_contextMenuItemsToDisable:function(){return this._contextMenuItems;
},set_contextMenuItemsToDisable:function(i){this._contextMenuItems=i;
},set_clipboardData:function(i){this._clipboardData=i;
},get_clipboardData:function(){return this._clipboardData;
},moveToParagraphInserted:function(t,j){function o(i){var u=c.Utils.getTextContent(i)||"";
return(i.nodeName=="P"&&u=="");
}if(t.get_paragraphInserted()){var s=t.getSelection();
if(!s.isControl()){var q=s.getParentElement();
var p=q.lastChild;
var l=j;
try{if(p&&p.nodeName!="P"){var k=p.children;
while(k.length>0){if(k.length==1){if(o(k[0])){p=k[0];
break;
}k=k[0].children;
}else{if(k.length>1){for(var n=0;
n<k.length;
n++){if(o(k[n])){p=k[n];
break;
}}break;
}}}}}catch(m){}if(p&&o(p)){p.innerText=p.textContent=l;
t.selectElement(p);
var r=s.getRange();
t.set_paragraphInserted(false);
return r;
}}}t.set_paragraphInserted(false);
return false;
},executeTrackChangesCommand:function(j,i,n,k){var l=this._localization[j]||j;
var m=null;
switch(j){case"AcceptTrackChange":case"AcceptTrackChanges":m=new c.TrackChangesCommands.AcceptTrackChanges(l,this,null);
break;
case"RejectTrackChange":case"RejectTrackChanges":m=new c.TrackChangesCommands.RejectTrackChanges(l,this,null);
break;
case"RemoveTrackChanges":case"RemoveComment":m=new c.TrackChangesCommands.RemoveTrackChanges(l,this,null);
break;
case"AddComment":m=new c.TrackChangesCommands.AddComment(l,this,null);
break;
default:alert(j+" track change command is not implemented yet.");
}this.executeCommand(m);
this.setActive();
this.setFocus();
this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
},_canEditSelection:function(i){return true;
},get_paragraphs:function(){if(null==this._paragraphs){return[["<p>","Normal"],["<h1>","<h1>Heading 1</h1>"],["<h2>","<h2>Heading 2</h2>"],["<h3>","<h3>Heading 3</h3>"],["<h4>","<h4>Heading 4</h4>"],["<h5>","<h5>Heading 5</h5>"],["<h6>","<h6>Heading 6</h6>"],["<p class='MsoHeading7'>","<p class='MsoHeading7'>Heading 7</p>"],["<p class='MsoHeading8'>","<p class='MsoHeading8'>Heading 8</p>"],["<h5>","<dir>Directory List</dir>"],["<menu>","<menu>Menu List</menu>"],["<pre>","<pre>Formatted</pre>"],["<address>","<address>Address</address>"]];
}return this._paragraphs;
},addToStack:function(k){var i=Telerik.Web.UI;
var j=new i.Editor.GenericCommand(k,this._contentWindow);
var l=this.get_commandsManager();
l.execute(j,true);
},removeFromStack:function(j){var l=this.get_commandsManager();
var k=l.get_commands();
var i=k.length;
if(i>0){if(j==k[i-1]._title){l.removeCommandAt(i-1);
}}}});
})(Telerik.Web.UI,$telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.TrackChangesConstants);
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(d,a,c,b){c.TrackChanges=(function(){var l=null;
var m=null;
var A=null;
var z=null;
var B=null;
var i=null;
var E=null;
var N=false;
var R="Reject";
var e=$telerik.$;
var O="";
var x=function(S){l=S;
m=S._contentArea;
L();
K();
};
var L=function(){z=false;
B=false;
A=false;
i=0;
E=0;
};
var K=function(){if(!l){return;
}var S=l.get_skin();
O=l.get_renderMode()==d.RenderMode.Lite?"RadEditor RadEditor_"+S:S;
};
var I=function(){try{l.get_document().execCommand("SelectAll",false,null);
l.getSelection().collapse();
}catch(S){}return;
};
var J=function(S){l=S;
m=S.get_contentArea();
K();
};
var t=function(S){return s(S).concat(s("TABLE"));
};
var q=function(T){var S=b.CssClassNamePrefixComment;
return r(T,S).concat(r("TABLE",S));
};
var u=function(U){var T=[];
var V=m.getElementsByTagName(U);
if(V.length>0){for(var S=0;
S<V.length;
S++){if(Q(V[S])){T.push(V[S]);
}}}return T;
};
var s=function(S){return r(S,b.CssClassNamePrefixFormat);
};
var r=function(T,S){return e(m).find(T+"."+S).toArray();
};
var Q=function(S){return C(S);
};
var v=function(){var T=[];
if(A){var W=q("font");
if(W.length<1){W=q("span");
}T.push(W);
}else{var S=u("ins");
var V=u("del");
var U=t("");
T.push(S);
T.push(V);
T.push(U);
}return T;
};
var w=function(){e("#rade_tccomment_divEdit_id_"+l._clientStateFieldID).hide();
e("#rade_tccomment_divView_id_"+l._clientStateFieldID).hide();
e("#rade_tccomment_divInfo_id_"+l._clientStateFieldID).hide();
};
var p=function(T,U){try{var V=c.TrackChangesUtils.getDomRange(l);
V.selectNodeContents(T);
V.select();
if(U){w();
}return true;
}catch(S){return false;
}};
var h=function(){return l.get_isAuthor()?true:l._canEditSelection();
};
var o=function(){R=!l.get_canRejectTrackChange()?"Remove":"Reject";
try{window.setTimeout(function(){var T=A?"Remove All Comments":z?"Accept All Changes":R+" All Changes";
c.Dialogs.showConfirm("Do you want to proceed anyway?",T,O,function(U){if(U){c.Dialogs.showOverlay();
l.setFocus();
g();
}else{L();
}});
},1);
}catch(S){alert("Error encountered while executing the command...");
}};
var g=function(){var T=0;
var S=A?"RemoveTrackChanges,Remove All Comments":z?"AcceptTrackChanges,Accept All Changes":"RejectTrackChanges,"+R+" All Changes";
var W=v();
for(var X=0;
X<W.length;
X++){for(var Y=0;
Y<W[X].length;
Y++){var V=W[X][Y];
if(V.tagName){if(p(V,true)&&h()){try{l.executeTrackChangesCommand(S.split(",")[0],false,null,null);
i++;
T++;
}catch(U){continue;
}}}}}if(F(T)){n(S);
}};
var F=function(S){if(i>0&&S>0){E++;
if(A){if(E>10){return true;
}}else{if(E>5){return true;
}}P(10);
g();
return false;
}return true;
};
var n=function(S){if(E>2){i--;
var T=z;
window.setTimeout(function(){H(T);
},1000);
}var V=S.split(",")[1];
var U="Changes successfully executed.";
if(i<1){U="No changes has been made.";
}I();
L();
if(!N){c.Dialogs.showAlert(U,V,O);
}};
var H=function(X){var W=u("ins");
var T=u("del");
var S=q("font");
function Z(ab){if(ab){var ae=ab.parentElement;
var af=document.createElement("FONT");
if(Q(ab)&&(ab.tagName=="DEL"||ab.tagName=="INS")){if(p(ab,true)&&h()){try{var ad=c.Utils.getTextContent(ab);
var ac=ab.innerHTML;
if(ad.trim()!=""){if((ab.nodeName=="INS"&&X)||(ab.nodeName=="DEL"&&!X)){af.innerHTML=ac;
ae.replaceChild(af,ab);
}else{if(!(ab.nodeName=="DEL"&&X)){ae.removeChild(ab);
}}}else{ae.removeChild(ab);
}}catch(aa){return;
}}}if(Q(ab)&&ab.className.match(b.CommentsRegex)){if(p(ab,true)&&h()){af.innerHTML=ab.innerHTML;
ae.replaceChild(af,ab);
}}}}if(S.length>0){for(var U=0;
U<S.length;
U++){Z(S[U]);
}}if(W.length>0){for(var V=0;
V<W.length;
V++){Z(W[V]);
}}if(T.length>0){for(var Y=0;
Y<T.length;
Y++){Z(T[Y]);
}}};
var M=function(S){return;
};
var D=function(){return;
};
var C=function(S){return c.TrackChangesUtils.isTrackChangeElement(S);
};
var P=function(T){var S=new Date().getTime();
var U=1;
while(new Date().getTime()<S+T){U=1;
}};
var y=function(aa,ae,Y,W,V){var U=typeof(V)!="undefined"?V:l;
try{var Z=U.get_keyDownEvent();
var ab=String.fromCharCode(Z.keyCode).match(/^\w+([\s-_]\w+)*$/i);
if(!ab){return false;
}}catch(T){}if(null==aa){aa="afterEnd";
}if(null==Y){Y="&nbsp";
}if(null==ae){ae="font";
}var af=U._document.getElementById("vrtxInsertElement");
var S=aa=="afterEnd"?false:true;
if(!af||af==undefined){var ad=U.getSelectedElement();
ad.insertAdjacentHTML(aa,"<"+ae+' id="vrtxInsertElement">'+Y+"</"+ae+">");
af=U._document.getElementById("vrtxInsertElement");
}if(af){try{af.removeAttribute("id");
U.selectElement(af);
if(W){if(S){var ac=U.getSelection().getRange();
var X=ac.findText(" ");
if(X){ac.select();
ac.collapse(false);
}}else{U.getSelection().collapse(S);
af.innerHTML="";
}}else{U.getSelection().collapse(S);
}}catch(T){return false;
}}return true;
};
var j=function(T,S){var U=T;
var X={startOfElement:false,endOfElement:false,selectionStart:-1,selectionEnd:-1};
var W=c.TrackChangesUtils.getDomRange(S);
var Y=W.cloneRange();
Y.selectNodeContents(U);
Y.snapToRange(c.DomRange.END_TO_END,W);
U.selectionStart=Y.getText().length-W.getText().length;
U.selectionEnd=U.selectionStart+W.getText().length;
X.selectionStart=U.selectionStart;
X.selectionEnd=U.selectionEnd;
if(Y.getText().length==0){X.startOfElement=true;
}var V=d.Editor.Utils.getTextContent(U)||"";
if(Y.getText().length==V.length){X.endOfElement=true;
}return X;
};
var k=function(U,T){var S=typeof(T)!="undefined"?T:l;
if(typeof(U)=="undefined"||null==U){var W=document.selection?document.selection.createRange():S.getSelection().getRange();
if(W.length==1){return false;
}U=W.parentElement?W.parentElement():W.commonAncestorContainer;
}if(U.nodeName.toLowerCase()=="font"&&U.className.match(b.CommentsRegex)){if(j(U,T).endOfElement){y("afterEnd","font","&nbsp;",true,T);
}}if(!S.getSelection().isControl()&&!S._canEditSelection()){if(U.nodeName.toLowerCase()=="ins"&&U.getAttribute(b.Attribute.Cite)){var V=j(U,T);
if(V.endOfElement){y("afterEnd","font","&nbsp;",true,T);
}else{if(V.startOfElement){y("beforeBegin","font","&nbsp;",true,T);
}}}}};
var f=function(U,X,S){var W=(typeof(X)!="undefined"&&X!=null)?X:l;
var T=new c.GenericCommand(U,W._contentWindow);
var V=W.get_commandsManager();
if(typeof(S)=="undefined"||S==null){S=true;
}V.execute(T,S);
};
var G=function(T,X){var W=(typeof(X)!="undefined"&&X!=null)?X:l;
var V=W.get_commandsManager();
var U=V.get_commands();
var S=U.length;
if(S>0){if(T==U[S-1]._title){V.removeCommandAt(S-1);
}}};
return{initialize:function(S){x(S);
},acceptAllChanges:function(){z=true;
o();
},acceptAllChangesSilently:function(){z=true;
l.setFocus();
try{N=true;
g();
}finally{N=false;
}},rejectAllChanges:function(){B=true;
o();
},rejectAllChangesSilently:function(){B=true;
l.setFocus();
try{N=true;
g();
}finally{N=false;
}},removeAllComments:function(){A=true;
o();
},moveToNextTrackChange:function(){D();
},setNextTrackChange:function(S){M(S);
},sleep:function(S){P(S);
},insertAdjacentElement:function(V,W,U,T,S){return y(V,W,U,T,S);
},checkElementEndPoint:function(T,S){return j(T,S);
},checkInsertionPoint:function(T,S){return k(T,S);
},addToStack:function(T,U,S){f(T,U,S);
},removeFromStack:function(S,T){G(S,T);
},setEditor:function(S){J(S);
}};
})();
})(Telerik.Web.UI,$telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.TrackChangesConstants);
(function(a,b,f,d,c,e){b.TrackChangesDelete=function(g,h){h=h||{};
h.title="Delete";
b.TrackChangesDelete.initializeBase(this,[g,b.InlineCommandSettings.TrackChangesDelete,h]);
};
b.TrackChangesDelete.prototype={getState:function(i,g,h){return b.CommandStates.Off;
},removeNodeFormatting:function(i){var g=this;
if(g.isSameAuthorInsert(i)){var h=i;
while(i&&i.parentNode&&f.isSingleChild(i)&&!f.isEditorContentArea(i.parentNode)){i=i.parentNode;
}i.parentNode.removeChild(i);
g.cleanUpFragment.removeNode(h);
}else{f.removeNode(i);
}},shouldRemoveNode:function(g){return !this.isSameAuthorInsert(g);
},isSameFormatNode:function(g){return(f.isTag(g,"ins")||f.isTag(g,"del"))&&d.isTrackChangeElement(g)&&d.getTrackChangesCommand(g)!="StrikeThrough";
},_isTrackedInsNode:function(g){return f.isTag(g,"ins")&&d.isTrackChangeElement(g);
},formatFragment:function(i){var g=this;
g.removeFormat_fragment(i);
var h=g.formattedNode=g.createInlineNode();
i.insertBeforeFirst(h);
i.appendTo(h);
g.trackChangedNode({node:h});
},isSameAuthorInsert:function(g){return f.isTag(g,"ins")&&this.isSameAuthor(g);
},isSameAuthor:function(g){return this.get_editor()._isSameAuthor(g);
}};
b.TrackChangesDelete.registerClass("Telerik.Web.UI.Editor.TrackChangesDelete",b.InlineCommand);
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils,Telerik.Web.UI.Editor.TrackChangesUtils,Telerik.Web.UI.Editor.TrackChangesConstants);
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(d,a){var b=d.Editor;
var c=b.CommandList;
c.EnableTrackChanges=function(g,h,f){h.set_enableTrackChanges(!h.get_enableTrackChanges());
var i=h.getToolByName("EnableTrackChanges");
i.setState(h.get_enableTrackChanges()?1:0);
};
c.EnableTrackChangesOverride=function(g,h,f){var i=h.getToolByName(g);
if(i){var j=h.get_enableTrackChangesOverride();
h.set_enableTrackChangesOverride(!j);
i.setOn(j);
}return true;
};
c.AcceptAllTrackChanges=function(g,h,f){Telerik.Web.UI.Editor.TrackChanges.setEditor(h);
Telerik.Web.UI.Editor.TrackChanges.acceptAllChanges();
return true;
};
c.RejectAllTrackChanges=function(g,h,f){Telerik.Web.UI.Editor.TrackChanges.setEditor(h);
Telerik.Web.UI.Editor.TrackChanges.rejectAllChanges();
return true;
};
c.RemoveAllComments=function(g,h,f){Telerik.Web.UI.Editor.TrackChanges.setEditor(h);
Telerik.Web.UI.Editor.TrackChanges.removeAllComments();
return true;
};
c.AddComment=c.AcceptTrackChange=c.RejectTrackChange=c.RemoveTrackChanges=c.RemoveComment=function(f,g,h){g.setActive();
g.executeTrackChangesCommand(f,false,null,null);
return true;
};
c.ImageManagerToDeleteCoveredBy=function(h,i,k){var g=function(n,m){i.pasteHtml(b.Utils.getOuterHtml(m.Result),h);
};
var j=i.get_dialogOpener().get_additionalQueryString();
var l=i.getSelectedElement();
if(l&&l.tagName.toLowerCase()=="img"){i.get_dialogOpener().set_additionalQueryString("&PreselectedItemUrl="+encodeURIComponent(l.src));
}var f={editor:i};
i.showDialog("ImageManager",f,g);
i.get_dialogOpener().set_additionalQueryString(j);
return false;
};
b.CommandList._OriginalCut=b.CommandList.Cut;
b.CommandList.Cut=function(g,i,f){if(i.shouldTrackChanges()){var h=new b.TrackChangesCut(i,{isCutFromTool:!!f});
i._executeCommand(h,false);
}else{b.CommandList._OriginalCut(g,i,f);
}};
c.InsertTable=function(g,h,f){var k=f.value;
if(k){var i=b.Utils.createTable(k.rows,k.cols);
var j=Telerik.Web.UI.Editor.Utils.getOuterHtml(i);
h.pasteHtml(j,g);
}};
c.InsertRowAbove=c.InsertRowBelow=function(h,i,f){var g=new b.TableInsertRow(i.getLocalizedString(h),null,h=="InsertRowAbove"?"above":"below");
g._editor=i;
i.executeCommand(g);
};
c.DeleteRow=function(h,i,f){var g=new b.TableDeleteRow(i.getLocalizedString(h));
g._editor=i;
i.executeCommand(g);
};
c.InsertColumnLeft=c.InsertColumnRight=function(h,i,f){var g=new b.TableInsertColumn(i.getLocalizedString(h),null,h=="InsertColumnLeft"?"left":"right");
g._editor=i;
i.executeCommand(g);
};
function e(h,f,g){var i={title:f};
i.commandValue=g||null;
return new b[f+"TrackChangesCommand"](h,i);
}c.Bold=c.Italic=c.Underline=c.Subscript=c.Superscript=c.StrikeThrough=c.RealFontSize=c.FontName=c.BackColor=c.ForeColor=function(g,i,j){i.setActive();
i.setFocus();
var h=j?j.value:null;
var f=e(i,g,h);
i.executeCommand(f);
return true;
};
})(Telerik.Web.UI,$telerik.$);
Type.registerNamespace("Telerik.Web.UI.Editor");
Type.registerNamespace("Telerik.Web.UI.Editor.TrackChangesCommands");
(function(e,a,f,c){var d=e.Editor;
var b=d.CommandStates;
var g=d.TrackChangesUtils;
var h=d.Utils;
d.TrackChangesCommand=function(k,i){var j=i._contentWindow;
d.TrackChangesCommand.initializeBase(this,[(k||"Track Change Command"),j,true]);
this._editor=i;
};
d.TrackChangesCommand.prototype={getState:function(p){try{var j=this;
var l=j._editor;
var s=l.get_enableTrackChanges();
var i=l.get_canAcceptTrackChanges();
if(s&&!i){return b.Disabled;
}var o=new d.Selection(p||j.get_window());
var q=o.getParentElement();
if(h.isTextNode(q)){q=q.parentNode;
}var r=g.findTrackChangesParentElement(q);
var k=j._title;
if(r&&(r.User==l.get_author()||l.get_isAuthor())){var n=r.Type==d.TrackChangesElementType.Comment;
if(!n&&j._toolName&&j._toolName=="RemoveComment"){return b.Disabled;
}if(!s){if(k=="Reject Track Changes"||k=="Accept Track Changes"){return b.Disabled;
}else{return b.Off;
}}if(k=="Accept Track Changes"||k=="Reject Track Changes"){if(!i||n){return b.Disabled;
}}return b.Off;
}else{if(k.toLowerCase().indexOf(" all track changes")!=-1||k.toLowerCase().indexOf(" all comments")!=-1){return b.Off;
}else{return b.Disabled;
}}}catch(m){return b.Disabled;
}},_deleteTrackedNode:function(m){var i=this;
while(m&&m.parentNode&&h.isSingleChild(m)&&!h.isEditorContentArea(m.parentNode)){m=m.parentNode;
}var k=m.ownerDocument.createElement("span");
var n=m.parentNode;
n.insertBefore(k,m);
n.removeChild(m);
var j=new d.Consolidator();
if(!h.isBlockElement(k.previousSibling)&&!h.isBlockElement(k.nextSibling)){j.consolidateOverMarker(k);
}var p=i.get_editor().getDomRange();
if(j.normalizeTextEdge(k,p,true)){p.collapse(true);
p.select();
}else{var o=k.previousSibling;
var l=k.nextSibling;
a(k).remove();
if(l){p.setStartBefore(l);
}else{if(o){p.setStartAfter(o);
}}if(o||l){p.collapse(true);
p.select();
}}}};
d.TrackChangesCommand.registerClass("Telerik.Web.UI.Editor.TrackChangesCommand",d.CommandBase);
f.AcceptTrackChanges=function(k,j,i){f.AcceptTrackChanges.initializeBase(this,[(k||"Accept Track Changes"),j]);
};
f.AcceptTrackChanges.prototype={OnExecuteIE:function(){if(this.getState(this._editor.get_contentWindow())==b.Disabled){return;
}var j=this._editor.getSelectedElement();
var i=g.findTrackChangesParentElement(j,{ignoreComments:true});
if(!i){return false;
}this.acceptElementChange(i);
return true;
},acceptElementChange:function(m){var i=d.TrackChangesElementType;
var l=m.HtmlElement;
if(m.Type==i.Delete){this._deleteTrackedNode(l);
}else{if(m.Type==i.Comment||m.Type==i.Insert){h.removeNode(l);
}else{var j=m.BrowserCommand,k=d.TrackerFactory.getCommandTracker(j.replace(/^Remove\s/,""),this._editor);
if(k){k.acceptChanges(l,j);
}}}return true;
},OnExecuteMoz:function(){return this.OnExecuteIE();
}};
f.AcceptTrackChanges.registerClass("Telerik.Web.UI.Editor.TrackChangesCommands.AcceptTrackChanges",d.TrackChangesCommand);
f.RejectTrackChanges=function(k,j,i){f.RejectTrackChanges.initializeBase(this,[(k||"Reject Track Changes"),j]);
};
f.RejectTrackChanges.prototype={OnExecuteIE:function(){if(this.getState(this._editor.get_contentWindow())==b.Disabled){return;
}var j=this._editor.getSelectedElement();
var i=g.findTrackChangesParentElement(j,{ignoreComments:true});
if(!i){return false;
}return this._rejectChanges(i);
},_rejectChanges:function(o){var l=this.get_editor(),n=o.Type,m=o.HtmlElement,q=d.TrackChangesElementType,p=new d.DomRange(l.getSelection().getRange(true));
if(n==q.Insert){this._deleteTrackedNode(m);
return true;
}else{if(n==q.Delete||n==q.Comment){h.removeNode(m);
}else{var i=o.BrowserCommand,j=d.TrackerFactory.getCommandTracker(i.replace(/^Remove\s/,""),l);
if(j){j.rejectChanges(m,i);
if(j.ignoreRangeSelect){return true;
}}}}try{p.select();
}catch(k){}return true;
},OnExecuteMoz:function(){return this.OnExecuteIE();
}};
f.RejectTrackChanges.registerClass("Telerik.Web.UI.Editor.TrackChangesCommands.RejectTrackChanges",d.TrackChangesCommand);
f.RemoveTrackChanges=function(k,j,i){f.RemoveTrackChanges.initializeBase(this,[(k||"Remove Track Changes"),j]);
};
f.RemoveTrackChanges.prototype={onExecute:function(k,l,i){var j=this;
l=l||j._editor;
var p=l.getSelectedElement();
var n=g.findTrackChangesParentElement(p);
var m=n&&n.Type==d.TrackChangesElementType.Comment;
if(j.get_title()=="RemoveComment"&&!m){return false;
}if(m){h.removeNode(n.HtmlElement);
return true;
}else{var o=new d.TrackChangesCommands.RejectTrackChanges("RejectTrackChanges",l,"RejectTrackChanges");
return o.OnExecuteIE("RejectTrackChanges",l,null);
}return false;
}};
f.RemoveTrackChanges.registerClass("Telerik.Web.UI.Editor.TrackChangesCommands.RemoveTrackChanges",d.TrackChangesCommand);
f.AddComment=function(m,j,i){var l={};
var k={title:(m||"Add Comment")};
f.AddComment.initializeBase(this,[j,l,k]);
};
f.AddComment.prototype={getState:function(j){var k=d.DomRange.rangeFromWindow(j);
if(!k||k.collapsed){return b.Disabled;
}var i=this;
return h.someInRange(k,function(l){return i._isComment(l)||i._containsComment(l);
})?b.Disabled:b.Off;
},_isComment:function(i){return !!h.getElementParentByCondition(i,g.isCommentElement);
},_containsComment:function(i){return h.some(a.makeArray(a(i).find("*")),g.isCommentElement);
},createInlineNode:function(){var j=this._editor;
var k=a(j.get_document().createElement(c.TagComment));
var i=c.Attribute;
k.addClass(c.CssClassComment+" "+j.get_userCssId()).attr(i.Author,j.get_author()).attr(i.Comment,"").attr(i.Title,"#empty comment#").attr(i.Timestamp,new Date().getTime());
return k.get(0);
},shouldRemoveFormatting:function(i){return false;
},isSameFormat:function(i){return false;
},formatFragments:function(k){var i=this;
while(k.length){var j=k.shift();
if(!i.isEmptyInlineFragment(j)){i.formatFragment(j);
}}},isEmptyInlineFragment:function(n){var q=n.nodes;
var p=a(q);
var j=p.filter("br").add(p.find("br"));
if(j.length==0){return h.every(q,h.isNodeEmptyRecursive);
}else{if(j.length>1){return false;
}}var i=j.get(0);
var m=i.ownerDocument.createTextNode("");
if(n.indexOf(i)>-1){j.replaceWith(m);
}var k=n.indexOf(i);
var l;
if(k>-1){l=q.slice(0);
l[k]=m;
}var o=h.every(l||q,h.isNodeEmptyRecursive);
a(m).replaceWith(i);
return o;
}};
f.AddComment.registerClass("Telerik.Web.UI.Editor.TrackChangesCommands.AddComment",d.InlineCommand);
f.EnableTrackChanges=function(k,j,i){f.EnableTrackChanges.initializeBase(this,[(k||"Add Comment"),j]);
};
f.EnableTrackChanges.prototype={getState:function(j){try{if(this._editor.get_enableTrackChanges()){return b.On;
}else{return b.Off;
}}catch(i){return b.Disabled;
}},OnExecuteIE:function(){var i=this._editor;
i.set_enableTrackChanges(!i.get_enableTrackChanges());
i.raiseEvent("selectionChange",Sys.EventArgs.Empty);
return false;
}};
f.EnableTrackChanges.registerClass("Telerik.Web.UI.Editor.TrackChangesCommands.EnableTrackChanges",d.TrackChangesCommand);
f.EnableTrackChangesOverride=function(k,j,i){f.EnableTrackChangesOverride.initializeBase(this,[(k||"Enable Track Changes override"),j]);
};
f.EnableTrackChangesOverride.prototype={getState:function(j){try{if(this._editor.get_enableTrackChangesOverride()){return b.Off;
}else{return b.On;
}}catch(i){return b.Disabled;
}},OnExecuteIE:function(){var i=this._editor;
i.set_enableTrackChangesOverride(!i.get_enableTrackChangesOverride());
i.raiseEvent("selectionChange",Sys.EventArgs.Empty);
return false;
},OnExecuteMoz:function(){return this.OnExecuteIE();
}};
f.EnableTrackChangesOverride.registerClass("Telerik.Web.UI.Editor.TrackChangesCommands.EnableTrackChangesOverride",d.TrackChangesCommand);
})(Telerik.Web.UI,$telerik.$,Telerik.Web.UI.Editor.TrackChangesCommands,Telerik.Web.UI.Editor.TrackChangesConstants);
(function(a,b,d){var e=b.Utils;
var c=b.TrackChangesUtils;
b.TrackChangesCut=function(f,g){b.TrackChangesCut.initializeBase(this,[f,g]);
};
b.TrackChangesCut.prototype={onExecute:function(){var f=this;
var i=f.get_editor();
var n=f.getEditorRange();
var h=n.getHtml();
if(n.collapsed||!h){return;
}var k=f.getGenericCutCommand(i);
if(f.isInTrackedDeletion(n)){return f.handleCutInDeletion(k);
}f.onExecuteBase();
var g=f.getCutElementsContainer(h);
var j=g.firstChild;
var l=g.lastChild;
var m=f.getLastDeletedNode();
if(j&&m){f.appendNodesToCut(g,m);
f.selectNodesToCut(n,j,l);
f.executeCut(k);
}},isInTrackedDeletion:function(f){return c.getParentTrackChangesDeleteNode(f.commonAncestorContainer);
},handleCutInDeletion:function(h){var f=this;
var g=f.get_editor();
if(f.options.isCutFromTool&&!f._tryCutProgrammatically(g)){f._alert(g.getLocalizedString("UseCtrlX"));
}else{g._pendingCutPasteCommand=h;
}},_alert:function(f){window.alert(f);
},getGenericCutCommand:function(f){return new b.GenericCommand(f.getLocalizedString("Cut"),f.get_contentWindow(),f);
},onExecuteBase:function(){b.TrackChangesCut.callBaseMethod(this,"onExecute");
},consolidate:function(){},getCutElementsContainer:function(g){var f=this.get_editor().get_document().createElement("div");
f.innerHTML=g;
if(e.isTag(f.lastChild,"br")){f.removeChild(f.lastChild);
}a(f).children().each(function(h,i){if(e.isNodeEmptyRecursive(i,true)){f.removeChild(i);
}});
return f;
},getLastDeletedNode:function(){var f=this.elements;
var g=f&&f.length?f[f.length-1]:d;
return g?g.node:d;
},appendNodesToCut:function(f,g){while(f.firstChild){g.appendChild(f.firstChild);
}},selectNodesToCut:function(g,h,f){g.setStartBefore(h);
g.setEndAfter(f);
g.select();
},executeCut:function(h){var f=this;
var g=f.get_editor();
if(f.options.isCutFromTool&&!f._tryCutProgrammatically(g)){g.executeCommand(h);
g.undo(1);
f._alert(g.getLocalizedString("UseCtrlX"));
}else{g._pendingCutPasteCommand=h;
}},_tryCutProgrammatically:function(f){return b.CommandList._tryCutProgrammatically(f);
}};
b.TrackChangesCut.registerClass("Telerik.Web.UI.Editor.TrackChangesCut",b.TrackChangesDelete);
})($telerik.$,Telerik.Web.UI.Editor);
(function(a){a.TrackChangesInlineCommand=function(c,b,d){a.TrackChangesInlineCommand.initializeBase(this,[c,b,d]);
};
a.TrackChangesInlineCommand.prototype={formatFragment:function(c){var b=this;
b.extractTrackedAncestor(c);
a.TrackChangesInlineCommand.callBaseMethod(b,"formatFragment",[c]);
}};
a.TrackChangesInlineCommand.registerClass("Telerik.Web.UI.Editor.TrackChangesInlineCommand",a.InlineCommand);
})(Telerik.Web.UI.Editor);
(function(a){a.TrackChangesInlineCommandWithValue=function(c,b,d){a.TrackChangesInlineCommandWithValue.initializeBase(this,[c,b,d]);
};
a.TrackChangesInlineCommandWithValue.prototype={formatFragment:function(c){var b=this;
b.extractTrackedAncestor(c);
a.TrackChangesInlineCommandWithValue.callBaseMethod(b,"formatFragment",[c]);
}};
a.TrackChangesInlineCommandWithValue.registerClass("Telerik.Web.UI.Editor.TrackChangesInlineCommandWithValue",a.InlineCommandWithValue);
})(Telerik.Web.UI.Editor);
(function(a,b,f,d,c,e){b.TrackChangesInsert=function(g,h){h=h||{};
h.title="Insert";
b.TrackChangesInsert.initializeBase(this,[g,b.InlineCommandSettings.TrackChangesInsert,h]);
};
b.TrackChangesInsert.prototype={getState:function(i,g,h){return b.CommandStates.Off;
},removeSameFormatChildren:function(g){},formatFragments:function(i){var g=this;
var k=g.getEditorRange();
var j=g.insertSingleFormatNode(k);
var m=d.getTrackedAncestor(j.parentNode);
if(m){var l=g.createMarker();
var h=l.cloneNode(true);
j.parentNode.insertBefore(l,j);
a(h).insertAfter(j);
g.extractFormatting(m,l,h);
a(m).find("*").addBack().filter(function(n,o){return d.isTrackChangeElement(o)&&o!==j;
}).each(function(n,o){if(f.isTag(o,"ins")||d.isChangeDelete(o)){f.removeNode(o);
}else{d.removeNodeTracking(o);
}});
j.parentNode.removeChild(l);
j.parentNode.removeChild(h);
}g.setCursorInInlineNode(j,k);
}};
b.TrackChangesInsert.registerClass("Telerik.Web.UI.Editor.TrackChangesInsert",b.InlineCommand);
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils,Telerik.Web.UI.Editor.TrackChangesUtils,Telerik.Web.UI.Editor.TrackChangesConstants);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(a,b,e){function d(f){return b.InlineCommandSettings[f];
}function c(i){var f=i+"TrackChangesCommand",j="Telerik.Web.UI.Editor."+f,h=d(i);
h.commandName=i;
var g=b[f]=function(l,m){var k=b[h.commandName]?b[h.commandName]:h.hasValue?b.TrackChangesInlineCommandWithValue:b.TrackChangesInlineCommand;
return new k(l,h,m);
};
g.registerClass(j);
}c("Bold");
c("Italic");
c("Underline");
c("StrikeThrough");
c("Subscript");
c("Superscript");
c("ForeColor");
c("BackColor");
b.FontNameTrackChangesCommand=function(g,h){var f=d(h.title);
b.FontNameTrackChangesCommand.initializeBase(this,[g,f,h]);
};
b.FontNameTrackChangesCommand.registerClass("Telerik.Web.UI.Editor.FontNameTrackChangesCommand",b.TrackChangesInlineCommandWithValue);
b.RealFontSizeTrackChangesCommand=function(g,h){var f=d(h.title);
b.RealFontSizeTrackChangesCommand.initializeBase(this,[g,f,h]);
};
b.RealFontSizeTrackChangesCommand.registerClass("Telerik.Web.UI.Editor.RealFontSizeTrackChangesCommand",b.TrackChangesInlineCommandWithValue);
})($telerik.$,Telerik.Web.UI.Editor);
(function(a,b,e,c,d){b.TrackChangesRemoveFormat=function(f,g){b.TrackChangesRemoveFormat.initializeBase(this,[f,b.InlineCommandSettings.TrackChangesRemoveFormat,g]);
};
b.TrackChangesRemoveFormat.prototype={getState:function(k,f,i){var h=i||b.DomRange.rangeFromWindow(k),j=h.startContainer;
if(e.isBlockElement(j)||!a.contains(f.get_contentArea(),j)){return b.CommandStates.Off;
}var g=c.getTrackedParentNode(j);
return(g&&!e.isBlockElement(g))?b.CommandStates.On:b.CommandStates.Off;
},removeFormat:function(h){var f=this;
while(h.length){var g=h.shift();
if(!g.isEmpty()){f.removeFormat_fragment(g);
}}},findFormattedAncestor:function(f){return c.getTrackedAncestor(f);
},removeNodeFormatting:function(g){var f=this;
a(g).find("*").each(function(h,i){if(c.isTrackChangeElement(i)){f._removeNodeTracking(i);
}});
f._removeNodeTracking(g);
},_removeNodeTracking:function(f){if(e.isTag(f,"ins")||e.isTag(f,"del")){e.removeNode(f);
return;
}c.removeNodeTracking(f);
},isSameFormatNode:function(f){return c.isTrackChangeElement(f);
},removeSameFormatChildren:function(f){},cleanUpFormat:function(f){}};
b.TrackChangesRemoveFormat.registerClass("Telerik.Web.UI.Editor.TrackChangesRemoveFormat",b.InlineCommand);
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils,Telerik.Web.UI.Editor.TrackChangesUtils);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(d,a,c,b){c.TrackChangesSelection=(function(){var t=function(y,D,x,z){y=c.DomRange.toDomRange(y);
var A={fullySelected:false,textSelected:false,partialStart:false,partialEnd:false,partialOverlapped:false,overlapped:false,inRange:false,rangeType:"",errorMsg:""};
if(y.range.length){return A;
}var w=(typeof(D)=="undefined"||null==D)?"":D;
var v=(typeof(z)=="undefined"||null==z)?k(D):z;
var u=(typeof(x)=="undefined"||null==x)?true:x;
if(w==""){A.errorMsg="Tag Name is required.";
}if(!y){A.errorMsg="No selection found.";
}if(A.errorMsg==""){var B=y.getParentElement();
var C=y.cloneRange();
if(C.range.length){if(D.match(/(placeholder|caption)/i)){if(new RegExp(v,"i").test($telerik.getOuterHtml(B))){B=B.parentElement;
}}if(new RegExp(v,"i").test($telerik.getOuterHtml(B))){A.fullySelected=true;
}if(!A.fullySelected){if(new RegExp(v,"i").test($telerik.getOuterHtml(B.parentElement))&&B.parentElement.nodeName.match(/(ins|del)/i)){A.fullySelected=true;
}}A.rangeType="Selectable";
}else{if(n(C,w,u,v)){A.fullySelected=true;
}else{if(s(C,w,u,v)){A.textSelected=true;
}else{if(r(C,w,u,v)){A.partialStart=true;
A.textSelected=true;
}else{if(p(C,w,u,v)){A.partialEnd=true;
A.textSelected=true;
}else{if(q(C,w,u,v)){A.partialOverlapped=true;
}else{if(o(C,w,u,v)){A.overlapped=true;
}}}}}}A.rangeType="Range";
}}if(A.fullySelected||A.overlapped||A.partialEnd||A.partialOverlapped||A.partialStart||(A.textSelected&&!D)){A.inRange=true;
}return A;
};
var k=function(v){var u="";
if(typeof(v)=="undefined"||!v){return"";
}switch(v.toLowerCase()){case"img":u="</?(IMG).*\n*src=.*[^>]*/?>";
break;
case"a":u="</?(a).*\n*href=.*[^>]*/?>";
break;
case"ins":u="(</?(ins)[^>]*("+b.Attribute.Author+"|"+b.Attribute.Cite+")=?)";
break;
case"del":u="(</?(del)[^>]*("+b.Attribute.Author+"|"+b.Attribute.Cite+")=?)";
break;
case"comment":u="</?(font).*\n*class=.*"+b.CssClassNamePrefixComment+".*\n*[^>]*/?>";
break;
case"trackchange_strong":u="(</?(strong)[^>]*("+b.Attribute.Author+"|"+b.Attribute.Cite+")=?)";
break;
case"trackchange_em":u="(</?(em)[^>]*("+b.Attribute.Author+"|"+b.Attribute.Cite+")=?)";
break;
case"trackchange_u":u="(</?(u)[^>]*("+b.Attribute.Author+"|"+b.Attribute.Cite+")=?)";
break;
case"trackchange_strike":u="(</?(strike)[^>]*("+b.Attribute.Author+"|"+b.Attribute.Cite+")=?)";
break;
case"trackchange_sup":u="(</?(sup)[^>]*("+b.Attribute.Author+"|"+b.Attribute.Cite+")=?)";
break;
case"trackchange_sub":u="(</?(sub)[^>]*("+b.Attribute.Author+"|"+b.Attribute.Cite+")=?)";
break;
case"trackchange_p":u="(</?(p)[^>]*("+b.Attribute.Author+"|"+b.Attribute.Cite+"=?)";
break;
case"table":u="</?(table)[^>]*/?>";
break;
case"bookmark":u='</?(a).*\n*class="?[^"]*?bookmarkDisplayTool[^"]*?"?[^>]*/?>';
break;
case"placeholder":u="(</?(span|font)[^>]*(name)\\s*=\\s*?('|\")+(_wp)+.*)";
break;
case"caption":u="(</?(span|font)[^>]*(name)\\s*=\\s*?('|\")+(forCaption)+.*?>)";
break;
default:break;
}return u;
};
var m=function(w){var u=w.toUpperCase();
var v=u;
switch(u){case"COMMENT":v="FONT";
break;
case"TRACKCHANGE_STRONG":v="STRONG";
break;
case"TRACKCHANGE_EM":v="EM";
break;
case"TRACKCHANGE_U":v="U";
break;
case"TRACKCHANGE_STRIKE":v="STRIKE";
break;
case"TRACKCHANGE_SUP":v="SUP";
break;
case"TRACKCHANGE_SUB":v="SUB";
break;
case"TRACKCHANGE_P":v="P";
break;
case"BOOKMARK":v="A";
break;
case"PLACEHOLDER":case"CAPTION":v="SPAN";
break;
default:break;
}return v;
};
var l=function(u,w){var v=u;
w=w.toUpperCase();
while(v&&v.nodeName!="BODY"){if(v.nodeName==w){break;
}v=v.parentNode;
}return v;
};
var j=function(z,C,u,A){z=c.DomRange.toDomRange(z);
var B={start:false,end:false,sameElement:false,startPartialRange:"",endPartialRange:""};
var v=z.cloneRange();
var x=z.cloneRange();
v.collapse(true);
if(v.range.move){v.range.move("character",1);
}x.collapse(false);
var w=v.getParentElement();
var y=x.getParentElement();
C=m(C);
if(w.nodeName!=C){if(u){w=l(w,C);
}}if(y.nodeName!=C){if(u){y=l(y,C);
}}if(A){B.start=(new RegExp(A,"i").test($telerik.getOuterHtml(w))&&w.nodeName==C);
B.end=(new RegExp(A,"i").test($telerik.getOuterHtml(y))&&y.nodeName==C);
}else{B.start=C==w.nodeName;
B.end=C==y.nodeName;
}B.sameElement=w==y;
v.moveEnd("character",1);
x.moveEnd("character",1);
B.startPartialRange=v;
B.endPartialRange=x;
z.select();
return B;
};
var n=function(A,D,y,B){A=c.DomRange.toDomRange(A);
var C=false;
var v=A.getParentElement();
var z=false;
if(D.match(/(placeholder|caption)/i)){D="A";
z=true;
}D=m(D);
if(v){if(v.nodeName!=D&&y){v=l(v,D);
}var w=A.cloneRange();
try{w.selectNodeContents(v);
}catch(x){}if(D==v.nodeName){if(new RegExp(B,"i").test(A.getHtml())){if(z){var u=$telerik.getOuterHtml(v).replace(/^\s+|\s+$/g,"");
if(A.getText()==u){C=true;
}}else{return A.inRange(w)||A.getText()==$telerik.getOuterHtml(v);
}}}}return C;
};
var s=function(x,A,v,y){x=c.DomRange.toDomRange(x);
var z=false;
var u=x.getParentElement();
A=m(A);
if(u.nodeName!=A.toUpperCase()){if(v){u=l(u,A);
}}if(u.nodeName==A){var w=(x.range&&x.range.moveEnd)||(!x.range&&x.moveEnd);
if(w){x.moveEnd("character",1);
}if(!new RegExp(y,"i").test(x.getHtml())&&new RegExp(y,"i").test($telerik.getOuterHtml(u))){z=true;
}if(w){x.moveEnd("character",-1);
}}return z;
};
var r=function(x,A,v,y){x=c.DomRange.toDomRange(x);
var z=false;
var u=x.getParentElement();
A=m(A);
if(u.nodeName!=A){if(v){u=l(u,A);
}}if(new RegExp(y,"i").test(x.getHtml())){var w=j(x,A,v,y);
if(w.start&&w.end&&w.sameElement){if($telerik.getOuterHtml(u)!=x.getText()){return true;
}}}return z;
};
var p=function(x,A,v,y){x=c.DomRange.toDomRange(x);
var z=false;
var u=x.getParentElement();
A=m(A);
if(u.nodeName!=A){if(v){u=l(u,A);
}}if(!new RegExp(y,"i").test(x.getHtml())){var w=j(x,A,v,y);
if(w.start&&w.end&&w.sameElement&&x.getText()!=$telerik.getOuterHtml(u)){return true;
}}return z;
};
var q=function(D,H,z,F){D=c.DomRange.toDomRange(D);
var G=false;
var v=H.toUpperCase();
H=m(H);
var E=D.getHtml();
if(new RegExp(F,"i").test(E)){var C=j(D,H,z,F);
if((C.start||C.end)&&(!C.sameElement)){G=true;
}else{if(v=="IMG"||v=="CAPTION"||v=="PLACEHOLDER"){var u=v=="IMG"?F:"(</?(A).*\n*contentEditable=.*[^>]*/?>)";
var B=E.match(new RegExp(u,"i"));
if(B){var A=B[0].length;
if(B.index==0&&A!=E.length){G=true;
}else{var w=D.cloneRange();
w.collapse(false);
if(w.range.moveStart){w.moveStart("character",-1);
}var x=w.getHtml();
if(x.match(new RegExp(u,"i"))){G=true;
}else{var y=w.getParentElement();
if(x==""&&y.nodeName=="A"&&y.contentEditable=="true"){G=true;
}}}}}}}return G;
};
var o=function(w,z,u,x){w=c.DomRange.toDomRange(w);
var y=false;
z=m(z);
if(new RegExp(x,"i").test(w.getHtml())){var v=j(w,z,u,x);
if(!v.start&&!v.end){return true;
}}return y;
};
var i=function(v,u){var w=v;
var x=w.parentElement;
if(x.nodeName=="FONT"){var z=c.Utils.getTextContent(w);
var y=x.outerText;
if(z==y){u.selectElement(x);
return;
}}var A=document.createElement("FONT");
w.parentElement.replaceChild(A,w);
A.appendChild(w);
u.selectElement(A);
};
var e=function(y,u){if(typeof(y)=="undefined"||y==null){return;
}var B=[];
var x=y;
var v=x.getAttribute(u);
var D=x.nodeName;
var C=x.ownerDocument.getElementsByTagName(D);
if(v==null){B=C;
}else{for(var A=0;
A<C.length;
A++){var z=C[A];
var w=z.getAttribute(u);
if(v==w){B.push(z);
}}}return B;
};
var h=function(u){var v=u;
var w=new RegExp("<(script)[^>]*?>(?:.|\n)*?</(script)>","ig");
v=v.replace(w,"");
v=v.replace(/<\s*ins(.|\n)*?>/gi,"");
v=v.replace(/<\s*\/\s*ins\s*.*?>/gi,"");
v=v.replace(/<\s*del(.|\n)*?>/gi,"");
v=v.replace(/<\s*\/\s*del\s*.*?>/gi,"");
var x="(</?(strong|em|u|sup|sub|font|p)[^>]*("+b.Attribute.Author+"|"+b.Attribute.Cite+")=?)";
if(new RegExp(x,"ig").test(v)){v=f(v,x);
}v=v.replace(/<FONT[^>]color=.*?>([\s\S]*?)<\/FONT[^>]*?>/ig,"$1");
return v;
};
var f=function(B,x){var y=document.createElement("DIV");
c.Utils.setElementInnerHtml(y,B);
var A=y.childNodes;
var w=x;
for(var v=0;
v<A.length;
v++){var z=A[v];
if(z.nodeName!="#text"){try{if(new RegExp(w,"ig").test($telerik.getOuterHtml(z))){z.removeAttribute("className");
z.removeAttribute(b.Attribute.Title);
z.removeAttribute(b.Attribute.Author);
z.removeAttribute(b.Attribute.Cite);
z.removeAttribute(b.Attribute.Timestamp);
c.TrackChangesUtils.removeTrackChangesCommand(z);
}}catch(u){continue;
}}}return y.innerHTML;
};
var g=function(v,x,z){function u(){var F=y;
var B=false;
F=F.replace(/<(p)[^>]*\/?><\/(?:\1)>/ig,"");
F=F.replace(/<(p)[^>]*\/?>&nbsp;<\/(?:\1)>/ig,"<BR/>");
F=F.replace(/<\s*p(.|\n)*?>/i,"");
F=F.replace(/<\s*\/\s*p\s*.*?>/ig,"");
F=F.replace(/<\s*p(.|\n)*?>/ig,"<BR/>");
var H=document.createElement("DIV");
c.Utils.setElementInnerHtml(H,F);
var E=true;
if(H.children.length==1&&H.childNodes.length==1){if(H.childNodes[0].nodeName=="SPAN"){F=c.Utils.getTextContent(H.childNodes[0]);
E=false;
}}if(E){var J=H.childNodes;
for(var C=0;
C<J.length;
C++){var I=J[C];
if(I.nodeName=="A"){var D=I.contentEditable.match(/(true|false)/i);
if(D){try{var K=x?document.createTextNode(""):document.createTextNode(I.outerText);
var G=I.parentElement;
G.replaceChild(K,I);
}catch(A){B=true;
}}}}if(!B){F=H.innerHTML;
}}return F;
}var y=v;
var w=y.match(new RegExp(k(z),"i"));
if(w){y=u();
}return y;
};
return{locateElementInRange:function(v,y,u,w){v=c.DomRange.toDomRange(v);
var x=t(v.cloneRange(),y,u,w);
v.select();
return x;
},wrapElement:function(v,u){i(v,u);
},getSimilarElements:function(v,u){return e(v,u);
},stripTrackChanges:function(u){return h(u);
},findOffsetParent:function(u,x){var v=l(u,x);
var w=false;
if(v){if(v.nodeName==x.toUpperCase()){w=v;
}}return w;
},stripPlaceHolders:function(u,v,w){return g(u,v,w);
}};
})();
})(Telerik.Web.UI,$telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.TrackChangesConstants);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(a,b,d,c){b.BaseCommandsTracker=function(e){var f=this;
f.timestamp=new Date().getTime();
f.author=e.get_author();
f.userCssId=e.get_userCssId();
f._editor=e;
};
b.BaseCommandsTracker.prototype={trackFormattedNodes:function(g,e){var l=this;
for(var h=g.length-1;
h>=0;
h--){var f=g[h],k=f.node,j=l.isTextNode=d.isTextNode(k);
l.isTracked=!j&&c.isTrackChangeElement(k);
l.isListItem=!j&&d.isTag(k,"li");
l.trackNodeFormatting(f,f.commandName||e);
}},trackNodeFormatting:function(f,e){var h=this,g=f.node;
if(h.isTracked&&g.innerHTML==""){a(g).remove();
return;
}if(h.isTextNode){var i=g.ownerDocument.createElement("span");
a(g).wrap(i);
g=f.node=g.parentNode;
}h.trackFormatting(f,e);
},_savePreviousState:function(e){var f=e.node;
if(e.isWrapper&&!f.getAttribute("iswrapper")){f.setAttribute("iswrapper",e.isWrapper);
}else{if(e.originalValue&&!f.getAttribute("originalvalue")){f.setAttribute("originalvalue",e.originalValue);
}if(e.cssProperty&&!f.getAttribute("cssproperty")){f.setAttribute("cssproperty",e.cssProperty);
}}},acceptChanges:function(i,f){var h="",j=new b.DomRange.rangeFromWindow(i.ownerDocument.defaultView||window),l=b.TrackChangesSelection.locateElementInRange(j.getBrowserRange(),"table");
if(l.inRange){var k=i.className.split(" ");
if(k.length==2){h=k[1];
}}this.acceptNodeChanges(i,f);
if(h){i.className=h;
}if((d.isTag(i,"span")||d.isTag(i,"font"))&&!d.hasAttributes(i)){d.removeNode(i);
try{j.select();
}catch(g){}}},acceptNodeChanges:function(e){c.removeNodeTracking(e);
},rejectChanges:function(f,e){this.rejectNodeChanges(f,e);
},rejectNodeChanges:function(e){d.removeNode(e);
},_restoreFormatting:function(f){var e,g="";
if(f.getAttribute("originalvalue")){g=f.getAttribute("originalvalue");
}if(f.getAttribute("cssproperty")){e=f.getAttribute("cssproperty");
}if(e){f.style[e]=g;
}}};
b.BaseCommandsTracker.registerClass("Telerik.Web.UI.Editor.BaseCommandsTracker",null);
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils,Telerik.Web.UI.Editor.TrackChangesUtils);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(a,b,d,c){b.AlignCommandTracker=function(e){b.AlignCommandTracker.initializeBase(this,[e]);
};
b.AlignCommandTracker.prototype={trackFormatting:function(f,e){var g=this;
g._savePreviousState(f);
c.setTrackChangesAttributes(f.node,e,g.author,g.userCssId,g.timestamp);
},rejectNodeChanges:function(e){if(e.getAttribute("iswrapper")){b.AlignCommandTracker.callBaseMethod(this,"rejectNodeChanges",[e]);
return;
}this._restoreFormatting(e);
c.removeNodeTracking(e);
}};
b.AlignCommandTracker.registerClass("Telerik.Web.UI.Editor.AlignCommandTracker",b.BaseCommandsTracker);
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils,Telerik.Web.UI.Editor.TrackChangesUtils);
(function(a,b){Type.registerNamespace("Telerik.Web.UI.Editor");
var f=b.Utils;
var e=b.TrackChangesUtils;
var d=e.isTrackChangeElement;
var c=e.getTrackChangesCommand;
b.IndentationTracker=function(g){b.IndentationTracker.initializeBase(this,[g]);
};
b.IndentationTracker.prototype={trackFormatting:function(i,g){var o=this;
var k=i.node;
if(!o.isListItem&&!o.isTextNode&&!i.originalValue&&!k.style.marginLeft){if(i.isWrapper){f.removeNode(k);
}return;
}if(!o.isTracked){o._savePreviousState(i);
e.setTrackChangesAttributes(k,g,o.author,o.userCssId,o.timestamp);
return;
}var m=e.getTrackChangesCommand(k);
var h=k.getAttribute("cssproperty");
var j=k.getAttribute("iswrapper");
var l=k.getAttribute("originalvalue")||"";
if(((m=="Indent"&&g=="Outdent")||(m=="Outdent"&&g=="Indent"))){if(j&&!h&&k.style.marginLeft==l){var n=new b.DomRange.rangeFromWindow(k.ownerDocument.defaultView||window);
f.removeNode(k);
n.select();
}else{if(o.isListItem||(h&&k.style[h]==l)){e.removeNodeTracking(k);
}}}},acceptNodeChanges:function(i,g){var j=this;
if(/^insert(un)orderedList/i.test(i.getAttribute("innercommand")||"")){var h=new b.InsertListTracker(j._editor);
return h.acceptNodeChanges(i,i.getAttribute("innercommand"));
}if(f.isTag(i,"li")){j._acceptListItemChanges(i,g);
}else{b.IndentationTracker.callBaseMethod(j,"acceptNodeChanges",[i]);
}},_acceptListItemChanges:function(i,h){var j=i.getAttribute("previousoutdent"),k=i.getAttribute("timestamp").toString();
if(j){j=j.toString();
k=k+"|"+j.replace(/[,]/gm,"|");
i.removeAttribute("previousoutdent");
}if(h=="Indent"&&e.isTrackChangeElement(i.parentNode)&&e.getTrackChangesCommand(i.parentNode)==h){e.removeNodeTracking(i.parentNode);
}var g=e.getSameTrackingSiblings(i);
g.each(function(l,m){e.removeNodeTracking(m);
m.removeAttribute("previousoutdent");
});
},_executeOppositeCommand:function(k,g){var i=this._editor;
var h=i.get_contentArea();
var l=this.collectSameTrackNodes(k);
var j=function(n){return d(n)&&c(n)===g;
};
var m=f.findAncestorBy(h,k,j);
if(m&&m!==h){this._executeOppositeCommand(m,g);
}Array.forEach(l,e.removeNodeTracking);
this._runOppositeCommandOnNodes(l);
},restoreNode:function(g){this._restoreFormatting(g);
e.removeNodeTracking(g);
}};
b.IndentationTracker.registerClass("Telerik.Web.UI.Editor.IndentationTracker",b.BaseCommandsTracker);
})($telerik.$,Telerik.Web.UI.Editor);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(a,b,d,c){b.IndentTracker=function(e){b.IndentTracker.initializeBase(this,[e]);
};
b.IndentTracker.prototype={rejectNodeChanges:function(j,h){if(j.getAttribute("iswrapper")){if(d.isList(j)&&d.isTag(j.parentNode,"li")){a(j).insertAfter(j.parentNode);
}b.IndentTracker.callBaseMethod(this,"rejectNodeChanges",[j]);
return;
}var i=d.isTag(j,"li"),e,k;
if(d.isList(j)&&d.isTag(j.parentNode,"li")){e=a(j);
var f=e.children(),g=f.length==f.filter(function(m,n){return c.isTrackChangeElement(n)&&c.getTrackChangesCommand(n)==h;
}).length;
if(g){k=j.parentNode;
f.each(function(m,n){c.removeNodeTracking(n);
});
f.insertAfter(k);
e.remove();
return;
}}var l=j.parentNode;
if(i&&c.isTrackChangeElement(l)&&d.isTag(l.parentNode,"li")&&c.getTrackChangesCommand(l)=="Indent"){e=a(l);
k=l.parentNode;
e.children().each(function(m,n){c.removeNodeTracking(n);
});
e.children().insertAfter(k);
e.remove();
return;
}if(!i){return this.restoreNode(j);
}this._executeOppositeCommand(j,h);
},collectSameTrackNodes:function(e){return c.getSameTrackingSiblings(e).get();
},_runOppositeCommandOnNodes:function(f){var e=new b.OutdentCommand(this._editor,{title:"Outdent"});
e.nodes=f;
e.executeDomCommand(f);
}};
b.IndentTracker.registerClass("Telerik.Web.UI.Editor.IndentTracker",b.IndentationTracker);
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils,Telerik.Web.UI.Editor.TrackChangesUtils);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(a,b,d,c){b.InlineCommandTracker=function(e){b.InlineCommandTracker.initializeBase(this,[e]);
};
b.InlineCommandTracker.prototype={trackFormatting:function(f,e){var i=this;
var g=f.node;
if(!i.isTracked||f.overrideTracking){c.setTrackChangesAttributes(g,e,i.author,i.userCssId,i.timestamp);
return;
}var h=c.getTrackChangesCommand(g);
if(e=="Remove "+h){c.removeNodeTracking(g);
if((d.isTag(g,"span")||d.isTag(g,"font"))&&!d.hasAttributes(g)){d.removeNode(g);
}}},rejectNodeChanges:function(j,f){if(!/^Remove\s/.test(f)){return b.InlineCommandTracker.callBaseMethod(this,"rejectNodeChanges",[j]);
}var i=f.replace("Remove ",""),e=new b[i+"Command"](null,{title:i}),k=e.settings.tag,g=e.settings.cssName,h=e.settings.cssValue||e.options.commandValue;
c.removeNodeTracking(j);
if(k&&k!=j.nodeName){j=d.replaceNode(j,k);
}else{if(g){j.style[g]=h;
}}}};
b.InlineCommandTracker.registerClass("Telerik.Web.UI.Editor.InlineCommandTracker",b.BaseCommandsTracker);
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils,Telerik.Web.UI.Editor.TrackChangesUtils);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(a,b,d,c){b.InsertLinkTracker=function(e){b.InsertLinkTracker.initializeBase(this,[e]);
};
b.InsertLinkTracker.prototype={trackFormatting:function(f,e){if(d.isTag(f,"a")){var g=this;
c.setTrackChangesAttributes(f,e,g.author,g.userCssId);
}}};
b.InsertLinkTracker.registerClass("Telerik.Web.UI.Editor.InsertLinkTracker",Telerik.Web.UI.Editor.BaseCommandsTracker);
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils,Telerik.Web.UI.Editor.TrackChangesUtils);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(a,b,d,c){b.InsertListTracker=function(e){b.InsertListTracker.initializeBase(this,[e]);
};
b.InsertListTracker.prototype={trackNodeFormatting:function(f,e){var h=f.node,j=this,g=f.isEmptyList;
j.originalNodeName=f.originalNodeName;
j.isWrapper=f.isWrapper;
j.itemIndex=f.itemIndex;
j.itemsCount=f.itemsCount;
j.parentNode=f.parentNode;
if(j.isTracked){var i=c.getTrackChangesCommand(h);
if(/Insert(:?Un)?OrderedList/i.test(i)){return j._trackTrackedNode(h,e,i);
}}if(g){h.setAttribute("isemptylist",true);
j._trackEmptyList(h,e);
}else{if(!j.isListItem&&d.isList(j.parentNode)&&c.isTrackChangeElement(j.parentNode)&&e==c.getTrackChangesCommand(j.parentNode)&&!h.getAttribute("listnodename")){j._cleanUpCommandAttributes(h);
}else{if(j.isListItem){j._trackListItem(h,e);
}else{if(d.isList(h)){j._trackList(h,e);
}else{c.setTrackChangesAttributes(h,e,j.author,j.userCssId,j.timestamp);
j._setAttribute(h,"itemindex",j.itemIndex);
j._setAttribute(h,"itemscount",j.itemsCount);
j._setAttribute(h,"innercommand",j._innerCommand);
}}}}},_trackEmptyList:function(f,e){var g=this;
c.setTrackChangesAttributes(f,e,g.author,g.userCssId,g.timestamp);
},_trackListItem:function(g,e){var h=this;
if(!h._setAttribute(g,"iswrapper",h.isWrapper)){h._setAttribute(g,"originalnodename",h.originalNodeName);
}var f=g.parentNode;
if(!c.isTrackChangeElement(f)){c.setTrackChangesAttributes(f,e,h.author,h.userCssId,h.timestamp);
}},_trackList:function(h,e){var j=this;
c.setTrackChangesAttributes(h,e,j.author,j.userCssId,j.timestamp);
var i=h.nodeName=="OL"?"UL":"OL",f=j.itemIndex,g=j.itemsCount;
j._setAttribute(h,"originalnodename",i);
if(typeof f!="undefined"&&typeof g!="undefined"){a(h).children().each(function(k,l){j._setAttribute(l,"itemindex",f++);
j._setAttribute(l,"itemscount",g);
j._setAttribute(l,"listnodename",i);
});
}},_trackTrackedNode:function(h,e,i){var k=this,j=e==i;
if(d.isList(h)){h=k._mergeNearLists(h);
k._cleanUpCommandAttributes(h);
c.removeNodeTracking(h);
if(!j){c.setTrackChangesAttributes(h,e,k.author,k.userCssId,k.timestamp);
}}else{if(k.isListItem){var g=h.getAttribute("listnodename");
if(g&&g!=h.parentNode.nodeName){return;
}if(!k.listMerged){var f=h.parentNode;
f=k._mergeNearLists(f);
k.listMerged=true;
}k._cleanUpCommandAttributes(h);
c.removeNodeTracking(h);
}}},_setAttribute:function(g,e,f){if(typeof f!="undefined"&&!g.getAttribute(e)){g.setAttribute(e,f.toString());
return true;
}},acceptNodeChanges:function(f,e){var g=this;
g._cleanUpCommandAttributes(f);
b.InsertListTracker.callBaseMethod(g,"acceptNodeChanges",[f,e]);
},_removeAttribute:function(f,e){if(f.getAttribute(e)){f.removeAttribute(e);
}},rejectNodeChanges:function(g,e){var h=g.getAttribute("originalnodename")||g.getAttribute("listnodename"),i=this;
if(g.getAttribute("isemptylist")){return i._rejectEmptyList(g);
}if(d.isList(g)){if(h){var f=g;
i._removeAttribute(f,"originalnodename");
i._removeAttribute(f,"listnodename");
c.removeNodeTracking(f);
f=d.replaceNode(f,h);
f=i._mergeNearLists(f);
i._cleanUpCommandAttributes(f);
}else{return i._rejectInsertedList(g,h);
}}else{return i._rejectRemovedList(g,e,h);
}i._cleanUpCommandAttributes(g);
},_rejectEmptyList:function(e){var f=this;
a(e).children().each(function(g,h){if(d.isNodeEmptyRecursive(h)){d.removeNode(h);
}else{var i=d.replaceNode(h,"p");
f._cleanUpCommandAttributes(i);
}});
if(d.isNodeEmptyRecursive(e)){d.removeNode(e);
}this.ignoreRangeSelect=true;
},_rejectInsertedList:function(f){var e=a(f);
e.children().each(function(g,i){var k=i.getAttribute("originalnodename"),h=i.getAttribute("iswrapper");
if(k){i.removeAttribute("originalnodename");
}var j=d.replaceNode(i,k||"P");
f.parentNode.insertBefore(j,f);
if(h){d.removeNode(j);
}});
e.remove();
},_rejectRemovedList:function(j,g,k){var i=k||(g=="InsertOrderedList"?"ol":"ul"),l=this,f=new b.InsertListCmd(l._editor,{title:g,listType:i}),e=c.getSameTrackingSiblings(j),h;
e.each(function(n,m){c.removeNodeTracking(m);
f.executeOnNode(m);
h=f.insertedList;
});
if(h){h=l._mergeNearLists(h);
l._cleanUpCommandAttributes(h);
}},_cleanUpCommandAttributes:function(f){var h=this;
var e=["itemindex","itemscount","listnodename","originalnodename","iswrapper","isemptylist"];
var g=function(k){for(var j=0;
j<e.length;
j++){h._removeAttribute(k,e[j]);
}};
if(d.isList(f)){a(f).children().each(function(i,j){g(j);
});
}g(f);
},_mergeNearLists:function(l){var f=a(l);
var e=f.children();
var m=e.length;
var r;
var p;
var s=this;
if(!m){return l;
}var i=e[0];
var j=i.getAttribute("itemindex"),k=i.getAttribute("itemscount");
var n=i.getAttribute("listnodename")||l.nodeName;
if(j){j=parseInt(j,10);
}if(k){k=parseInt(k,10);
}if(k==m){return l;
}if(j>0){var h=f.prev();
var q=h[0];
if(d.isList(q)&&q.nodeName==n){r=q;
m+=h.children().length;
}}if(k>m){var g=f.next();
var o=g[0];
if(d.isList(o)&&o.nodeName==n){p=o;
}}if(r){l=s._mergeLists(r,l);
}if(p){l=s._mergeLists(l,p);
}return l;
},_mergeLists:function(f,g){var e=a(g);
e.children().each(function(h,i){f.appendChild(i);
});
e.remove();
return f;
}};
b.InsertListTracker.registerClass("Telerik.Web.UI.Editor.InsertListTracker",Telerik.Web.UI.Editor.BaseCommandsTracker);
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils,Telerik.Web.UI.Editor.TrackChangesUtils);
(function(a,b,f,e){Type.registerNamespace("Telerik.Web.UI.Editor");
var d=/^insert(un)?orderedList/i;
var c=Function.createDelegate;
b.OutdentTracker=function(g){b.OutdentTracker.initializeBase(this,[g]);
this.stateAttrName="trackingstate";
};
b.OutdentTracker.prototype={trackNodeFormatting:function(i,h){var l=this,k=i.node,g=l.author,n=l.userCssId,m=l.timestamp;
if(d.test(l._innerCommand||"")){var j=new b.InsertListTracker(l._editor);
j._innerCommand=l._innerCommand;
j.timestamp=l.timestamp;
return j.trackNodeFormatting(i,h);
}if(!i||(!i.parentNode&&!i.previousSibling&&!i.nextSibling)){b.OutdentTracker.callBaseMethod(l,"trackNodeFormatting",[i,h]);
return;
}if(f.isList(k)&&!a(k).children().length){return;
}if(l.isListItem){if(l.isTracked&&e.getTrackChangesCommand(k)=="Indent"){e.removeNodeTracking(k);
return;
}e.setTrackChangesAttributes(k,h,g,n,m);
return;
}e.setTrackChangesAttributes(k,h,g,n,m);
},rejectNodeChanges:function(j,g){var k=this;
if(d.test(j.getAttribute("innercommand")||"")){var h=new b.InsertListTracker(k._editor);
return h.rejectNodeChanges(j,j.getAttribute("innercommand"));
}if(j.getAttribute("iswrapper")){b.OutdentTracker.callBaseMethod(k,"rejectNodeChanges",[j]);
return;
}var i=f.isTag(j,"li");
if(!i){return k.restoreNode(j);
}k._executeOppositeCommand(j,g);
},_executeOppositeCommand:function(i,g){var j=parseInt(i.getAttribute("timestamp"),10);
b.OutdentTracker.callBaseMethod(this,"_executeOppositeCommand",[i,g]);
var h=f.isTag(i,"li");
if(!h){return this.restoreNode(i);
}this._rejectOutdentedList(i,g,j);
},collectSameTrackNodes:function(h){if(h.getAttribute("previousoutdent")){var g=this._editor.get_contentArea();
return e.getSameTrackNodes(g,h).get();
}else{return e.getSameTrackingSiblings(h).get();
}},_runOppositeCommandOnNodes:function(h){var g=new b.IndentCommand(this._editor,{title:"Indent"});
Array.forEach(h,c(g,g.executeOnNode));
},_rejectOutdentedList:function(k,h,p){var g=this;
var j=this._editor;
var i=j.get_contentArea();
var m=k.getAttribute("previousoutdent");
if(!m){return;
}m=m.toString();
var n=this._getLastTimestamp(m.split(","));
this._updateCommandAttributes(k,m);
var o=String.format("[previousoutdent$={0}]",n);
var l=a(i).find(o);
l.each(function(){g._updateCommandAttributes(this,this.getAttribute("previousoutdent"));
});
this._executeOppositeCommand(k,"Outdent");
},_getElementByAttribute:function(g,h,i){return g.filter(function(){var j=this.getAttribute(h);
return RegExp(i,"").test(j);
})[0];
},_updateCommandAttributes:function(g,i){i=i.toString();
var k=i.split(",");
var j=this._getLastTimestamp(k);
if(!j||!/^[0-9]{13}$/.test(j)){return;
}g.setAttribute("timestamp",j);
e.setTrackChangesCommand(g,"Outdent");
Array.remove(k,j);
var h=k.join(",");
if(h){g.setAttribute("previousoutdent",h);
}else{g.removeAttribute("previousoutdent");
}},_getLastTimestamp:function(k){if(!k||!k.length){return null;
}var j=parseInt(k[0],10);
for(var h=0;
h<k.length;
h++){var g=parseInt(k[h],10);
j=Math.max(j,g);
}return j.toString();
}};
b.OutdentTracker.registerClass("Telerik.Web.UI.Editor.OutdentTracker",b.IndentationTracker);
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils,Telerik.Web.UI.Editor.TrackChangesUtils);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(a){a.TrackerFactory={getCommandTracker:function(b,c){if(/align|justify/i.test(b)){return new a.AlignCommandTracker(c);
}else{if(/LinkManager|InsertLink/i.test(b)){return new a.InsertLinkTracker(c);
}}switch(b){case"Bold":case"Italic":case"Underline":case"Subscript":case"Superscript":case"StrikeThrough":return new a.InlineCommandTracker(c);
case"Indent":case"Outdent":return new a[b+"Tracker"](c);
case"InsertOrderedList":case"InsertUnorderedList":return new a.InsertListTracker(c);
default:return null;
}}};
})(Telerik.Web.UI.Editor);
