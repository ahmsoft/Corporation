Type.registerNamespace("Telerik.Web.UI");
Telerik.Web.UI.LightDialogsControllerClass=function(){this._activeDialog=null;
};
Telerik.Web.UI.LightDialogsControllerClass.initializeLightDialog=function(b){var a=b.ClientParameters._commandName;
var d=b.ClientParameters.editor;
var c=null;
if(a=="InsertLink"){c=d._insertLink;
if(!c){c=new Telerik.Web.UI.InsertLink(b);
b.set_title(d._localization[a.toLowerCase()]);
c.initialize();
d._insertLink=c;
}}if(a=="InsertImage"){c=d._insertImage;
if(!c){c=new Telerik.Web.UI.InsertImage(b);
b.set_title(d._localization[a.toLowerCase()]);
c.initialize();
d._insertImage=c;
}}if(a=="InsertTableLight"){c=d._insertTableLight;
if(!c){c=new Telerik.Web.UI.InsertTableLight(b);
b.set_title(d._localization.inserttable);
c.initialize();
d._insertTableLight=c;
}}Telerik.Web.UI.LightDialogsController._activeDialog=c;
c.set_clientParameters(b.ClientParameters);
c.cleanInputBoxes();
c.setInitialValues();
if(window.focus){window.focus();
}};
Telerik.Web.UI.LightDialogsControllerClass.registerClass("Telerik.Web.UI.LightDialogsControllerClass",null);
if(!Telerik.Web.UI.LightDialogsController){Telerik.Web.UI.LightDialogsController=new Telerik.Web.UI.LightDialogsControllerClass();
}Telerik.Web.UI.LightDialogBase=function(a){this._clientParameters=a.ClientParameters;
this._container=a;
this._editor=this._clientParameters.editor;
this._document=this._editor.get_document();
this._prefix=this._editor.get_id();
if(this._editor.get_toolProviderID()){this._prefix=this._editor.get_toolProviderID();
}this._insertButton=null;
this._cancelButton=null;
this._allPropButton=null;
this._inputsArray=null;
};
Telerik.Web.UI.LightDialogBase.prototype={initializeChildEvents:function(b,a){this._insertClickHandler=b;
if(this._allPropButton){$addHandlers(this._allPropButton,{click:a},this);
}if(this._insertButton){$addHandlers(this._insertButton,{click:b},this);
}if(this._cancelButton){$addHandlers(this._cancelButton,{click:this._cancelClickHandler},this);
}},set_clientParameters:function(a){this._clientParameters=a;
},cleanInputBoxes:function(){var b=this._inputsArray;
if(b){for(var a=0;
a<b.length;
a++){var c=b[a][0];
if(this[c]&&this[c].tagName.toLowerCase()=="input"){this[c].value="";
}}}},setUpChildren:function(e){var b=this._inputsArray;
var c=this._prefix;
if(b){for(var a=0;
a<b.length;
a++){var d=b[a][0];
this[d]=$get(c+b[a][1],e);
}}},createElement:function(a){return this._document.createElement(a);
},dispose:function(){if(this._insertButton){$clearHandlers(this._insertButton);
}this._insertButton=null;
if(this._cancelButton){$clearHandlers(this._cancelButton);
}this._cancelButton=null;
if(this._allPropButton){$clearHandlers(this._allPropButton);
}this._allPropButton=null;
this._insertClickHandler=null;
},_cancelClickHandler:function(a){this._container.close();
}};
Telerik.Web.UI.LightDialogBase.registerClass("Telerik.Web.UI.LightDialogBase",null);
Telerik.Web.UI.InsertLink=function(a){Telerik.Web.UI.InsertLink.initializeBase(this,[a]);
this._linkUrlInput=null;
this._linkTextInput=null;
this._linkTargetCombo=null;
this._texTextBoxParentNode=null;
};
Telerik.Web.UI.InsertLink.prototype={initialize:function(){var a=$get(this._prefix+"_InsertLink");
if(!a){return;
}this._container.set_contentElement(a);
this._inputsArray=new Array(["_linkUrlInput","_LinkUrl"],["_linkTextInput","_LinkText"],["_linkTargetCombo","_LinkTargetCombo"],["_insertButton","_lmlInsertBtn"],["_cancelButton","_lmlCancelBtn"],["_allPropButton","_lmlAllProperties"],["_texTextBoxParentNode","_texTextBoxParentNode"]);
this.setUpChildren(a);
this.initializeChildEvents();
},dispose:function(){$clearHandlers(this._linkTargetCombo);
this._linkTargetCombo=null;
Telerik.Web.UI.InsertLink.callBaseMethod(this,"dispose");
},initializeChildEvents:function(){Telerik.Web.UI.InsertLink.callBaseMethod(this,"initializeChildEvents",[this._insertClickHandler,this._allPropertiesClickHandler]);
$addHandlers(this._linkTargetCombo,{change:this._linkTargetChangeHandler},this);
},cleanInputBoxes:function(){if(this._linkTargetCombo.options&&this._linkTargetCombo.options.length>0){this._linkTargetCombo.options[0].selected=true;
}Telerik.Web.UI.InsertLink.callBaseMethod(this,"cleanInputBoxes",[this._inputsArray]);
},_loadLinkProperties:function(){var b=this._clientParameters.get_value();
var a=b.getAttribute("href",2);
var c="http://";
if(b.href){c=a;
}this._linkUrlInput.value=c;
if(this._clientParameters.showText){this._linkTextInput.value=b.innerHTML;
if(this._texTextBoxParentNode){this._texTextBoxParentNode.style.display="";
}}else{if(this._texTextBoxParentNode){this._texTextBoxParentNode.style.display="none";
}}this._loadLinkTarget();
},_loadLinkTarget:function(){var d=this._clientParameters.get_value().target;
if(!d){return;
}var e=this._linkTargetCombo.getElementsByTagName("optgroup");
for(var b=0;
b<e.length;
b++){if(e[b].nodeName.toLowerCase()=="optgroup"){var f=e[b].getElementsByTagName("option");
for(var c=0;
c<f.length;
c++){if(f[c].nodeName.toLowerCase()=="option"&&f[c].value.toLowerCase()==d.toLowerCase()){f[c].selected=true;
return;
}}}}var a=this.createElement("option");
a.value=d;
a.text=d;
this._linkTargetCombo.options.add(a);
a.selected=true;
},setInitialValues:function(){this._loadLinkProperties();
this._loadLinkTarget();
},getModifiedLink:function(){var a=this._clientParameters.get_value();
a.href=this._linkUrlInput.value;
if(this._linkTargetCombo.value=="_none"){a.removeAttribute("target",0);
}else{a.target=this._linkTargetCombo.value;
}if(this._texTextBoxParentNode&&this._texTextBoxParentNode.style.display!="none"&&this._linkText){a.innerHTML=this._linkText.value;
}if(a.innerHTML.trim()==""||a.innerHTML.trim().length<this._linkTextInput.value.trim().length){a.innerHTML=this._linkTextInput.value.replace(/&/gi,"&amp;").replace(/</gi,"&lt;").replace(/>/gi,"&gt;");
}if(a.innerHTML.trim()==""){a.innerHTML=a.href;
}return a;
},_linkTargetChangeHandler:function(a){if(this._linkTargetCombo.value=="_custom"){var d="Type Custom Target Here";
var c=window.prompt(d,"CustomWindow");
if(c){var b=this.createElement("option");
b.innerHTML=c;
b.setAttribute("selected","selected");
b.setAttribute("value",c);
this._linkTargetCombo.getElementsByTagName("optgroup")[1].appendChild(b);
return;
}this._linkTargetCombo.selectedIndex=0;
}},_insertClickHandler:function(b){var c=this.getModifiedLink();
var a=new Telerik.Web.UI.EditorCommandEventArgs("InsertLink",null,c);
a.realLink=c;
this._container.close(a);
},_allPropertiesClickHandler:function(c){var f=this.getModifiedLink();
var a=new Telerik.Web.UI.EditorCommandEventArgs("LinkManager",null,f);
a.realLink=f;
a.set_value(f);
this._container.close();
a.selectedTabIndex=0;
a.showText=this._linkTextInput.value!="";
a.documentAnchors=Telerik.Web.UI.Editor.CommandList._getDocumentAnchors(this._editor.get_document());
if(f.name){a.documentAnchors[a.documentAnchors.length]=f;
}Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"A",this._editor,"LinkManager");
var d=this._editor;
var b=function(h,e){var g=e.get_value();
if(!g){g=e.Result;
}if(!g){g=e.realLink;
}d.pasteHyperLink(g,"LinkManager");
};
d.showDialog("LinkManager",a,b);
}};
Telerik.Web.UI.InsertLink.registerClass("Telerik.Web.UI.InsertLink",Telerik.Web.UI.LightDialogBase);
Telerik.Web.UI.InsertImage=function(a){Telerik.Web.UI.InsertImage.initializeBase(this,[a]);
this._imageWidth=null;
this._imageHeight=null;
this._imageAlt=null;
this._imageSrc=null;
this._originalImage=null;
};
Telerik.Web.UI.InsertImage.prototype={initialize:function(){var a=$get(this._prefix+"_InsertImage");
if(!a){return;
}this._container.set_contentElement(a);
this._inputsArray=new Array(["_imageWidth","_ImageWidth"],["_imageHeight","_ImageHeight"],["_imageAlt","_ImageAlt"],["_imageSrc","_ImageSrc"],["_insertButton","_iplInsertBtn"],["_cancelButton","_iplCancelBtn"],["_allPropButton","_iplAllProperties"]);
this.setUpChildren(a);
this.initializeChildEvents(this._insertClickHandler,this._allPropertiesClickHandler);
},_insertClickHandler:function(b){if(!this._originalImage&&this._imageSrc.value){this._originalImage=this.createElement("img");
}var c=this.getModifiedImage();
if(c){this._clearImgeDimensions(c);
var a=new Telerik.Web.UI.EditorCommandEventArgs("InsertImage",null,c);
this._container.close(a);
}else{$telerik.cancelRawEvent(b);
}},_allPropertiesClickHandler:function(f){var g=this._editor;
var c="SetImageProperties";
if(!this._originalImage&&this._imageSrc.value){this._originalImage=this.createElement("img");
}var d=this.getModifiedImage();
var a=new Telerik.Web.UI.EditorCommandEventArgs("SetImageProperties",null,d);
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"IMG",g,c);
a.Element=d;
a.set_value(d);
this._container.close();
var b=function(i,e){var h=e.get_value?e.get_value():e.Result;
if(!h){return;
}if(d&&d.parentNode){d.parentNode.replaceChild(h,d);
}else{g.pasteHtml(Telerik.Web.UI.Editor.Utils.getOuterHtml(h),c);
}};
g.showDialog("ImageProperties",a,b);
},getModifiedImage:function(){if(this._originalImage==null){return null;
}var a=this._originalImage.cloneNode(true);
var b=this._imageSrcValue?this._imageSrcValue:this._imageSrc.value;
this._setAttribute(a,"src",b);
this._setDimensionAttribute(a,"width",this._imageWidth.value);
this._setDimensionAttribute(a,"height",this._imageHeight.value);
this._setAttribute(a,"alt",this._imageAlt.value);
return a;
},loadImageProperties:function(f){var e=this._originalImage=f;
var b=e.cloneNode(true);
var g=this._getOriginalDimension(e,"width",e.width,e.offsetWidth);
this._imageWidth.value=(g.indexOf("px")!=-1)?parseInt(g,10):g;
var d=this._getOriginalDimension(e,"height",e.height,e.offsetHeight);
this._imageHeight.value=(d.indexOf("px")!=-1)?parseInt(d,10):d;
this._ratio=parseInt(this._imageWidth.value,10)/parseInt(this._imageHeight.value,10);
var c=b.getAttribute("src",2);
if(this._imageSrc){this._imageSrc.value=c;
this._imageSrcValue=null;
}else{this._imageSrcValue=c;
}var a=b.getAttribute("alt");
this._imageAlt.value=a?a:"";
},setInitialValues:function(){var a=this._clientParameters;
if(!a.get_value){return;
}var b=a.get_value();
if(b){this.loadImageProperties(b);
}},cleanInputBoxes:function(){this._originalImage=null;
this._imageSrcValue=null;
Telerik.Web.UI.InsertImage.callBaseMethod(this,"cleanInputBoxes",[this._inputsArray]);
},_getOriginalDimension:function(a,b,d,c){if(!a){return"";
}var e;
if(a.style[b]){e=a.style[b];
}if(!e){e=a.getAttribute(b);
}if(!e){e=d;
}if(!e){e=c;
}return e==null?"":e+"";
},_getImageOriginalSize:function(a){var c=new Image();
c.src=a.getAttribute?a.getAttribute("src"):a.src;
var b={width:c.width,height:c.height};
return b;
},_setAttribute:function(c,a,b){if(b&&b.trim()){c.setAttribute(a,b);
}else{c.removeAttribute(a,false);
}},_setDimensionAttribute:function(c,a,d){if(!parseInt(d,10)){d="";
}c.removeAttribute(a);
if(!d){if(c.style.removeAttribute){c.style.removeAttribute(a,false);
}else{c.style[a]="";
}}else{var e=$telerik.parseUnit(d);
try{c.style[a]=e.size+e.type;
}catch(b){}}},_clearImgeDimensions:function(a){var e=this._getImageOriginalSize(a);
var f=e.width;
var c=this._getOriginalDimension(a,"width",a.width,a.offsetWidth);
if(c.indexOf("px")!=-1){c=parseInt(c,10);
}var d=e.height;
var b=this._getOriginalDimension(a,"height",a.height,a.offsetHeight);
if(b.indexOf("px")!=-1){b=parseInt(b,10);
}if((f==c&&(b==0||d==b))||(d==b&&(c==0||f==c))){a.style.width="";
a.style.height="";
}}};
Telerik.Web.UI.InsertImage.registerClass("Telerik.Web.UI.InsertImage",Telerik.Web.UI.LightDialogBase);
Telerik.Web.UI.InsertTableLight=function(a){Telerik.Web.UI.InsertTableLight.initializeBase(this,[a]);
this._alignmentSelectorTable=null;
this._rowsCount=null;
this._colsCount=null;
this._cellSpacing=null;
this._cellPadding=null;
this._borderWidth=null;
this._tableToModify=null;
this._originalRowsCount=null;
this._originalColsCount=null;
};
Telerik.Web.UI.InsertTableLight.prototype={initialize:function(){var a=$get(this._prefix+"_InsertTableLight");
if(!a){return;
}this._container.set_contentElement(a);
this._alignmentSelectorTable=this.createAlignmentSelector();
this._inputsArray=new Array(["_rowsCount","_Rows"],["_colsCount","_Columns"],["_cellSpacing","_CellSpacing"],["_cellPadding","_CellPadding"],["_borderWidth","_BorderWidth"],["_insertButton","_itlInsertBtn"],["_cancelButton","_itlCancelBtn"],["_allPropButton","_itlAllProperties"]);
this.setUpChildren(a);
this.initializeChildEvents(this._insertClickHandler,this._allPropertiesClickHandler);
},dispose:function(){this._tableToModify=null;
this._originalRowsCount=null;
this._originalColsCount=null;
this._alignmentSelectorTable.dispose();
},createAlignmentSelector:function(){var a=this._prefix+"_AlignmentSelectorTable";
var b=$find(a);
if(b==null){var c=$get(a);
Sys.UI.DomElement.addCssClass(c.parentNode,this._editor.get_skin());
b=$create(Telerik.Web.UI.Editor.AlignmentSelector,{addClickHandler:true,clientStateFieldID:a+"_ClientState",name:a,skin:this._editor.get_skin()},null,null,c);
b.setTagName("TABLE");
}return b;
},_insertClickHandler:function(a){var b=this.getModifiedTable(this._tableToModify);
if(!b){this._container.close();
}else{this._container.close({tableToModify:b});
}},_allPropertiesClickHandler:function(d){var a=this._clientParameters;
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"TABLE",this._editor,"SetTableProperties");
var g=this.getModifiedTable(this._tableToModify);
if(!g){g=this._tableToModify=this.createElement("table");
this._originalRowsCount=0;
this._originalColsCount=0;
var f=parseInt(this._rowsCount.value,10);
var c=parseInt(this._colsCount.value,10);
if(isNaN(f)||f<=0){this.addRowsCols(g,0,2,true);
this._originalRowsCount=2;
}if(isNaN(c)||c<=0){this.addRowsCols(g,0,2,false);
this._originalColsCount=2;
}g=this.getModifiedTable(g);
}a.tableToModify=g;
var b=this._container.get_clientCallBackFunction();
a._name=a._commandName="SetTableProperties";
a.selectedTabIndex=1;
a.originalTable=g;
this._editor.showDialog("TableWizard",a,b);
this._container.close();
return false;
},cleanInputBoxes:function(){this._alignmentSelectorTable.updateValue("none");
Telerik.Web.UI.InsertTableLight.callBaseMethod(this,"cleanInputBoxes",[this._inputsArray]);
},setInitialValues:function(){this.loadTableProperties();
},_getRowColSpan:function(b,a){if(b){var c=parseInt(b.getAttribute(a),10);
if(isNaN(c)){c=1;
}return c;
}return 0;
},loadTableProperties:function(){var l=this._tableToModify=this._clientParameters.tableToModify;
if(l){var k=l.rows;
var h=k.length;
var d=0;
for(var e=0;
e<h;
e++){var g=0;
var b=k[e].cells;
var c=b.length;
for(var f=0;
f<c;
f++){g+=this._getRowColSpan(b[f],"colSpan");
}if(d<g){d=g;
}}this._rowsCount.value=this._originalRowsCount=h;
this._colsCount.value=this._originalColsCount=d;
this._cellSpacing.value=l.cellSpacing;
this._cellPadding.value=l.cellPadding;
this._alignmentSelectorTable.updateValue(l.align);
var a=parseInt(l.border,10);
this._borderWidth.value=isNaN(a)?"":a;
}},set_clientParameters:function(a){this._clientParameters=a;
},getModifiedTable:function(h){var g=parseInt(this._rowsCount.value,10);
var a=parseInt(this._colsCount.value,10);
if(!h&&!(isNaN(g)||isNaN(a))){h=this.createElement("table");
this._originalRowsCount=0;
this._originalColsCount=0;
}if(!h){return;
}var e=this._originalRowsCount;
var d=this._originalColsCount;
if(g>0&&g!=e){g>e?this.addRowsCols(h,e,g,true):this.removeRowsCols(h,e,g,true);
}if(a>0&&a!=d){a>d?this.addRowsCols(h,d,a,false):this.removeRowsCols(h,d,a,false);
}this._setAttribValue(h,"align",this._alignmentSelectorTable.getAlign());
var f=parseInt(this._cellSpacing.value,10);
if(!isNaN(parseInt(f,10))){this._setAttribValue(h,"cellSpacing",f>=0?f:"",(f>=0));
}var c=parseInt(this._cellPadding.value,10);
if(!isNaN(parseInt(c,10))){this._setAttribValue(h,"cellPadding",c>=0?c:"",(c>=0));
}var b=parseInt(this._borderWidth.value,10);
if(!isNaN(parseInt(b,10))){this._setAttribValue(h,"border",b>=0?b:"",(b>=0));
}return h;
},addRowsCols:function(d,b,c,e){for(var a=b;
a<c;
a++){if(e){this.addNewRow(d);
}else{this.addNewCol(d);
}}},removeRowsCols:function(d,b,c,e){for(var a=c;
a<b;
a++){if(e){this.deleteLastRow(d);
}else{this.deleteLastCol(d);
}}},addNewRow:function(e){var d=e.insertRow(-1);
var b=this._originalColsCount;
for(var c=0;
c<b;
c++){var a=d.insertCell(-1);
a.innerHTML="&nbsp;";
}},deleteLastRow:function(a){a.deleteRow(-1);
},addNewCol:function(d){var c=d.rows;
for(var b=0;
b<c.length;
b++){var a=c[b].insertCell(-1);
a.innerHTML="&nbsp;";
}},deleteLastCol:function(c){var b=c.rows;
for(var a=0;
a<b.length;
a++){b[a].deleteCell(-1);
}},_setAttribValue:function(d,a,c,b){if(c||(true==b)){d.setAttribute(a,c);
}else{d.removeAttribute(a,false);
}}};
Telerik.Web.UI.InsertTableLight.registerClass("Telerik.Web.UI.InsertTableLight",Telerik.Web.UI.LightDialogBase);
