$telerik.findAsyncUpload=$find;
$telerik.toAsyncUpload=function(a){return a;
};
(function(){var a=$telerik.$,b=Telerik.Web.UI,d={Disabled:0,Automatic:1},e={BelowFileInput:0,AboveFileInput:1},c="IE10 browser does not support upload of 0 bytes size file";
Type.registerNamespace("Telerik.Web.UI");
b.RadAsyncUpload=function(f){b.RadAsyncUpload.initializeBase(this,[f]);
this._pageGUID=null;
this._height="";
this._skin="";
this._maxFileSize=0;
this._chunkSize=2097152;
this._allowedFileExtensions=[];
this._serializedConfiguration="";
this._serializedConfigurationType="";
this._uploadedFiles=[];
this._isManagerRegistered=null;
this._autoAddFileInputs=true;
this._multipleFileSelection=d.Disabled;
this._flashModuleUrl="";
this._silverlightModuleUrl="";
this._enableInlineProgress=true;
this._selectedFilesCount=0;
this._currentIndex=-1;
this._additionalFieldIndex=-1;
this._enabled=true;
this._handlerUrl="";
this._progressHandlerUrl="";
this._progressAreaUpdater=null;
this._fileFilter=null;
this._isFileUploaded=false;
this._uploadedFilesRendering=e.AboveFileInput;
this._accessKey="";
this._isInitializing=false;
this._manualUpload=false;
this._disableChunkUpload=false;
this._dropZones=[];
this._hideFileInput=false;
this._tabIndex=0;
this._isPaused=false;
this._disablePlugins=false;
};
b.RadAsyncUpload.prototype={initialize:function(){var l=this,g=l.get_element(),f=a(g);
Telerik.Web.UI.RadAsyncUpload.Statics.extendViewWith(this);
if(this._disablePlugins){this._disableAllPlugins();
}this._initializeUploadModule();
this._initializeProgressTracker();
if(this._getIsRightToLeft()){this._applyRightToLeft();
}this._renderList();
var j=this.get_multipleFileSelectionEnabled()==false?this.get_initialFileInputsCount():1;
this._initializeClientState();
if(this._uploadedFiles.length>this._maxFileCount){throw"MaxFileInputsCount property is less than count of the already uploaded files";
}if(this._uploadedFiles.length!=this._maxFileCount){for(var h=0;
h<j;
h++){this.addFileInput();
}}if($telerik.isIE){f.on("keypress",".ruFakeInput",function(i){i.stopPropagation();
i.preventDefault();
});
}b.RadAsyncUpload.callBaseMethod(this,"initialize");
var k=this;
f.on("click",".ruRemove",function(i){k._deleteFileInput(i.target.parentNode,false);
});
f.on("click",".ruCancel",function(i){k._cancelUpload(i.target.parentNode);
if(!k.get_isUploading()&&k._isPaused){k._resumeFileBrowsing();
}});
this._uploadModule.on({FileSelected:this._onFileSelected,FileDropped:this._onFileDropped,FilesSelected:this._onFilesSelected,FileUploading:this._onFileUploading,FileUploadFail:this._onFileUploadFail,FileValidationFail:this._onFileValidationFail,FileUploaded:this._onFileUploaded,FilesUploaded:this._onFilesUploadFinished,ProgressUpdating:this._onProgressUpdating},this);
this._initializeKeyboardSupport();
this._isInitializing=false;
},_onFocus:function(){var g=a(this._element).find(".ruFileInput");
var f=g[g.length-1];
if(f){f.focus();
}},_initializeClientState:function(){var f=this.get_clientState();
if(f!=null&&f!==""){this._marshalUploadedFiles(f);
}},_initializeProgressTracker:function(){if(this._progressAreaUpdater==null){this._progressAreaUpdater=new b.RadAsyncUpload.ProgressAreaUpdater();
}if(this._enableInlineProgress===true){this._inlineProgressUpdater=new b.RadAsyncUpload.InlineProgress();
}},_disableAllPlugins:function(){var g=["Flash","Silverlight"];
for(var f=0;
f<g.length;
f++){Telerik.Web.UI.RadAsyncUpload.Modules[g[f]].isAvailable=function(){return false;
};
}},_initializeUploadModule:function(){var f=navigator.userAgent.search(/Mac OS X/i)>0;
if(b.RadAsyncUpload.Modules.FileApi.isAvailable()){this._uploadModule=new b.RadAsyncUpload.Modules.FileApi(this);
}else{if(b.RadAsyncUpload.Modules.Silverlight.isAvailable()&&!$telerik.isOpera&&!f){this._uploadModule=new b.RadAsyncUpload.Modules.Silverlight(this);
}else{if(b.RadAsyncUpload.Modules.Flash.isAvailable()&&!f&&!$telerik.isIE9Mode&&!$telerik.isOpera){this._uploadModule=new b.RadAsyncUpload.Modules.Flash(this);
}else{this._uploadModule=new b.RadAsyncUpload.Modules.IFrame(this,this._pageGUID);
}}}},dispose:function(){a(document).off("keydown."+this.get_id());
Telerik.Web.UI.RadAsyncUpload.callBaseMethod(this,"dispose");
a(this.get_element()).off();
this._uploadModule.dispose();
},_pauseFileBrowsing:function(){var f=a(this._element);
f.addClass("ruPaused").find(".ruFileInput").attr("disabled","disabled");
this._isPaused=true;
},_resumeFileBrowsing:function(){var f=a(this._element);
f.find(".ruFileInput").removeAttr("disabled");
f.removeClass("ruPaused");
this._isPaused=false;
},addFileInput:function(){var f=this._createStyledRow();
this._isInitializing=true;
this._appendStyledRow(f);
this._setHoverStateOnBrowseButton(f);
this._uploadModule.fileInputAdded(f.children("span"));
a.raiseControlEvent(this,"added",{row:f[0],index:f.index()});
this.get_enabled()?this._enable():this._disable();
},saveClientState:function(){return"{'isEnabled':'"+this.get_enabled()+"','uploadedFiles':"+Sys.Serialization.JavaScriptSerializer.serialize(this._uploadedFiles)+"}";
},deleteFileInputAt:function(f,h){var g=a(a("li",this.get_element())[f]);
this._deleteFileInput(g,h,true);
},deleteAllFileInputs:function(){var f=this._selectedFilesCount,g=0;
if(this._uploadedFilesRendering==e.BelowFileInput&&this.get_maxFileCount()!=1){g=1;
}for(var h=0;
h<f;
h++){this.deleteFileInputAt(g);
}},isExtensionValid:function(f){if(f==""){return true;
}return this._verifyExtension(f);
},startUpload:function(){if(this._isManualUpload()){this._uploadModule._startUploadManually();
}},pauseUpload:function(){if(this._isUploading()){this._pauseFileBrowsing();
}},resumeUpload:function(){if(this._uploadModule.resume&&this._isPaused){this._isPaused=false;
this._uploadModule.resume();
this._resumeFileBrowsing();
}},_renderList:function(){var f=a("<ul></ul>").addClass("ruInputs").attr("id",this.get_id()+"ListContainer").css("height",this._height);
a(this.get_element()).append(f);
},_shouldAddNewInputOnDelete:function(){var f=a("li",this.get_element()).size();
if(f==0){return true;
}var g;
if(this.get_loadedModuleName()=="IFrame"||this.get_loadedModuleName()=="File API"){g="li .ruFileInput";
}else{g="li object";
}if(this._isManualUpload()){if(this.get_maxFileCount()-1==this._selectedFilesCount){return true;
}else{return false;
}}else{return(a(g,this.get_element()).length===0);
}},_cancelUpload:function(f){this._updateRowImage(f,"cancel");
this._updateCancelButton(f);
a(".ruFileProgressWrap",f).remove();
this._uploadModule.cancel(f);
},_createInput:function(g,f,h,j){var i=this.get_localization();
var k=i[g];
return a("<input>").attr({type:h,tabindex:j,value:k,"class":f})[0];
},_createLabel:function(g){var f=a("<label>").html("label").attr({"for":g,style:"display:none"}).get(0);
return f;
},_appendStyledRow:function(f){this._currentIndex++;
if(!!this._uploadedFilesRendering){a(".ruInputs",this.get_element()).append(f);
}else{a(".ruInputs",this.get_element()).prepend(f);
}this._appendFakeInput(f.children("span")[0]);
return f;
},_markForDeletion:function(f){a(f).addClass("ruFileRemoved");
a(".ruUploadProgress, .ruRemove",f).css("display","none");
},_addUploadedFile:function(f,g){this._additionalFieldIndex++;
g.fileInfo.Index=this._additionalFieldIndex;
this._updateRowImage(f,"success");
a(f).data("fileInfo",g);
this._uploadedFiles.push(g);
this.updateClientState();
},_getProgressUrl:function(){return this._progressHandlerUrl;
},_getFileName:function(g){if($telerik.isIE||$telerik.isChrome||$telerik.isOpera){var f=g.lastIndexOf("\\");
if(f){g=g.substring(f+1);
}}return g;
},_getIsRightToLeft:function(){return a(this.get_element()).css("direction")==="rtl";
},_applyRightToLeft:function(){var f=this.get_element();
if(/RadUpload_rtl/.test(f.className)){return;
}$telerik.addCssClasses(f,["RadUpload_rtl",String.format("RadUpload_{0}_rtl",this._skin)]);
},_verifyExtension:function(g){if(this._allowedFileExtensions.length==0){return true;
}var h=g.lastIndexOf(".");
if(h==-1){return false;
}var f=g.substr(h+1),i=false,j=this;
a.each(this._allowedFileExtensions,function(l,m){var k=j._trimExtensionDot(m);
if(f.toLowerCase()==k.toLowerCase().trim()){i=true;
return false;
}});
return i;
},_trimExtensionDot:function(f){var g=f.indexOf(".");
if(g>-1){f=f.substr(g+1);
}return f;
},_isManualUpload:function(){var f=this._uploadModule.getName();
if(this._manualUpload&&(f=="File API"||f=="IFrame")){return true;
}else{return false;
}},getID:function(f){return this.get_id()+f+this._currentIndex;
},getAdditionalFieldID:function(f){return this.get_id()+f+this._additionalFieldIndex;
},_getPostData:function(){return[this._serializedConfiguration,this._serializedConfigurationType].join("&");
},_getIsAreaRegistered:function(){return !!Telerik.Web.UI.ProgressAreas;
},_marshalUpload:function(g,f,h){if(this._autoAddFileInputs&&h!==false){this.addFileInput();
}this._updateRowContent(g,f);
this._appendCancelButton(g);
},_startUpdating:function(){if(this._getIsAreaRegistered()&&!this._progressAreaUpdater.isUpdating()){this._progressAreaUpdater.startUpdating();
}},_stopUpdating:function(){if(this._getIsAreaRegistered()){this._progressAreaUpdater.stopUpdating();
}},_onFileUploadRemoving:function(h,k,j){var i=h!=undefined?h.fileInfo:null;
var f={fileInfo:i,fileName:i!=null?i.FileName:"",rowIndex:j,row:k};
var g=a.raiseCancellableControlEvent(this,"fileUploadRemoving",f);
if(g){return true;
}},_onFileUploadRemoved:function(f){a.raiseControlEvent(this,"fileUploadRemoved",{fileName:f});
},_onProgressUpdating:function(f,h,g){if(this._isManualUpload()){a(".ruUploadOnHold",h).removeClass("ruUploadOnHold");
}if(this._getIsAreaRegistered()){this._progressAreaUpdater.add(g,f);
}var i={percent:f.PrimaryPercent,fileSize:f.RequestLength,fileName:a(".ruUploadProgress",h).text(),uploadedBytes:f.CompleteBytes};
if(this._enableInlineProgress){this._inlineProgressUpdater.updateIndicator(i.percent,h);
}a.raiseControlEvent(this,"progressUpdating",{row:h,data:i});
},_onFileUploadFail:function(k,j){this._updateRowImage(k,"fail");
this._updateCancelButton(k);
a(".ruFileProgressWrap",k).remove();
var i=this,f=(function(){function l(){this._handled=false;
this._message=j;
}l.prototype={set_handled:function(m){this._handled=m;
},get_handled:function(){return this._handled;
},get_message:function(){return this._message;
},get_loadedModuleName:function(){return i.get_loadedModuleName();
},get_row:function(){return k;
}};
return new l();
})(),h=this.get_events().getHandler("fileUploadFailed");
if(h){h(this,f);
}var g=f.get_handled();
if(!g){if(j!=c){a("object",k).remove();
throw"Error while uploading, "+j;
}}if(!this.get_isUploading()&&this._isPaused){this._resumeFileBrowsing();
}},_onFileValidationFail:function(f,g){a.raiseControlEvent(this,"validationFailed",{fileName:f,row:g});
this._updateCancelButton(g);
this._updateRowImage(g,"fail");
a(".ruFileProgressWrap",g).remove();
if(!this.get_isUploading()&&this._isPaused){this._resumeFileBrowsing();
}},_onFileUploaded:function(f,g){this._addUploadedFile(f,g);
this._updateCancelButton(f);
if(this._getIsAreaRegistered()){this._progressAreaUpdater.finish();
}if(this._enableInlineProgress){this._inlineProgressUpdater.updateIndicator(100,f);
a(".ruFileProgressWrap",f).remove();
}a.raiseControlEvent(this,"fileUploaded",{fileName:g.fileInfo.FileName,fileInfo:g.fileInfo,row:f});
this._isFileUploaded=true;
},_onFilesUploadFinished:function(g){var f=a(g);
f.find(".ruObject").remove();
if(f.hasClass("ruFileRemoved")){this._deleteFileInput(f.get(0),false);
}if(!this._isUploading()){this._stopUpdating();
}if(this._isFileUploaded){a.raiseControlEvent(this,"filesUploaded",{});
}if(!this.get_isUploading()&&this._isPaused){this._resumeFileBrowsing();
}this._isFileUploaded=false;
},_onFilesSelected:function(m,k,j){var i=j==undefined?null:j;
var g={count:k,dropArgs:i};
var h=a.raiseCancellableControlEvent(this,"filesSelected",g),l=this,f=a(m);
if(h){f.data("cancel",true);
setTimeout(function(){l.deleteFileInputAt(f.index(),true);
},50);
}},_onFileDropped:function(i,h,g){var f={row:i,file:h,originalDropEvent:g};
a.raiseControlEvent(this,"fileDropped",f);
},_onFileSelected:function(j,g,h,k){var f={row:j,fileInputField:g};
f.rowIndex=a(j).index();
f.fileName=h;
this._selectedFilesCount++;
k=k&&(this.get_maxFileCount()==0||this._selectedFilesCount<this.get_maxFileCount());
this._marshalUpload(j,h,k);
var i=a("label",j);
if(i.length>0){i.remove();
}a.raiseControlEvent(this,"fileSelected",f);
},_onFileUploading:function(k,g){this._startUpdating();
var f=new b.RadAsyncUploadFileUploadingArguments(k,this._getFileName(g));
this.raiseEvent("fileUploading",f);
var h=f.get_cancel();
if(h){k.isCanceled=true;
this._cancelUpload(k);
}var j=f.get_queryStringParams();
k.queryStringParams="";
for(var i in j){k.queryStringParams+="&"+i+"="+j[i];
}},_setHoverStateOnBrowseButton:function(g){var j="ruButtonHover",h=a(".ruFileWrap",g),f=a(".ruBrowse",g),k=this;
var i=function(m){if($telerik.isMouseOverElement(f[0],m)){var l=f.attr("disabled");
if(l&&l=="disabled"){return;
}f.addClass(j);
}else{f.removeClass(j);
}};
h.mouseenter(function(l){if(k.get_enabled()){h.bind("mousemove",i);
}}).mouseleave(function(l){if(k.get_enabled()){h.unbind("mousemove",i);
f.removeClass(j);
}});
},get_isPaused:function(){return this._isPaused;
},get_isUploading:function(){return this._isUploading();
},get_loadedModuleName:function(){return this._uploadModule.getName();
},get_enabled:function(){return this._enabled;
},get_fileFilter:function(){return a.parseJSON(this._fileFilter).values;
},get_handlerUrl:function(){return this._handlerUrl;
},set_enabled:function(f){if(this.get_enabled()==f){return;
}this._enabled=f;
if(a(".ruFileWrap",this._element).length<1){return;
}f?this._enable():this._disable();
},_parseToArray:function(j){var h;
if(!j){h=[];
}else{if(j instanceof Array){h=j;
}else{try{h=a.parseJSON(j);
}catch(f){var k=j.split(",");
h=[];
for(var g=0;
g<k.length;
g++){h[g]=k[g];
}}}}return h;
},get_dropZones:function(){return this._dropZones.join(",");
},set_dropZones:function(f){this._dropZones=this._parseToArray(f);
},get_allowedFileExtensions:function(){return this._allowedFileExtensions.join(",");
},set_allowedFileExtensions:function(f){this._allowedFileExtensions=this._parseToArray(f);
},get_multipleFileSelectionEnabled:function(){return this._multipleFileSelection==d.Automatic;
}};
a.registerControlProperties(b.RadAsyncUpload,{inputSize:23,initialFileInputsCount:1,localization:null,maxFileCount:0,enableFileInputSkinning:true});
a.registerControlEvents(b.RadAsyncUpload,["adding","added","fileDropped","fileSelected","filesSelected","fileUploading","fileUploaded","fileUploadFailed","filesUploaded","validationFailed","fileUploadRemoving","fileUploadRemoved","progressUpdating"]);
b.RadAsyncUpload.registerClass("Telerik.Web.UI.RadAsyncUpload",b.RadWebControl);
})();
(function(a){var b=Telerik.Web.UI.RadAsyncUpload;
if(!b.Modules){b.Modules={};
}b.Modules.getModuleIdRecursive=function(c,e){var d=c.data(e);
if(d!=undefined){return d;
}return b.Modules.getModuleIdRecursive(c.prev(),e);
};
})($telerik.$);
(function(a,b){b.ProgressData=function(){this.CompleteBytes=0;
this.TotalCompleteBytes=0;
this.RequestLength=0;
this.PrimaryPercent=0;
this.SecondaryPercent=0;
this.SecondaryValue=0;
this.SecondaryTotal=0;
this.TimeEstimated=0;
this.TimeElapsed=0;
this.Speed=0;
this.CurrentOperationText="Uploading Files...";
};
b.ProgressAreaUpdater=function(){var j=[];
var e=null;
var h=500;
var g=this;
var f=false;
var d=false;
var i=0;
var c=[];
a.extend(this,{add:function(l,k){if(!d){d=true;
}j[l]=k;
},finish:function(){i++;
},update:function(){if(!d){return;
}var k=this._aggregate();
for(var l=0;
l<Telerik.Web.UI.ProgressAreas.length;
l++){Telerik.Web.UI.ProgressAreas[l].update(k);
}},startUpdating:function(){f=true;
e=setInterval(function(){g.update();
},h);
},addCanceledFile:function(l,k){c[l]=l;
if(!k._isUploading()){k._stopUpdating();
}},stopUpdating:function(){f=false;
d=false;
this.reset();
for(var k=0;
k<Telerik.Web.UI.ProgressAreas.length;
k++){Telerik.Web.UI.ProgressAreas[k].hide();
}},isUpdating:function(){return f;
},reset:function(){clearInterval(e);
j=[];
i=0;
},_aggregate:function(){try{var k=new b.ProgressData();
for(var m in j){if(c[m]==undefined){k.CompleteBytes+=j[m].CompleteBytes;
k.RequestLength+=j[m].RequestLength;
k.TimeElapsed+=j[m].TimeElapsed;
if(j[m].TimeEstimated!=undefined){k.TimeEstimated+=j[m].TimeEstimated;
}if(j[m].TotalCompleteBytes!=undefined){k.TotalCompleteBytes+=j[m].TotalCompleteBytes;
}k.SecondaryTotal+=j[m].SecondaryTotal;
k.CurrentOperationText=j[m].CurrentOperationText;
}}k.SecondaryValue=i;
return b.AsyncProgressManager.formatProgressData(k);
}catch(l){}}});
};
b.IFrameProgressTracker=function(e){var f=500,c=null,d=this;
a.extend(this,{startTracking:function(){c=setInterval(d.getAjaxCallback(),f);
},stop:function(){clearInterval(c);
},_processResponse:function(j,i){try{var h=a.parseJSON(j.responseText);
if(e.callbackParams&&e.callbackParams.length>0){e.callbackParams.unshift(h);
e.callback.apply(this,e.callbackParams);
}else{e.callback(h);
}}catch(g){}},getAjaxCallback:function(){return function(){a.ajax({url:e.url,data:e.params,cache:false,complete:d._processResponse,dataType:"json",ajaxError:function(){}});
};
}});
};
})($telerik.$,Telerik.Web.UI.RadAsyncUpload);
(function(a,b){b.InlineProgress=function(){a.extend(b.InlineProgress.prototype,{updateIndicator:function(c,e){var d=a(".ruFileProgress",e);
d.css("width",c+"%");
if(!d.hasClass("ruProgressStarted")){d.addClass("ruProgressStarted");
}if(c==100){d.parent().addClass("ruProgressComplete");
}}});
};
b.AsyncProgressManager=function(){};
b.AsyncProgressManager.formatProgressData=function(i,h){function g(k){k=new Date(k);
var j={seconds:k.getUTCSeconds(),minutes:k.getUTCMinutes(),hours:k.getUTCHours()};
a.each(j,function(l,m){if(m<10){j[l]="0"+m;
}});
return j.hours+":"+j.minutes+":"+j.seconds+"s";
}function c(j){var l=j/1024,m=l/1024,k=m/1024;
return k>0.8?Math.round(k*10)/10+"GB":m>0.8?Math.round(m*10)/10+"MB":l>0.8?Math.round(l*10)/10+"kB":j+"B";
}function d(){return{CompleteBytes:i.loaded+i.accumulated,RequestLength:i.total,PrimaryPercent:((i.loaded+i.accumulated)/i.total)*100,SecondaryTotal:i.totalFiles,TimeElapsed:new Date()-i.startTime,TotalCompleteBytes:i.totalLoaded,CurrentOperationText:i.fileName,TimeEstimated:Math.round((i.totalFilesSize)/Math.round((i.totalLoaded)/((new Date()-i.startTime))))};
}function e(){i.PrimaryValue=parseFloat(i.PrimaryValue);
i.PrimaryTotal=parseFloat(i.PrimaryTotal);
i.Speed=parseFloat(i.Speed);
i.SecondaryTotal=1;
return i;
}function f(){var k={PrimaryValue:c(i.CompleteBytes),PrimaryTotal:c(i.RequestLength),PrimaryPercent:Math.round(i.CompleteBytes/i.RequestLength*1000)/10,TimeElapsed:g(i.TimeElapsed),TimeEstimated:g(i.TimeEstimated),SecondaryValue:i.SecondaryValue,SecondaryTotal:i.SecondaryTotal,SecondaryPercent:Math.round(i.SecondaryValue/i.SecondaryTotal*1000)/10,CurrentOperationText:i.CurrentOperationText};
var j=(i.TotalCompleteBytes)?i.TotalCompleteBytes:i.CompleteBytes;
k.Speed=c(j/(i.TimeElapsed/1000))+"/s";
return k;
}switch(h){case"IFrame":return e();
case"FileAPI":return d();
default:return f();
}};
})($telerik.$,Telerik.Web.UI.RadAsyncUpload);
Telerik.Web.UI.RadAsyncUploadFileUploadingArguments=function(b,a){this._row=b;
this._fileName=a;
this._params=null;
Telerik.Web.UI.RadAsyncUploadFileUploadingArguments.initializeBase(this);
};
Telerik.Web.UI.RadAsyncUploadFileUploadingArguments.prototype={get_row:function(){return this._row;
},get_fileName:function(){return this._fileName;
},set_queryStringParams:function(a){this._params=a;
},get_queryStringParams:function(){return this._params;
}};
Telerik.Web.UI.RadAsyncUploadFileUploadingArguments.registerClass("Telerik.Web.UI.RadAsyncUploadFileUploadingArguments",Sys.CancelEventArgs);
(function(b,a){var f={},e={},c="ruDropZone";
var d=function(g){var t=g,r=this,q="",s=t._multipleFileSelection==1?true:false,p=false,o=[],h=[],i=g.get_id(),m="dragover",l="dragenter",n="drop",k=".";
a.observable(this);
a.extend(this,{fileInputAdded:function(w){var v=j(),y=a(w).parent("li")[0];
try{r.setRowId(y);
r._setContext(y.id,{input:v,initialRow:y,currentUploadIndex:-1,map:[],progress:{startTime:-1,totalCompleteBytes:0,totalFiles:-1},upload:{postData:g._getPostData(),handlerUrl:g.get_handlerUrl()},module:r});
}catch(u){r.riseException(u);
}e[y.id]=y.id;
q=y.id;
a(v).change(a.proxy(function(A){var B=a(A.target).parents("li")[0],z=f[B.id];
r._processFiles(z,z.input.files);
},this));
a(w).append(v);
var x=t._createLabel(a(v).attr("id"));
a(w).append(x);
r._appendDropZone(w);
},get_module:function(){return r;
},get_upload:function(){return t;
},setRowId:function(u){u.id=t.getID("row");
},dispose:function(){delete e[q];
delete f[q];
a(document).off(m+k+i).off(n+k+i);
if($telerik.isIE){a(document).off(l+k+i);
}this.disposeObservable();
},raiseException:function(u){},rowRemoved:function(u){a(u).find("input[type='file']").unbind();
},getName:function(){return"File API";
},cancel:function(x){var v=x.id,u=f[e[v]],y=x._mapIndex,w=u.progress.filesCount-u.map.length;
if(u.currentUploadIndex==y){if(u.hasOwnProperty("abort")){u.abort();
}r._uploadNextFile(u);
}else{delete u.map[y-w].file;
this._marshalHoldContext();
}u.progress.totalFiles=u.progress.totalFiles-1;
},_appendDropZone:function(v){var u=a(v).parent("li");
var w=a("<div></div>").addClass(c).appendTo(u).bind({dragover:function(z){r._dropoverHandler(z);
},dragleave:function(z){if(!$telerik.isMouseOverElement(this,z.originalEvent)){w.style.display="none";
}},drop:function(z){r._dropHandler(z);
w.style.display="none";
}}).add(u).add(u.parents(".ruInputs")).bind({dragenter:function(A){if($telerik.isIE){A.preventDefault();
A.stopPropagation();
}var z=A.originalEvent.dataTransfer;
var B=(z.types!=null&&(z.types.indexOf?z.types.indexOf("Files")!=-1:z.types.contains("application/x-moz-file")));
if(B||$telerik.isSafari5||$telerik.isIE10Mode||$telerik.isOpera){w.style.display="block";
}}}).filter("."+c)[0];
var x=document.createElement("SPAN");
var y=g.get_localization();
x.innerHTML=y.DropZone;
w.appendChild(x);
},_dropoverHandler:function(u){u.preventDefault();
u.stopPropagation();
},_dropHandler:function(v){v.preventDefault();
v.stopPropagation();
var w=v.originalEvent.dataTransfer.files;
if(w.length>0){var y=a(".ruInputs li",g._element);
var u;
if(!!g._uploadedFilesRendering){u=f[y[y.length-1].id];
}else{u=f[y[0].id];
}var x=s?w:[w[0]];
r._processFiles(u,x,v);
}},_handleCustomDropZones:function(){var x=t._dropZones.length,w=this;
for(var v=0;
v<x;
v++){var u=g._dropZones[v];
a(document).on(m+k+i,u,function(y){w._dropoverHandler(y);
}).on(n+k+i,u,function(y){w._dropHandler(y);
});
if($telerik.isIE){a(document).on(l+k+i,u,function(y){y.preventDefault();
y.stopPropagation();
});
}}},_appendRow:function(v){var u=t._appendStyledRow(t._createStyledRow())[0];
r.setRowId(u);
e[u.id]=v;
return u;
},_processFiles:function(u,w,v){var x=u.input;
u.progress.totalFiles=w.length;
u.progress.filesCount=w.length;
if(v){u.droppedFiles=w;
}x.style.zIndex=-1;
a(x).attr("tabindex","-1");
r.trigger("FilesSelected",u.initialRow,w.length,v);
a(u.initialRow).find("."+c).addBack().unbind().filter("."+c).remove();
if(a(u.initialRow).data("cancel")){x.style.zIndex=1;
return;
}a.each(w,function(z,y){var A=z==0?u.initialRow:r._appendRow(u.initialRow.id);
A._mapIndex=z;
if(v){r.trigger("FileDropped",A,y,v);
}r.trigger("FileSelected",A,x,y.name,(z+1)==u.progress.totalFiles,y);
u.map.push({file:y,row:A});
});
if(t._manualUpload){if(!this._getIsUploading()){this._queueContextForUpload(u);
}else{this._queueHoldContext(u);
}}else{u.progress.startTime=new Date();
this._uploadFile(u.map.shift());
}},_uploadNextFile:function(u){if(u.map.length<=0){a(u.input).remove();
delete f[u.initialRow.id];
if(this._getContextQueueForUpload().length>0){this._uploadNextFilesSet();
}else{r._marshalHoldContext();
r.trigger("FilesUploaded",u.initialRow);
}}else{r._uploadFile(u.map.shift());
}},_uploadFile:function(x){if(!x.file){r._uploadNextFile(f[e[x.row.id]]);
return;
}var w=x.file;
var v=x.row;
var y=e[v.id];
var u=new d.context({file:w,row:v,rowId:y});
if(t._disableChunkUpload){u.set_chunkSize(u.file.size,true);
}else{u.set_chunkSize(t._chunkSize,false);
}if(r._validate(w,y,v)){setTimeout(function(){f[y].currentUploadIndex=v._mapIndex;
r.trigger("FileUploading",v,w.name);
try{var A=r._setUp({row:v,context:u,parentRowId:y});
if(!v.isCanceled){A.start();
}}catch(z){r.raiseException(z);
}},1);
}},_setUp:function(u){var v={start:function(){try{var x=new d.uploadRequest(u.context,function(A){if(A==="next"){u.context.metaData.ChunkIndex++;
u.context.progressData.moveNext();
v.start(u);
}else{var z=a.parseJSON(A),B=u.row;
if(z.invalidFileSize||z.invalidFileExtension){r.trigger("FileValidationFail",u.context.file.name,B);
}else{delete e[B.id];
r.trigger("FileUploaded",B,z);
}r._uploadNextFile(f[u.parentRowId]);
}});
f[u.parentRowId].abort=function(){x.abort();
};
if(r.get_upload().get_isPaused()){var y=function(){var z=u.parentRowId;
if(f[z]){x.send();
}};
r.resume=y;
}else{x.send();
}}catch(w){r.raiseException(w);
}}};
return v;
},_startUploadManually:function(){if(!this._getIsUploading()){this._uploadNextFilesSet();
}},_uploadNextFilesSet:function(){if(this._getContextQueueForUpload().length>0){var u=this._dequeContextForUpload();
this._setIsUploading(true);
u.progress.startTime=new Date();
this._uploadFile(u.map.shift());
}},_queueHoldContext:function(u){o.push(u);
},_queueContextForUpload:function(u){h.push(u);
},_dequeContextForUpload:function(){return h.shift();
},_getContextQueueForUpload:function(){return h;
},_getIsUploading:function(){return p;
},_setIsUploading:function(u){p=u;
},_marshalHoldContext:function(){if(t._manualUpload&&h.length==0){if(o.length>0){h=o;
o=[];
}this._setIsUploading(false);
}},_validate:function(u,v,y){var x=t._maxFileSize==0?true:u.size<=t._maxFileSize;
var w;
if(!(w=t._verifyExtension(u.name)&&x)){r.trigger("FileValidationFail",u.name,y);
r._uploadNextFile(f[v]);
}return w;
},_setContext:function(v,u){f[v]=u;
},_getContext:function(u){return f[u];
},_getUploadRowsDeleteMe:function(){return f;
},_getRowsLookUpDeleteMe:function(){return e;
}});
r._handleCustomDropZones();
function j(){var u=a(t._createInput("","ruFileInput","file",t._tabIndex));
if($telerik.isIE){u.keydown(function(v){if(v.keyCode==Sys.UI.Key.enter){v.preventDefault();
}});
}if(!($telerik.isSafari&&!$telerik.isChrome&&!$telerik.isSafari6)){if(s){a(u).attr("multiple",true);
}}u.attr({name:t.getID("file"),id:t.getID("file"),size:t.get_inputSize()});
if($telerik.isIE){a(u).attr("unselectable","on");
}if(t._getIsRightToLeft()){if($telerik.isFirefox){u.attr("dir","rtl");
}if($telerik.isIE){u[0].style.direction="ltr";
}}t._fileInput=u[0];
return u[0];
}};
d.context=(function(){var g=1024*1024*2;
var h=function(j){this.file=j.file;
this.row=j.row;
this.position=0;
var i=this.file;
this.progressData={total:i.size,loaded:0,accumulated:0};
this.progressData.moveNext=function(){this.accumulated+=this.loaded;
f[e[j.row.id]].progress.totalCompleteBytes+=this.loaded;
this.loaded=0;
};
this.metaData={TotalChunks:Math.ceil(i.size/g),ChunkIndex:0,TotalFileSize:i.size,UploadID:(new Date()).getTime()+i.name.replace(/[\\/:"*?<>|]+/g,"")};
this.fileInfo={name:i.name,type:i.type};
};
h.Chunk_Size=function(){return g;
};
h.prototype={get_currentChunk:function(){var j=this.position;
this.position+=g;
var i;
if(!!(i=this.get_chunker())){return this.file[i](j,this.position);
}else{return this.file;
}},get_chunker:function(){if(this.file.slice){return"slice";
}else{if(this.file.mozSlice){return"mozSlice";
}else{if(this.file.webkitSlice){var i=(navigator.userAgent.toLowerCase().indexOf("android")>-1);
if(!i){return"webkitSlice";
}}else{return null;
}}}},set_chunkSize:function(j,i){g=j;
this.metaData.TotalChunks=Math.ceil(this.file.size/g);
this.metaData.IsSingleChunkUpload=i;
}};
return h;
})();
d.mergeProgressData=function(g,h){return a.extend(g,h);
};
d.uploadRequest=(function(){var g=function(h,i){this.context=h;
this.moduleContext=f[e[h.row.id]];
this.postDataString="rauPostData";
this.formData=new FormData();
this.callback=i;
if(h.file.size!=0){this.isLastChunk=h.metaData.ChunkIndex==h.metaData.TotalChunks-1;
}else{this.isLastChunk=true;
h.metaData.TotalChunks=1;
}this.xhr=new XMLHttpRequest();
};
g.prototype={writeFormData:function(i){this.formData.append("rauPostData",this.moduleContext.upload.postData);
var h=this.context.get_currentChunk(),j=this.moduleContext.module,k=this.context.row;
if($telerik.isIE10&&this.context.file.size==0){var m=window.navigator.userAgent;
if(m.indexOf("Trident/7.0")==-1){j.trigger("FileUploadFail",k,"IE10 browser does not support upload of 0 bytes size file");
j._uploadNextFile(f[e[k.id]]);
j._marshalHoldContext();
return true;
}}if($telerik.isOpera){this.formData.append("file",h,"blob");
}else{this.formData.append("file",h);
}if(i){this.formData.append("fileName",this.context.file.name);
this.formData.append("contentType",this.context.file.type);
if(this.context.file.lastModifiedDate){this.formData.append("lastModifiedDate",this.context.file.lastModifiedDate.toJSON());
}}var l=JSON.stringify(this.context.metaData);
if(this.context.get_chunker()&&this.context.file.size>0){this.formData.append("metadata",l);
}else{if(this.context.file.size==0){this.formData.append("metadata",l);
}}},send:function(){var n=this.xhr,i=this,j=this.moduleContext.module;
n.onreadystatechange=function m(){if(n.readyState===4){if(n.status===200){i.callback(n.responseText);
}else{if(n.status!==0){var o=i.context.row;
j.trigger("FileUploadFail",o,"HTTP Error code is: "+n.status);
j._uploadNextFile(f[e[o.id]]);
j._marshalHoldContext();
}}}};
n.upload.onprogress=function k(q){var s=i.context.row,t=s.id,p=i.context.progressData,o,r;
p.loaded=q.loaded;
p.fileName=i.context.fileInfo.name;
p.totalFilesSize=0;
if(i.moduleContext.droppedFiles){o=i.moduleContext.droppedFiles.length;
for(r=0;
r<o;
r++){p.totalFilesSize+=i.moduleContext.droppedFiles[r].size;
}}else{o=i.moduleContext.input.files.length;
for(r=0;
r<o;
r++){p.totalFilesSize+=i.moduleContext.input.files[r].size;
}}p.totalLoaded=i.moduleContext.progress.totalCompleteBytes+q.loaded;
j.trigger("ProgressUpdating",b.AsyncProgressManager.formatProgressData(d.mergeProgressData(p,i.moduleContext.progress),"FileAPI"),s,e[t]);
};
var h=this.writeFormData(this.isLastChunk);
if(!h){var l=i.context.row.queryStringParams;
if(this.isLastChunk&&l){n.open("POST",this.moduleContext.upload.handlerUrl+l);
}else{n.open("POST",this.moduleContext.upload.handlerUrl);
}n.setRequestHeader("Cache-Control","no-cache");
n.send(this.formData);
}},abort:function(){this.xhr.abort();
}};
return g;
})();
b.Modules.FileApi=d;
b.Modules.FileApi.isAvailable=function(){return window.File&&window.FileList&&window.FormData;
};
})(Telerik.Web.UI.RadAsyncUpload,$telerik.$);
(function(){var b=Telerik.Web.UI.RadAsyncUpload;
var a=$telerik.$;
var d=[];
var c=[];
b.Modules.Silverlight=function(e){a.extend(this,{fileInputAdded:function(l){var m=e.getID("silverlight")+Math.floor(Math.random()*11);
var n=f(m,l,g(e,m),e._silverlightModuleUrl);
a(l).parent("li").data("silverlight",m);
d[m]=h(this,l,e,m);
c[m]=n;
if($telerik.isFirefox){var k=e.getID((new Date()).getTime());
var j="<input type='text' id='"+k+"' runat='server' style='left: 0; position: absolute; top: -5000px'/>";
var i=a(j);
a(e.get_element()).append(i);
a(i).focus();
setTimeout(function(){a(i).remove();
},10);
}if(e.get_fileFilter().length>0){setTimeout(function(){try{n.Content.Page.SetFilter(e.get_fileFilter());
}catch(o){}},500);
}},dispose:function(){},rowRemoved:function(){},cancel:function(i){var j=this.getSilverlightModule(b.Modules.getModuleIdRecursive(a(i),"silverlight"));
j.Content.Page.CancelUpload(a(".ruUploadCancelled",i).html());
},getSilverlightModule:function(i){return c[i];
},getSilverlightRow:function(i){return d[i];
},getName:function(){return"Silverlight";
}});
a.observable(this);
function g(i,k){var j=[];
j[j.length]="PostData="+i._getPostData();
j[j.length]="SilverlightRowId="+k;
j[j.length]="AsyncUploadId="+i.get_id();
j[j.length]="MultipleSelection="+(i._multipleFileSelection===0?"Disabled":"Automatic");
j[j.length]="AllowedFileExtensions="+i._allowedFileExtensions.join("|");
j[j.length]="ServiceHandlerUrl="+i._handlerUrl;
j[j.length]="MaxFileSize="+i._maxFileSize;
return j.join();
}function h(l,j,i,k){return(function(){var o=[];
var n=0;
var m=0;
var p=new Date();
var q={_onFilesSelected:function(r){n=r;
var s=a(j).parent()[0];
l.trigger("FilesSelected",s,n);
if(!a(s).data("cancel")){var t=c[a(s).data("silverlight")];
t.Content.Page.MarshalUploads();
}},_onFileSelected:function(r){m++;
var s=m>1?s=i._appendStyledRow(i._createStyledRow())[0]:s=a(j).parent()[0];
o[o.length]=s;
l.trigger("FileSelected",s,null,r,m==n);
},_onFileUploadStarted:function(r,s){var t=s==(n-1);
l.trigger("FileUploading",o[s],r,t);
},_onFilesUploadFinished:function(){l.trigger("FilesUploaded",o[0]);
},_onFileUploadFinished:function(t,r){var s=a.parseJSON(t);
if(s.invalidFileSize||s.invalidFileExtension){l.trigger("FileValidationFail","",o[r]);
}else{l.trigger("FileUploaded",o[r],s);
}},_onValidationFailed:function(r,s){l.trigger("FileValidationFail",r,o[s]);
},_onSilverlightError:function(s,r){l.trigger("FileUploadFail",o[r],s);
},_onUploadProgress:function(u,s){var v=new Date()-p;
var r=a.parseJSON(u);
var t={PrimaryPercent:Math.round((r.BytesRead*100)/r.FileSize),CompleteBytes:r.BytesRead,RequestLength:r.FileSize,TimeElapsed:v,SecondaryTotal:r.TotalFilesCount,SecondaryValue:r.FilesUploaded,CurrentOperationText:r.FileName};
l.trigger("ProgressUpdating",t,o[s],k);
}};
return q;
})();
}function f(m,l,j,n){var i=a('<span style="position: absolute; display: block; height: 100%;"></span>');
i.prependTo(l)[0].innerHTML='<object class="ruObject" id="'+m+'" data="data:application/x-silverlight-2," type="application/x-silverlight-2" height="22px">                              <param name="source" value="'+n+'" />                              <param name="windowless" value="true" />                              <param name="background" value="transparent" />                              <param name="minRuntimeVersion" value="4.0.60310.0" />                              <param name="InitParams" value = "'+j+'" />                              <param name="autoUpgrade" value="true" />                         </object>';
var k=a(".ruObject",l);
i.width("100%").children().width("100%");
return k[0];
}};
b.Modules.Silverlight.isAvailable=function(){var j=false;
try{var h=null;
var l=false;
if(window.ActiveXObject){var m="4.0.60310.0";
try{h=new ActiveXObject("AgControl.AgControl");
if(h.IsVersionSupported(m)){j=true;
}h=null;
}catch(i){l=true;
}}else{l=true;
}if(l){var k=navigator.plugins["Silverlight Plug-In"];
if(k){var f=k.description;
var g=f.split(".");
j=g[0]>=4?true:false;
}}}catch(i){j=false;
}return j;
};
})();
(function(){var b=Telerik.Web.UI.RadAsyncUpload;
var a=$telerik.$;
var c=[];
b.Modules.Flash=function(d){a.extend(this,{fileInputAdded:function(e){var k=this;
var h=d.getID("flash")+Math.floor(Math.random()*11);
k.createFlashObject(h,e);
var j=e.parent()[0];
var n=j;
var l={};
var o=null;
var m=0;
a(e).parent("li").data("flash",h);
var g=0;
var f=[];
var i=document.getElementById(h);
c[h]={onFlashEvent:function(q,s){var z,w,r;
if(q=="Init"){try{i.setFileFilters(d.get_fileFilter(),d.get_multipleFileSelectionEnabled());
}catch(p){var t=i.parentNode;
t.parentNode.removeChild(t);
k.createFlashObject(h,e);
i=document.getElementById(h);
}}if(q=="Cancel"){for(var u=0;
u<f.length;
u++){if(f[u].name==s){Array.remove(f,f[u]);
return;
}}i.cancel();
w=d._getPostData();
r=f.shift();
if(r){i.uploadFile(r.id,d._handlerUrl,{multipart_params:{rauPostData:w}});
}else{k.trigger("FilesUploaded",n);
}}if(q=="SelectFiles"){m=s.length;
k.trigger("FilesSelected",j,m);
if(a(j).data("cancel")){return;
}o=new Date();
var x=0;
var A=j;
a.each(s,function(){var E=j!==null?j:d._appendStyledRow(d._createStyledRow())[0];
x++;
k.trigger("FileSelected",E,null,this.name,x==s.length);
l[this.id]={row:E,fileName:this.name};
a(i).parent().css("width",0).css("height",0);
if(d._maxFileSize>0&&this.size>d._maxFileSize){k.trigger("FileValidationFail",this.name,E);
}else{if(!d._verifyExtension(this.name)){k.trigger("FileValidationFail",this.name,E);
}else{f.push(this);
k.trigger("FileUploading",E,this.name);
}}j=null;
});
if(f.length===0){k.trigger("FilesUploaded",A);
}w=d._getPostData();
r=f.shift();
if(r){i.uploadFile(r.id,d._handlerUrl,{multipart_params:{rauPostData:w}});
}}if(q=="IOError"){z=l[s.id].row;
var v=s.message;
k.trigger("FileUploadFail",z,v);
}if(q=="HttpError"){z=l[s.id].row;
var C="HTTP Error code: "+s.status;
k.trigger("FileUploadFail",z,C);
}if(q=="UploadProcess"){var D=new Date()-o;
var y={PrimaryPercent:Math.round((s.loaded*100)/s.size),CompleteBytes:s.loaded,RequestLength:s.size,TimeElapsed:D,SecondaryTotal:m,SecondaryValue:g,CurrentOperationText:"uploading file..."};
z=l[s.id].row;
k.trigger("ProgressUpdating",y,z,h);
}if(q=="UploadComplete"){var B=l[s.id].row;
k.trigger("FileUploaded",B,a.parseJSON(s.result));
g++;
w=d._getPostData();
r=f.shift();
if(r){i.uploadFile(r.id,d._handlerUrl,{multipart_params:{rauPostData:w}});
}else{k.trigger("FilesUploaded",n);
}}}};
},rowRemoved:function(e){},getFlashModule:function(e){return c[e];
},cancel:function(h){var e=a(".ruUploadCancelled",h).html();
var f=b.Modules.getModuleIdRecursive(a(h),"flash");
var g=this.getFlashModule(f);
g.onFlashEvent("Cancel",e);
},createFlashObject:function(g,f){var h=d._flashModuleUrl;
var e=a('<span style="position: absolute; display: block; height: 100%;"></span>');
e.prependTo(f[0])[0].innerHTML='<object class="ruObject" tabindex="1" height="22px" data="'+h+'" type="application/x-shockwave-flash" style="outline: 0pt none;" id="'+g+'">                             <param value="'+h+'" name="movie">                             <param value="id='+g+'" name="flashvars">                             <param value="transparent" name="wmode">                             <param value="always" name="allowscriptaccess">                         </object>';
e.width("100%").children().width("100%");
},dispose:function(){},getName:function(){return"Flash";
}});
a.observable(this);
};
b.Modules.Flash.isAvailable=function(){var g;
try{g=navigator.plugins["Shockwave Flash"];
g=g.description;
}catch(d){try{g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version");
}catch(e){g="0.0";
}}g=g.match(/\d+/g);
var f=parseFloat(g[0]+"."+g[1]);
return f>=10;
};
b.Modules.Flash.fireEvent=function(d,f,e){setTimeout(function(){c[f].onFlashEvent(d,e);
},0);
};
})();
(function(){var b=Telerik.Web.UI.RadAsyncUpload;
var a=$telerik.$;
b.Modules.IFrame=function(d,n){var w=0,v=0,k=null,p="RadUrid",c=b,q={},l=false,j=[],e=[],r=1;
a.extend(this,{fileInputAdded:function(z){var y=f();
if($telerik.isIE){a(y).keydown(function(B){if(B.keyCode==Sys.UI.Key.enter){B.preventDefault();
}});
}a(y).change(a.proxy(u,this)).addClass("ruFileInput");
if(d._getIsRightToLeft()&&$telerik.isIE){var x=$telerik.$("<span></span>").addClass("ruRtlWrap");
x.append(y);
y=x[0];
}a(z).append(y);
var A=d._createLabel(a(y).attr("id"));
a(z).append(A);
},rowRemoved:function(x){a(".ruFakeInput, .ruBrowse",x).unbind();
},cancel:function(A){try{if(A._isUploading==undefined){var x=A.contextIndex;
if(x!=undefined){e.splice(x,1);
}else{j.splice(A.holdContextIndex,1);
}}else{var B=a(A).attr("id");
var C=q[B];
var z=$get(C+"frame");
if(z.contentWindow.stop){z.contentWindow.stop();
}else{z.contentWindow.document.execCommand("Stop");
}w--;
s(A);
d._progressAreaUpdater.addCanceledFile(C,d);
}if(e.length==0){l=false;
e=j;
j=[];
}}catch(y){}},dispose:function(){a(d.get_element()).off();
a(".ruFakeInput, .ruBrowse",d.get_element()).unbind();
this.disposeObservable();
},getName:function(){return"IFrame";
},_startUploadManually:function(){if(!this._getIsUploading()){while(this._getContextQueueForUpload().length>0){this._setIsUploading(true);
var x=this._dequeContextForUpload();
x.apply(this);
}}},_marshalHoldContext:function(){this._setIsUploading(false);
if(this._getHoldContextQueue().length>0){this._setContextQueueForUpload(j);
this._setHoldContextQueue([]);
}},_queueHoldContext:function(x){j.push(x);
},_getHoldContextQueue:function(){return j;
},_setHoldContextQueue:function(x){j=x;
},_queueContextForUpload:function(x){e.push(x);
},_dequeContextForUpload:function(){return e.shift();
},_getContextQueueForUpload:function(){return e;
},_setContextQueueForUpload:function(x){e=x;
},_getIsUploading:function(){return l;
},_setIsUploading:function(x){l=x;
},_isManualUpload:function(){return d._manualUpload;
}});
a.observable(this);
function i(x){w--;
s(x);
}function s(y){var x=a(y).data("progress");
if(x){x.stop();
}}function m(A,G,D,E){var B=null;
try{B=A.contentDocument||A.contentWindow.document;
}catch(y){o(D);
E.trigger("FileUploadFail",G,"");
return;
}if(B){if(a(G).parents().length==0){return;
}var F="";
try{var C=B.body.innerHTML.trim();
if(C!=""&&C!=undefined){F=a.parseJSON(B.body.innerHTML);
}else{F=null;
}}catch(y){o(D);
i(G);
if(w==0){E._marshalHoldContext();
}E.trigger("FileUploadFail",G,B.body.innerHTML);
return;
}if(F){if(F.invalidFileSize||F.invalidFileExtension){o(D);
i(G);
var x=a(".ruUploadProgress",G);
a(".ruFileProgressWrap",x).remove();
var z=x.html();
if(w==0){E._marshalHoldContext();
}E.trigger("FileValidationFail",z,G);
return;
}o(D);
i(G);
E.trigger("FileUploaded",G,F);
if(w==0){E._marshalHoldContext();
E.trigger("FilesUploaded",G);
}}}}function u(z){var A=z.target;
var D=A.id;
var F=a(A).parents("li")[0];
F.id=d.getID("row");
this.trigger("FilesSelected",F,r);
q[F.id]=D;
if(a(F).data("cancel")){return;
}this.trigger("FileSelected",F,A,A.value,true);
if(!d._verifyExtension(A.value)){if(a("input[type='file']",F).length>0){a("input[type='file']",F).remove();
}this.trigger("FileValidationFail",A.value,F);
return;
}var G=a("<input type='hidden' name='rauPostData' />").val(d._getPostData());
var C=g(D,d._handlerUrl).append(A).append(G);
k=n+v;
var y=k;
var E=this;
var B=h(D).load(function(H){m(H.target,F,D,E);
});
a(document.body).append(C).append(B);
t(C[0],p,k);
v++;
var x=function(){w++;
F._isUploading=true;
var I=new c.IFrameProgressTracker({url:d._progressHandlerUrl,params:{AsyncProgress:true,RadUrid:y},callback:function(J){J.CurrentOperationText=F.innerText;
var K=c.AsyncProgressManager.formatProgressData(J,"IFrame");
E.trigger("ProgressUpdating",K,F,D);
}});
I.startTracking();
a.data(F,"progress",I);
a.data(F,"fileInputId",A.id);
this.trigger("FileUploading",F,A.value);
if(!F.isCanceled){var H=F.queryStringParams;
if(H){C[0].action+=H;
}C.submit();
}};
if(this._isManualUpload()){if(!this._getIsUploading()){F.contextIndex=this._getContextQueueForUpload().length;
this._queueContextForUpload(x);
}else{F.holdContextIndex=this._getHoldContextQueue().length;
this._queueHoldContext(x);
}}else{x.apply(this);
}}function t(x,y,z){if(typeof(x.action)=="undefined"){x.action="";
}if(x.action.match(/\?/)){if(x.action.substring(x.action.length-1)!="?"){x.action+="&";
}}else{x.action+="?";
}x.action+=y+"="+z;
}function o(x){setTimeout(function(){a($get(x+"form")).remove();
a($get(x+"frame")).remove();
},100);
}function f(){var x=a(d._createInput("","ruFileInput","file",d._tabIndex));
x.attr({name:d.getID("file"),id:d.getID("file"),size:d.get_inputSize()});
if($telerik.isFirefox&&d._getIsRightToLeft()){x.attr("dir","rtl");
}if($telerik.isIE){a(x).attr("unselectable","on");
}d._fileInput=x[0];
return x[0];
}function g(y,x){return a("<form />",{"class":"ruForm",action:x,method:"POST",encoding:"multipart/form-data",enctype:"multipart/form-data",target:y+"frame",id:y+"form"}).css("display","none");
}function h(x){return a(["<iframe name='",x,"frame' id='",x,"frame' style='display: none' />"].join(""));
}};
})();
